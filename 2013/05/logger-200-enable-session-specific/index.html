<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Logger 2.0.0 - Enable Session Specific Logging | TalkApex</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="In preparation for the release of Logger 2.0.0 I’ve decided to write a few posts highlighting some of the new features.
One of the most common feature request for Logger has been the ability to enable">
<meta property="og:type" content="article">
<meta property="og:title" content="Logger 2.0.0 - Enable Session Specific Logging">
<meta property="og:url" content="http://www.talkapex.com/2013/05/logger-200-enable-session-specific/index.html">
<meta property="og:site_name" content="TalkApex">
<meta property="og:description" content="In preparation for the release of Logger 2.0.0 I’ve decided to write a few posts highlighting some of the new features.
One of the most common feature request for Logger has been the ability to enable">
<meta property="og:updated_time" content="2017-01-07T15:38:36.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Logger 2.0.0 - Enable Session Specific Logging">
<meta name="twitter:description" content="In preparation for the release of Logger 2.0.0 I’ve decided to write a few posts highlighting some of the new features.
One of the most common feature request for Logger has been the ability to enable">
<meta name="twitter:creator" content="@martindsouza">
  
    <link rel="alternate" href="/atom.xml" title="TalkApex" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <!-- <div id="banner"></div> -->
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <img src="/images/header-banner.png" alt="" />
      <!-- <h1 id="logo-wrap">
        <a href="/" id="logo">TalkApex</a>
      </h1> -->
      <!-- 
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Martin Giffy D&#39;Souza on Oracle APEX</a>
        </h2>
       -->
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://www.talkapex.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-logger-200-enable-session-specific" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2013/05/logger-200-enable-session-specific/" class="article-date">
  <time datetime="2013-05-07T13:30:00.000Z" itemprop="datePublished">2013-05-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Logger 2.0.0 - Enable Session Specific Logging
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><em>In preparation for the release of <a href="https://github.com/tmuth/Logger---A-PL-SQL-Logging-Utility" target="_blank" rel="external">Logger 2.0.0 </a>I’ve decided to write a few posts highlighting some of the new features.</em></p>
<p>One of the most common feature request for Logger has been the ability to enable logging (or setting the logger level) for a given session. This post covers how to set and unset session specific logging.</p>
<p><strong>Logger Levels</strong></p>
<p>There is no “on/off” switch for Logger. Instead, like most other logging and code instrumentation tools, it supports <a href="https://github.com/tmuth/Logger---A-PL-SQL-Logging-Utility#logger-levels" target="_blank" rel="external">multiple levels</a>. This allows developers to turn up and down the amount of logging. In most development systems the logging level is set to debug mode and in most production instances it’s set to error mode. This means that in production only items that are explicitly logged using <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">logger.log_error</span> will be stored. For more information read the <a href="https://github.com/tmuth/Logger---A-PL-SQL-Logging-Utility#configuration" target="_blank" rel="external">configuration</a> section of the documentation.</p>
<p><strong>Setting the Logger Level</strong></p>
<p>Prior to Logger 2.0.0 you could only configure the logging level for the entire schema. To following code snippet highlights this: <pre class="brush: sql;"><br>exec logger.set_level(‘DEBUG’);</pre></p>
<p>begin<br>  – All of these will be logged<br>  logger.log(‘Logging log level’);<br>  logger.log_information(‘Logging information level’);<br>  logger.log_warning(‘Logging warning level’);<br>  logger.log_error(‘Logging error level’);<br>end;<br>/</p>
<p>exec logger.set_level(‘WARNING’);</p>
<p>begin<br>  logger.log(‘Logging log level’); – Not stored<br>  logger.log_information(‘Logging information level’); – Not stored<br>  logger.log_warning(‘Logging warning level’); – Stored<br>  logger.log_error(‘Logging error level’); – Stored<br>end;<br>/<br>What happens in production systems when a user is experiencing some issues and you want to see all their logging information? The only way to do this before was to set the logging level to debug mode and the entire schema would be affected. This could slow down all the applications in the schema which is an undesired affect. </p>
<p><strong>Setting by Session</strong><br><strong>&nbsp;</strong><br>The term “session” is a bit misleading. Since more most Oracle applications are stateless it’s not realistic to enable logging for a specific Oracle session (SID). Instead Logger uses the client_identifier (also referred to as client_id). Client identifiers can easily be configured and are commonly used in stateless applications. For example, APEX sets the client_id with: <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">:APP_USER || ‘:’ || :APP_SESSION</span></p>
<p>The following example demonstrates how to enable “session” specific logging in Logger: <pre class="brush: sql;"><br>– Connection 1<br>exec logger.set_level (‘ERROR’);</pre></p>
<p>begin<br>  logger.log(‘will not get stored’);<br>  logger.log_error(‘will get stored’);<br>end;<br>/</p>
<p>select id, logger_level, text, client_identifier<br>from logger_logs_5_min;</p>
<p>  ID LOGGER_LEVEL TEXT                 CLIENT_IDENTIFIER</p>
<hr>
<p>  13            2 will get stored      </p>
<p>– Connection 2 (i.e a different connection)<br>exec dbms_session.set_identifier(‘logger_demo’);</p>
<p>exec logger.set_level(‘DEBUG’, sys_context(‘userenv’,’client_identifier’));<br>– Or could have used: logger.set_level(‘DEBUG’, ‘logger_demo’);</p>
<p>begin<br>  logger.log(‘will get stored’);<br>  logger.log_error(‘will get stored’);<br>end;<br>/</p>
<p>select id, logger_level, text, client_identifier<br>from logger_logs_5_min;</p>
<p>  ID LOGGER_LEVEL TEXT                 CLIENT_IDENTIFIER</p>
<hr>
<p>  14           16 will get stored      logger_demo<br>  15            2 will get stored      logger_demo<br><strong>Unsettting by Session</strong></p>
<p>When setting a session specific logging level, Logger will apply an expiration time to it. By default&nbsp; this is set to 12 hours but can be configured by setting the <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">logger_prefs</span> value:&nbsp; <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">PREF_BY_CLIENT_ID_EXPIRE_HOURS</span>&nbsp; You can also pass in the time using the parameter <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">p_client_id_expire_hours</span>. If you don’t explicitly unset a specific session then logger will automatically clean up these sessions after the desired time.</p>
<p>They’re three ways to explicitly unset session specific logging: <pre class="brush: sql;"><br>– Unset by specific client_id<br>exec logger.unset_client_level(p_client_id =&gt; ‘logger_demo’);</pre></p>
<p>– Unset all sessions that have expired<br>exec logger.unset_client_level;</p>
<p>– Unset all sessions (regardless of expiration time)<br>exec logger.unset_client_level_all<br><strong>Summary</strong></p>
<p>By setting session specific logging you can allow for an individual connection to have logging enabled without affecting the rest of the applications in the schema.</p>
<hr>
<p>They’re some other interesting features in session specific logging that I wasn’t able to fit this article. In the <a href="http://www.talkapex.com/2013/05/logger-200-session-specific-logging.html">next article</a> I’ll discuss these features.<br><strong>&nbsp;</strong></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.talkapex.com/2013/05/logger-200-enable-session-specific/" data-id="cizc1wf3a007uc3n9bum71nlg" class="article-share-link">Share</a>
      
        <a href="http://www.talkapex.com/2013/05/logger-200-enable-session-specific/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/logger/">logger</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2013/05/logger-200-session-specific-logging/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Logger 2.0.0 - Session Specific Logging - Advanced Features
        
      </div>
    </a>
  
  
    <a href="/2013/05/logger-200-logging-parameters/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Logger 2.0.0 - Logging Parameters</div>
    </a>
  
</nav>

  
</article>


<section id="comments">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>
</section>
        
          <aside id="sidebar">
  
    <div class="widget-wrap">
  <h3 class="widget-title">Martin Giffy D'Souza</h3>
  <div class="widget aced">
    <img src="/images/profile-martin.jpg" alt="">&nbsp;&nbsp;<a href="http://goo.gl/IOHra"><img src="/images/aced-logo.gif" alt="" /></a>
  </div>
</div>

  
    <div class="widget-wrap">
  <h3 class="widget-title">Links</h3>
  <div class="widget">
    <ul>
      <li><a id="sidebar-link-oos" href="OraOpenSource.com" target="_blank">OraOpenSource</a></li>
      <li><a id="sidebar-link-podcast" href="http://apex.press/talkshow" target="_blank">Oracle APEX Podcast</a></li>
      <li><a id="sidebar-link-rss" href="/atom.xml">RSS Feed</a></li>
      <li><a id="sidebar-link-email" href="mailto:martin@talkapex.com">Email me</a></li>
      <li><a id="sidebar-link-twitter" href="https://twitter.com/martindsouza" target="_blank">Twitter</a></li>
      <li><a id="sidebar-link-linkedin" href="http://www.linkedin.com/in/martingiffydsouza" target="_blank">LinkedIn</a></li>
    </ul>
  </div>
</div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/12c/">12c</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/apex/">apex</a><span class="tag-list-count">131</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/apex-5/">apex-5</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/apex-plugin/">apex-plugin</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/best-practice/">best-practice</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/checkbox/">checkbox</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/">css</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dynamic-actions/">dynamic-actions</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iot/">iot</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/">javascript</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jquery/">jquery</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kscope/">kscope</a><span class="tag-list-count">20</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/logger/">logger</a><span class="tag-list-count">20</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/macos/">macos</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/meta/">meta</a><span class="tag-list-count">19</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/odtug/">odtug</a><span class="tag-list-count">23</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/oos-utils/">oos-utils</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/oow/">oow</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/open-source/">open-source</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/oracle/">oracle</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/plsql/">plsql</a><span class="tag-list-count">19</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/security/">security</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sql/">sql</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sqlcl/">sqlcl</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tabular-form/">tabular-form</a><span class="tag-list-count">3</span></li></ul>
    </div>
  </div>


  
    <div class="widget-wrap">
  <h3 class="widget-title">Books</h3>
  <div class="widget">
    <table class="books">
      <tbody>
        <tr>
          <td><img src="/images/book-apex-plugins.jpeg" alt=""></td>
          <td><img src="/images/book-expert-apex-5.jpeg" alt=""></td>
        </tr>
        <tr>
          <td><a href="http://goo.gl/089zi">APEX Plugins</a></td>
          <td><a href="http://bit.ly/talkapex-book-expert-2nd-ed">Expert APEX 5</a></td>
        </tr>
        <tr>
          <td><img src="/images/book-begin-apex-4.jpeg" alt=""></td>
          <td><img src="/images/book-expert-apex-4.jpeg" alt=""></td>
        </tr>
        <tr>
          <td><a href="http://goo.gl/NxHoF">Beginning APEX 4</a></td>
          <td><a href="http://goo.gl/tXm3P">Expert APEX 4</a></td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/">2017</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/">2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/">2015</a><span class="archive-list-count">35</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/">2014</a><span class="archive-list-count">17</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/">2013</a><span class="archive-list-count">35</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/">2012</a><span class="archive-list-count">25</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/">2011</a><span class="archive-list-count">27</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/">2010</a><span class="archive-list-count">40</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/">2009</a><span class="archive-list-count">51</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/">2008</a><span class="archive-list-count">5</span></li></ul>
    </div>
  </div>


  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 Martin Giffy D&#39;Souza<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    
<script>
  var disqus_shortname = 'talkapex';
  
  var disqus_url = 'http://www.talkapex.com/2013/05/logger-200-enable-session-specific/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-8016477-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->




  </div>
</body>
</html>