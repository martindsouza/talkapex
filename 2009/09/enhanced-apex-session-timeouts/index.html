<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Enhanced APEX Session Timeouts | TalkApex</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="APEX has built in logic to set the lifetime of a session. To configure this option go to Shared Components &#x2F; Edit Security Attributes &#x2F; Maximum Session Idle Time in Seconds and set the time in seconds">
<meta property="og:type" content="article">
<meta property="og:title" content="Enhanced APEX Session Timeouts">
<meta property="og:url" content="http://www.talkapex.com/2009/09/enhanced-apex-session-timeouts/index.html">
<meta property="og:site_name" content="TalkApex">
<meta property="og:description" content="APEX has built in logic to set the lifetime of a session. To configure this option go to Shared Components &#x2F; Edit Security Attributes &#x2F; Maximum Session Idle Time in Seconds and set the time in seconds">
<meta property="og:image" content="http://2.bp.blogspot.com/_33EF80fk9sM/SrZjdKYpklI/AAAAAAAADqs/GPxkwVTc1Ow/s400/apex_session_timeout_ir_ex.PNG">
<meta property="og:image" content="http://3.bp.blogspot.com/_33EF80fk9sM/SrZjlS8xbPI/AAAAAAAADq0/GlyvVtBhr2Y/s400/ac_session_timeout.PNG">
<meta property="og:image" content="http://2.bp.blogspot.com/_33EF80fk9sM/SrZkYgKz7_I/AAAAAAAADrM/U8se-ZIHyIw/s400/apex_session_extend.PNG">
<meta property="og:image" content="http://2.bp.blogspot.com/_33EF80fk9sM/SrZj0SLARDI/AAAAAAAADrE/0ywt1wBNUNA/s400/apex_session_ended.PNG">
<meta property="article:published_time" content="2009-09-21T15:00:00.000Z">
<meta property="article:modified_time" content="2018-04-13T11:22:46.000Z">
<meta property="article:author" content="Martin Giffy D&#39;Souza">
<meta property="article:tag" content="apex">
<meta property="article:tag" content="security">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://2.bp.blogspot.com/_33EF80fk9sM/SrZjdKYpklI/AAAAAAAADqs/GPxkwVTc1Ow/s400/apex_session_timeout_ir_ex.PNG">
<meta name="twitter:creator" content="@martindsouza">
  
    <link rel="alternate" href="/atom.xml" title="TalkApex" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 4.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <!-- <div id="banner"></div> -->
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <img src="/images/header-banner.png" alt="" />
      <!-- <h1 id="logo-wrap">
        <a href="/" id="logo">TalkApex</a>
      </h1> -->
      <!-- 
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Martin Giffy D&#39;Souza on Oracle APEX</a>
        </h2>
       -->
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://www.talkapex.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-enhanced-apex-session-timeouts" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2009/09/enhanced-apex-session-timeouts/" class="article-date">
  <time datetime="2009-09-21T15:00:00.000Z" itemprop="datePublished">2009-09-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Enhanced APEX Session Timeouts
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>APEX has built in logic to set the lifetime of a session. <em>To configure this option go to Shared Components / Edit Security Attributes / Maximum Session Idle Time in Seconds and set the time in seconds.</em></p>
<p>This essentially terminates the user’s session in the database and the next time they submit the page they’ll be redirected to the login screen. <strong><em>The user will only know that they are logged out once they submit the page</em></strong>. If you have an Interactive Report (IR), or use Partial Page Refresh (PPR) the users won’t know they’re logged out. Instead it will look as though the report is still trying to load.</p>
<p><a href="http://2.bp.blogspot.com/_33EF80fk9sM/SrZjdKYpklI/AAAAAAAADqs/GPxkwVTc1Ow/s1600-h/apex_session_timeout_ir_ex.PNG" target="_blank" rel="noopener"><img src="http://2.bp.blogspot.com/_33EF80fk9sM/SrZjdKYpklI/AAAAAAAADqs/GPxkwVTc1Ow/s400/apex_session_timeout_ir_ex.PNG" alt=""></a><br>Another situation that may happen is that the user is filling out a long form on your page, their session timesout, then they click “submit”. They’ll be redirected to the login page and they’ll lose all the information that they entered.</p>
<p>What if a user wants to extend their session? i.e. they haven’t done anything to the page but would like a warning message before we automatically log them out? Or they are entering a log form and don’t want to be logged out? I got this idea from the <a href="http://www.aircanada.com/" target="_blank" rel="noopener">Air Canada</a> web site when I was booking tickets. I really liked the fact that they let me know that they were to end my session, and gave me the option to extend my session.</p>
<p><a href="http://3.bp.blogspot.com/_33EF80fk9sM/SrZjlS8xbPI/AAAAAAAADq0/GlyvVtBhr2Y/s1600-h/ac_session_timeout.PNG" target="_blank" rel="noopener"><img src="http://3.bp.blogspot.com/_33EF80fk9sM/SrZjlS8xbPI/AAAAAAAADq0/GlyvVtBhr2Y/s400/ac_session_timeout.PNG" alt=""></a><br>The following solution will allow you to use APEX’s session timeout and resolve the issues listed above. You can view the demo here: <a href="http://apex.oracle.com/pls/otn/f?p=20195:2600" target="_blank" rel="noopener">http://apex.oracle.com/pls/otn/f?p=20195:2600</a></p>
<p><em>Please note that since the demo page is set to public you can refresh after the session is supposed to have timedout and it will still work. If you set the Idle Session in APEX, this will work for pages that require authentication.</em></p>
<p><a href="http://2.bp.blogspot.com/_33EF80fk9sM/SrZkYgKz7_I/AAAAAAAADrM/U8se-ZIHyIw/s1600-h/apex_session_extend.PNG" target="_blank" rel="noopener"><img src="http://2.bp.blogspot.com/_33EF80fk9sM/SrZkYgKz7_I/AAAAAAAADrM/U8se-ZIHyIw/s400/apex_session_extend.PNG" alt=""></a><br><a href="http://2.bp.blogspot.com/_33EF80fk9sM/SrZj0SLARDI/AAAAAAAADrE/0ywt1wBNUNA/s1600-h/apex_session_ended.PNG" target="_blank" rel="noopener"><img src="http://2.bp.blogspot.com/_33EF80fk9sM/SrZj0SLARDI/AAAAAAAADrE/0ywt1wBNUNA/s400/apex_session_ended.PNG" alt=""></a><br>Here’s a high level overview of what this solution does:</p>
<ul>
<li>Start a timer (pingApexSession) that will constantly “ping” (therefore refresh) your APEX session every X seconds.</li>
<li>Start a timer (idleTimer) to detect movement on the page.</li>
<li>If the idleTimer times out, give the user the option to extend session</li>
<li>If the user does not extend their session, terminate their session<br><em>I haven’t put this code into a production application yet. As I mention below, I plan to make a jQuery plugin for this, so if you please send me any feedback that would be useful fur the plugin.</em></li>
</ul>
<p>This solution uses <a href="http://jquery.com" target="_blank" rel="noopener">jQuery</a> and the following plugins:</p>
<ul>
<li><a href="http://www.ericmmartin.com/projects/simplemodal/" target="_blank" rel="noopener">Simple Modal</a></li>
<li><a href="http://paulirish.com/2009/jquery-idletimer-plugin/" target="_blank" rel="noopener">jQuery idleTimer</a></li>
<li><a href="http://tylermuth.wordpress.com/2009/08/19/japex-a-jquery-plugin-for-apex/" target="_blank" rel="noopener">jApex</a></li>
<li><a href="http://keith-wood.name/countdown.html" target="_blank" rel="noopener">jQuery Countdown</a></li>
</ul>
<h2 id="Create-Application-Process-AP-NULL"><a href="#Create-Application-Process-AP-NULL" class="headerlink" title="Create Application Process: AP_NULL"></a>Create Application Process: AP_NULL</h2><ul>
<li>Process Point: On Demand</li>
<li>Name: AP_NULL</li>
<li>Type: PL/SQL Anonymous Block</li>
<li>Process Text: NULL;</li>
</ul>
<h2 id="Create-Application-Process-AP-LOGOUT"><a href="#Create-Application-Process-AP-LOGOUT" class="headerlink" title="Create Application Process: AP_LOGOUT"></a>Create Application Process: AP_LOGOUT</h2><ul>
<li>Process Point: On Demand</li>
<li>Name: AP_LOGOUT</li>
<li>Type: PL/SQL Anonymous Block</li>
<li>Process Text:</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">begin</span></span><br><span class="line">  apex_custom_auth.logout(</span><br><span class="line">    p_this_app =&gt; :app_id,</span><br><span class="line">    p_next_app_page_sess =&gt; :app_id || <span class="string">':1'</span>);</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>

<h2 id="Create-Region-“Extend-Session”-on-Page-0"><a href="#Create-Region-“Extend-Session”-on-Page-0" class="headerlink" title="Create Region: “Extend Session” on Page 0"></a>Create Region: “Extend Session” on Page 0</h2><ul>
<li>Title: Extend Session</li>
<li>Type: HTML Text</li>
<li>Static ID: P0_REG_EXTEND_SESSION</li>
<li>Region Attributes: style=”display:none”</li>
<li>Region Source: <code>Your session will timeout in: &lt;span id=&quot;timeoutCountdownDisplay&quot; style=&quot;font-weight:bold&quot;&gt;&lt;/span&gt;</code><br><em>You can put whatever message you want. Just make sure the span tags exist for the countdown timer.</em></li>
</ul>
<h2 id="Create-Button-“Extend-Session”-on-Page-0"><a href="#Create-Button-“Extend-Session”-on-Page-0" class="headerlink" title="Create Button: “Extend Session” on Page 0"></a>Create Button: “Extend Session” on Page 0</h2><ul>
<li>Button Name: EXTEND_SESSION</li>
<li>Text Label: Extend Session</li>
<li>Display in Region: Extend Session</li>
<li>Target is a: URL</li>
<li>URL Target: javascript:gTimeout.timers.killSession.liveFn();</li>
</ul>
<h2 id="Create-Region-“Session-Timedout”-on-Page-0"><a href="#Create-Region-“Session-Timedout”-on-Page-0" class="headerlink" title="Create Region: “Session Timedout” on Page 0"></a>Create Region: “Session Timedout” on Page 0</h2><ul>
<li>Title: Session Ended</li>
<li>Type: HTML Text</li>
<li>Static ID: <code>P0_REG_SESSION_ENDED</code></li>
<li>Region Attributes: <code>style=&quot;display:none&quot;</code></li>
<li>Region Source: Your session has ended. Please login.</li>
</ul>
<h2 id="Create-Button-“Login”-on-Page-0"><a href="#Create-Button-“Login”-on-Page-0" class="headerlink" title="Create Button: “Login” on Page 0"></a>Create Button: “Login” on Page 0</h2><ul>
<li>Button Name: LOGIN</li>
<li>Text Label: Login</li>
<li>Display in Region: Session Ended</li>
<li>Target is a: Page in this Application</li>
<li>Page: 1</li>
</ul>
<h2 id="Create-Region-“JavaScript-Session-Timeout”-on-Page-0"><a href="#Create-Region-“JavaScript-Session-Timeout”-on-Page-0" class="headerlink" title="Create Region: “JavaScript - Session Timeout” on Page 0"></a>Create Region: “JavaScript - Session Timeout” on Page 0</h2><ul>
<li>Title: JavaScript - Session Timeout</li>
<li>Type: HTML Text</li>
<li>Template: No Template</li>
<li>Region Source:</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"#APP_IMAGES#jquery-1.3.2.min.js"</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"#APP_IMAGES#jquery.simplemodal-1.3.min.js"</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"#APP_IMAGES#idle-timer-0.7.080609.js"</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"#APP_IMAGES#jquery.jApex.0.9.2.js"</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"#APP_IMAGES#jquery.countdown-1.5.3.js"</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="actionscript">  <span class="comment">//*** Insert script from below ***/</span></span></span><br><span class="line"><span class="actionscript">  <span class="comment">//Removed for display purposes</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><em>You’ll need to upload the JS files beforehand. Please see the list above to obtain the files.</em></p>
<p>Here’s the script to put into the region above. I separated them for display purposes.</p>
<p>I probably should have created this as a jQuery plugin. I may convert it later on.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gTimeout = &#123;</span><br><span class="line">  <span class="comment">//debug</span></span><br><span class="line">  debug: <span class="literal">false</span>, <span class="comment">//Set to True to turn on debugging</span></span><br><span class="line">  debugFn: <span class="function"><span class="keyword">function</span>(<span class="params">pMsg</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (gTimeout.debug)&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(pMsg);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, <span class="comment">//debug</span></span><br><span class="line">  modalRegions: &#123;</span><br><span class="line">    <span class="comment">//Region that contains the "Extend Session" information</span></span><br><span class="line">    extendSession: &#123;</span><br><span class="line">      id: <span class="string">'P0_REG_EXTEND_SESSION'</span>,</span><br><span class="line">      backgroundColor: <span class="string">'#CCC'</span>,</span><br><span class="line">      opacity: <span class="number">70</span>,</span><br><span class="line">      openFn: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        gTimeout.debugFn(<span class="string">'gTimeout.modalRegions.extendSession.openFn'</span>);</span><br><span class="line">        <span class="comment">// Start display timeout counter</span></span><br><span class="line">        $(<span class="string">'#timeoutCountdownDisplay'</span>).countdown(<span class="string">'destroy'</span>);</span><br><span class="line">        $(<span class="string">'#timeoutCountdownDisplay'</span>).countdown(&#123;</span><br><span class="line">          until: <span class="string">'+'</span> + (gTimeout.timers.killSession.time / <span class="number">1000</span>),</span><br><span class="line">          compact: <span class="literal">true</span>,</span><br><span class="line">          format: <span class="string">'M:S'</span></span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">// Load modal box to give user option to extend session</span></span><br><span class="line">        $(<span class="string">'#'</span> + gTimeout.modalRegions.extendSession.id).modal(&#123;</span><br><span class="line">          overlayCss: &#123;<span class="attr">backgroundColor</span>: <span class="keyword">this</span>.backgroundColor&#125;,</span><br><span class="line">          opacity: <span class="keyword">this</span>.opacity</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;, <span class="comment">//openFn</span></span><br><span class="line">      closeFn: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        gTimeout.debugFn(<span class="string">'gTimeout.modalRegions.extendSession.closeFn'</span>);</span><br><span class="line">        $.modal.close();</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;<span class="comment">//closeFn</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//Region that will be displayed if the user does not extend thier session</span></span><br><span class="line">    sessionEnded: &#123;</span><br><span class="line">      id: <span class="string">'P0_REG_SESSION_ENDED'</span>,</span><br><span class="line">      backgroundColor: <span class="string">'black'</span>,</span><br><span class="line">      opacity: <span class="number">70</span>,</span><br><span class="line">      openFn: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        gTimeout.debugFn(<span class="string">'gTimeout.modalRegions.sessionEnded.openFn'</span>);</span><br><span class="line">        <span class="comment">// Close Extend Sessios modal window</span></span><br><span class="line">        gTimeout.modalRegions.extendSession.closeFn();</span><br><span class="line">        <span class="comment">// Open Logout modal window</span></span><br><span class="line">        $(<span class="string">'#'</span> + gTimeout.modalRegions.sessionEnded.id).modal(&#123;</span><br><span class="line">          overlayCss: &#123;<span class="attr">backgroundColor</span>: <span class="keyword">this</span>.backgroundColor&#125;,</span><br><span class="line">          opacity: <span class="keyword">this</span>.opacity</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;<span class="comment">// openFn</span></span><br><span class="line">    &#125;<span class="comment">//sessionEnded</span></span><br><span class="line">  &#125;,<span class="comment">//modalRegions</span></span><br><span class="line">  timers: &#123;</span><br><span class="line">    <span class="comment">//Ping APEX Session timer will update the database session timer</span></span><br><span class="line">    pingApexSession: &#123;</span><br><span class="line">      id: <span class="number">-1</span>,</span><br><span class="line">      time: <span class="number">5000</span>, <span class="comment">//Time to keep database session alive. This should be really close to the APEX idle time</span></span><br><span class="line">      loadFn: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        gTimeout.debugFn(<span class="string">'gTimeout.timers.pingApexSession.loadFn:'</span>);</span><br><span class="line">        <span class="keyword">this</span>.id = setTimeout(<span class="string">'gTimeout.timers.pingApexSession.fn();'</span>, <span class="keyword">this</span>.time);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;,</span><br><span class="line">      unloadFn: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        gTimeout.debugFn(<span class="string">'gTimeout.timers.pingApexSession.unloadFn:'</span>);</span><br><span class="line">        clearTimeout(<span class="keyword">this</span>.id);</span><br><span class="line">        <span class="keyword">this</span>.id = <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;,<span class="comment">//unloadFn</span></span><br><span class="line">      fn: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        gTimeout.debugFn(<span class="string">'gTimeout.timers.pingApexSession.fn: Extending APEX Session'</span>);</span><br><span class="line">        jQuery.jApex.ajax(&#123;</span><br><span class="line">          appProcess: <span class="string">'AP_NULL'</span>,</span><br><span class="line">          success: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;,</span><br><span class="line">          <span class="keyword">async</span>: <span class="literal">true</span></span><br><span class="line">        &#125;);</span><br><span class="line">        gTimeout.timers.pingApexSession.loadFn();</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;<span class="comment">//fn</span></span><br><span class="line">    &#125;,<span class="comment">//pingApexSessions</span></span><br><span class="line">    <span class="comment">//Kill current session. This is called when the user gets the option to extend their session</span></span><br><span class="line">    killSession: &#123;</span><br><span class="line">      id: <span class="number">-1</span>,</span><br><span class="line">      time: <span class="number">5000</span>, <span class="comment">// Time to kill the APEX session once launched. Should only be run when extend session popup box is loaded</span></span><br><span class="line">      loadFn: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        gTimeout.debugFn(<span class="string">'gTimeout.timers.killSession.loadFn:'</span>);</span><br><span class="line">        <span class="keyword">this</span>.id = setTimeout(<span class="string">'gTimeout.timers.killSession.killFn();'</span>, <span class="keyword">this</span>.time);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;,</span><br><span class="line">      unloadFn: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        gTimeout.debugFn(<span class="string">'gTimeout.timers.killSession.unloadFn: '</span>);</span><br><span class="line">        clearTimeout(<span class="keyword">this</span>.id);</span><br><span class="line">        <span class="keyword">this</span>.id = <span class="number">-1</span>;</span><br><span class="line">        gTimeout.modalRegions.extendSession.closeFn(); <span class="comment">// Close extendSession Modal</span></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;,</span><br><span class="line">      killFn: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        gTimeout.debugFn(<span class="string">'gTimeout.timers.killSession.killFn: Killing APEX Session'</span>);</span><br><span class="line">        <span class="comment">// Open Logout modal window</span></span><br><span class="line">        gTimeout.modalRegions.sessionEnded.openFn();</span><br><span class="line">        <span class="comment">// Stop ping Apex session</span></span><br><span class="line">        gTimeout.timers.pingApexSession.unloadFn();</span><br><span class="line">        <span class="comment">// Logout APEX session</span></span><br><span class="line">        jQuery.jApex.ajax(&#123;</span><br><span class="line">          appProcess: <span class="string">'AP_LOGOUT'</span>,</span><br><span class="line">          success: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;,</span><br><span class="line">          <span class="keyword">async</span>: <span class="literal">true</span></span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// Prevents the session from being killed. We should be in a about to kill state now</span></span><br><span class="line">      liveFn: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        gTimeout.debugFn(<span class="string">'gTimeout.timers.killSession.liveFn: '</span>);</span><br><span class="line">        <span class="comment">//Check that we're about to be killed</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.id == <span class="number">-1</span>)&#123;</span><br><span class="line">          alert(<span class="string">'Session is not marked to be killed'</span>);</span><br><span class="line">          <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Stop the kill timer</span></span><br><span class="line">        <span class="keyword">this</span>.unloadFn();</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;<span class="comment">//liveFn</span></span><br><span class="line">    &#125;,<span class="comment">//killSession</span></span><br><span class="line">    <span class="comment">// Timer for user movement time</span></span><br><span class="line">    idle:&#123;</span><br><span class="line">      time: <span class="number">5000</span>, <span class="comment">// Time to load the "Extend Session" popup box</span></span><br><span class="line">      loadFn: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        gTimeout.debugFn(<span class="string">'gTimeout.timers.idle.loadFn:'</span>);</span><br><span class="line">        $.idleTimer(<span class="keyword">this</span>.time);</span><br><span class="line">        $(<span class="built_in">document</span>).bind(<span class="string">"idle.idleTimer"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;gTimeout.timers.idle.idleFn();&#125;);</span><br><span class="line">        <span class="comment">// Trigger countdown timer</span></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;,</span><br><span class="line">      idleFn: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        gTimeout.debugFn(<span class="string">'gTimeout.timers.idle.idleFn:'</span>);</span><br><span class="line">        <span class="comment">// Load modal box to give user option to extend session</span></span><br><span class="line">        gTimeout.modalRegions.extendSession.openFn();</span><br><span class="line">        <span class="comment">// Only load if we're not in a kill state</span></span><br><span class="line">        <span class="keyword">if</span> (gTimeout.timers.killSession.id == <span class="number">-1</span>)&#123;</span><br><span class="line">          gTimeout.timers.killSession.loadFn();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125; <span class="comment">//idle Fn     </span></span><br><span class="line">    &#125; <span class="comment">// idle</span></span><br><span class="line">  &#125;,<span class="comment">//timers</span></span><br><span class="line">  loadFn: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    gTimeout.timers.pingApexSession.loadFn(); <span class="comment">// Keep database sessions alive</span></span><br><span class="line">    gTimeout.timers.idle.loadFn(); <span class="comment">// Turn on user idle timer</span></span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;<span class="comment">//loadFn</span></span><br><span class="line"></span><br><span class="line">&#125;;<span class="comment">//gTimeout</span></span><br><span class="line"></span><br><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="comment">// Set Parameters</span></span><br><span class="line">  gTimeout.timers.pingApexSession.time = <span class="number">5</span> * <span class="number">1000</span>; <span class="comment">// Refresh APEX session every 5 seconds. This should be really close to your apex session timeout values</span></span><br><span class="line">  gTimeout.timers.idle.time = <span class="number">10</span> * <span class="number">1000</span>; <span class="comment">// 10 seconds of inactivity will trigger this window</span></span><br><span class="line">  gTimeout.timers.killSession.time = <span class="number">10</span> * <span class="number">1000</span>; <span class="comment">// Once the warning message pops up, user has 10 seconds to extend their session</span></span><br><span class="line">  <span class="comment">// Configure Modal windows (not required)</span></span><br><span class="line">  gTimeout.modalRegions.extendSession.backgroundColor = <span class="string">'#CCC'</span>;</span><br><span class="line"></span><br><span class="line">  gTimeout.loadFn();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.talkapex.com/2009/09/enhanced-apex-session-timeouts/" data-id="ck7mtpuej00bq01qje6vf7n2e" class="article-share-link">Share</a>
      
        <a href="http://www.talkapex.com/2009/09/enhanced-apex-session-timeouts/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/apex/" rel="tag">apex</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/security/" rel="tag">security</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2009/09/apex-developer-competition-2009-top-12/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          APEX Developer Competition 2009 - Top 12
        
      </div>
    </a>
  
  
    <a href="/2009/09/redirects-for-apex-tabs-instead-of-page/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Redirects for APEX Tabs instead of page submits</div>
    </a>
  
</nav>

  
</article>


<section id="comments">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript" target="_blank" rel="noopener">comments powered by Disqus.</a></noscript>
  </div>
</section>
</section>
        
          <aside id="sidebar">
  
    <div class="widget-wrap">
  <h3 class="widget-title">Martin Giffy D'Souza</h3>
  <div class="widget aced">
    <img src="/images/profile-martin.jpg" alt="">&nbsp;&nbsp;<a href="http://goo.gl/IOHra" target="_blank" rel="noopener"><img src="/images/aced-logo.gif" alt="" /></a>
  </div>
</div>

  
    <div class="widget-wrap">
  <h3 class="widget-title">Links</h3>
  <div class="widget">
    <ul>
      <li><a id="sidebar-link-oos" href="https://github.com/oraopensource/" target="_blank">OraOpenSource</a></li>
      <li><a id="sidebar-link-podcast" href="http://apex.press/talkshow" target="_blank">Oracle APEX Podcast</a></li>
      <li><a id="sidebar-link-rss" href="/atom.xml">RSS Feed</a></li>
      <li><a id="sidebar-link-email" href="mailto:martin@talkapex.com">Email me</a></li>
      <li><a id="sidebar-link-twitter" href="https://twitter.com/martindsouza" target="_blank">Twitter</a></li>
      <li><a id="sidebar-link-linkedin" href="http://www.linkedin.com/in/martingiffydsouza" target="_blank">LinkedIn</a></li>
    </ul>
  </div>
</div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/" rel="tag">Docker</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/apex/" rel="tag">apex</a><span class="tag-list-count">155</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/apex-19/" rel="tag">apex-19</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/apex-5/" rel="tag">apex-5</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/apex-5-1/" rel="tag">apex-5.1</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/apex-plugin/" rel="tag">apex-plugin</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/best-practice/" rel="tag">best-practice</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/checkbox/" rel="tag">checkbox</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/chrome/" rel="tag">chrome</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/" rel="tag">css</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/design/" rel="tag">design</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/" rel="tag">docker</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dynamic-actions/" rel="tag">dynamic-actions</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/" rel="tag">git</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/interactive-report/" rel="tag">interactive-report</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iot/" rel="tag">iot</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/" rel="tag">javascript</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jquery/" rel="tag">jquery</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kscope/" rel="tag">kscope</a><span class="tag-list-count">21</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/logger/" rel="tag">logger</a><span class="tag-list-count">20</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/macos/" rel="tag">macos</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/meta/" rel="tag">meta</a><span class="tag-list-count">19</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/odtug/" rel="tag">odtug</a><span class="tag-list-count">25</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/oos-utils/" rel="tag">oos-utils</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/oow/" rel="tag">oow</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/open-source/" rel="tag">open-source</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/oracle/" rel="tag">oracle</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/oracle-12c/" rel="tag">oracle-12c</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/oracle-18c/" rel="tag">oracle-18c</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ords/" rel="tag">ords</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/plsql/" rel="tag">plsql</a><span class="tag-list-count">28</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/security/" rel="tag">security</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sql/" rel="tag">sql</a><span class="tag-list-count">18</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sql-data-modeler/" rel="tag">sql-data-modeler</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sql-developer/" rel="tag">sql-developer</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sqlcl/" rel="tag">sqlcl</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sqlplus/" rel="tag">sqlplus</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tabular-form/" rel="tag">tabular-form</a><span class="tag-list-count">3</span></li></ul>
    </div>
  </div>


  
    <div class="widget-wrap">
  <h3 class="widget-title">Books</h3>
  <div class="widget">
    <table class="books">
      <tbody>
        <tr>
          <td><img src="/images/book-apex-plugins.jpeg" alt=""></td>
          <td><img src="/images/book-expert-apex-5.jpeg" alt=""></td>
        </tr>
        <tr>
          <td><a href="http://goo.gl/089zi" target="_blank" rel="noopener">APEX Plugins</a></td>
          <td><a href="http://bit.ly/talkapex-book-expert-2nd-ed" target="_blank" rel="noopener">Expert APEX 5</a></td>
        </tr>
        <tr>
          <td><img src="/images/book-begin-apex-4.jpeg" alt=""></td>
          <td><img src="/images/book-expert-apex-4.jpeg" alt=""></td>
        </tr>
        <tr>
          <td><a href="http://goo.gl/NxHoF" target="_blank" rel="noopener">Beginning APEX 4</a></td>
          <td><a href="http://goo.gl/tXm3P" target="_blank" rel="noopener">Expert APEX 4</a></td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/">2020</a><span class="archive-list-count">14</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/">2019</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/">2018</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/">2017</a><span class="archive-list-count">22</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/">2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/">2015</a><span class="archive-list-count">35</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/">2014</a><span class="archive-list-count">17</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/">2013</a><span class="archive-list-count">35</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/">2012</a><span class="archive-list-count">25</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/">2011</a><span class="archive-list-count">27</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/">2010</a><span class="archive-list-count">40</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/">2009</a><span class="archive-list-count">51</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/">2008</a><span class="archive-list-count">5</span></li></ul>
    </div>
  </div>


  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 Martin Giffy D&#39;Souza<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    
<script>
  var disqus_shortname = 'talkapex';
  
  var disqus_url = 'http://www.talkapex.com/2009/09/enhanced-apex-session-timeouts/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>


<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-8016477-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->




  </div>
</body>
</html>