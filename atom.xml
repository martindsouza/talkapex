<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>TalkApex</title>
  
  <subtitle>Martin Giffy D&#39;Souza on Oracle APEX</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://www.talkapex.com/"/>
  <updated>2018-07-28T13:12:40.441Z</updated>
  <id>http://www.talkapex.com/</id>
  
  <author>
    <name>Martin Giffy D&#39;Souza</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Exporting APEX Application in SQLcl with Build Status Override</title>
    <link href="http://www.talkapex.com/2018/07/exporting-apex-application-in-sqlcl-with-build-status-override/"/>
    <id>http://www.talkapex.com/2018/07/exporting-apex-application-in-sqlcl-with-build-status-override/</id>
    <published>2018-07-28T14:09:02.000Z</published>
    <updated>2018-07-28T13:12:40.441Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://www.oracle.com/technetwork/developer-tools/sqlcl/overview/index.html" target="_blank" rel="noopener">SQLcl</a> has a great feature to easily export an APEX application.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&gt; sqlcl giffy/giffy@localhost:32122/orclpdb1810.localdomain</span><br><span class="line"></span><br><span class="line">SQLcl: Release 18.2 Production on Sat Jul 28 08:12:13 2018</span><br><span class="line"></span><br><span class="line">Copyright (c) 1982, 2018, Oracle.  All rights reserved.</span><br><span class="line"></span><br><span class="line">Last Successful login time: Sat Jul 28 2018 08:12:20 -04:00</span><br><span class="line"></span><br><span class="line">Connected to:</span><br><span class="line">Oracle Database 12c Enterprise Edition Release 12.2.0.1.0 - 64bit Production</span><br><span class="line"></span><br><span class="line">SQL&gt; apex <span class="built_in">export</span> 100</span><br><span class="line">Exporting application 100  Completed at Sat Jul 28 08:13:14 EDT 2018</span><br><span class="line"></span><br><span class="line">SQL&gt;</span><br></pre></td></tr></table></figure><p>This will produce a file in the current directory called <code>f100.sql</code>.</p><p>I was recently asked how to export an application using SQLcl and set the <code>Build Status Override</code> option. This is available when manually exporting the application as shown below. This option is usually set to <code>Run Application Only</code> in production environments to prevent others from modifying the application.</p><img src="/2018/07/exporting-apex-application-in-sqlcl-with-build-status-override/Snip20180728_32.png"><p>There is no option <em>(that I know of)</em> to set the <code>Build Status Override</code> option when doing an SQLcl export. After doing a diff between manual exports with the different settings for <code>Build Status Override</code> the only change is the parameter <code>p_build_status=&gt; &#39;RUN_ONLY&#39;</code>:</p><img src="/2018/07/exporting-apex-application-in-sqlcl-with-build-status-override/Snip20180728_28.png"><p>If you want to create an application export for a run only environment (i.e. production) just run the following bash commands after the export:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">APEX_APP_ID=100</span><br><span class="line">sed -i.bu <span class="string">"s/wwv_flow_api.create_flow(/wwv_flow_api.create_flow(p_build_status=&gt; 'RUN_ONLY',/g"</span> f<span class="variable">$APEX_APP_ID</span>.sql</span><br><span class="line"></span><br><span class="line">mv f<span class="string">"<span class="variable">$APEX_APP_ID</span>"</span>.sql.bu f<span class="string">"<span class="variable">$APEX_APP_ID</span>"</span>_run_and_build.sql</span><br><span class="line">mv f<span class="string">"<span class="variable">$APEX_APP_ID</span>"</span>.sql f<span class="string">"<span class="variable">$APEX_APP_ID</span>"</span>_run_only.sql</span><br></pre></td></tr></table></figure><p>This will produce two files:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; ls -1 f*.sql</span><br><span class="line"></span><br><span class="line">f100_run_and_build.sql</span><br><span class="line">f100_run_only.sql</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://www.oracle.com/technetwork/developer-tools/sqlcl/overview/index.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;SQLcl&lt;/a&gt; has a gre
      
    
    </summary>
    
    
      <category term="apex" scheme="http://www.talkapex.com/tags/apex/"/>
    
      <category term="sqlcl" scheme="http://www.talkapex.com/tags/sqlcl/"/>
    
  </entry>
  
  <entry>
    <title>One Thing You Need To Do Before Calling apex_web_service.make_rest_request</title>
    <link href="http://www.talkapex.com/2018/05/one-thing-you-need-to-do-before-calling-apex-web-service-make-rest-request/"/>
    <id>http://www.talkapex.com/2018/05/one-thing-you-need-to-do-before-calling-apex-web-service-make-rest-request/</id>
    <published>2018-05-16T04:36:15.000Z</published>
    <updated>2018-05-16T04:52:42.210Z</updated>
    
    <content type="html"><![CDATA[<p>Can you spot the bug in the following code? (<em>Hint: it compiles and no run-time errors</em>)</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- ...</span></span><br><span class="line">l_json := apex_web_service.make_rest_request(</span><br><span class="line">  p_url =&gt; 'http://someurl.com/data',</span><br><span class="line">  p_http_method =&gt; 'GET'</span><br><span class="line">);</span><br><span class="line"><span class="comment">-- ...</span></span><br></pre></td></tr></table></figure><p>It’s not so obvious until I expose the code that preceded it. So let’s try this again (with more information). Can you spot the bug in the following code?</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- ...</span></span><br><span class="line">apex_web_service.g_request_headers(1).name := 'Authorization';</span><br><span class="line">apex_web_service.g_request_headers(1).value := 'Bearer token123';</span><br><span class="line">l_json := apex_web_service.make_rest_request(</span><br><span class="line">  p_url =&gt; 'http://a-differnt-url.com/data',</span><br><span class="line">  p_http_method =&gt; 'GET'</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">l_json := apex_web_service.make_rest_request(</span><br><span class="line">  p_url =&gt; 'http://someurl.com/data',</span><br><span class="line">  p_http_method =&gt; 'GET'</span><br><span class="line">);</span><br><span class="line"><span class="comment">-- ...</span></span><br></pre></td></tr></table></figure><p>The issue with the second call to <code>apex_web_service.make_rest_request</code> is that it will use the request headers that were set for the first call (to <code>a-differnt-url.com</code>). If the second web service (<code>someurl.com</code>) doesn’t want/need/expect that header it can cause some unintended issues and may result in an invalid RESTful call.</p><p>To get around this simply clear the request headers each time before setting them / calling <code>apex_web_service.make_rest_request</code>. You can do this by calling <code>apex_web_service.g_request_headers.delete();</code> The following code is the correct way to run the previous example:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- ...</span></span><br><span class="line">apex_web_service.g_request_headers.delete();</span><br><span class="line">apex_web_service.g_request_headers(1).name := 'Authorization';</span><br><span class="line">apex_web_service.g_request_headers(1).value := 'Bearer token123';</span><br><span class="line">l_json := apex_web_service.make_rest_request(</span><br><span class="line">  p_url =&gt; 'http://a-differnt-url.com/data',</span><br><span class="line">  p_http_method =&gt; 'GET'</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">apex_web_service.g_request_headers.delete();</span><br><span class="line">l_json := apex_web_service.make_rest_request(</span><br><span class="line">  p_url =&gt; 'http://someurl.com/data',</span><br><span class="line">  p_http_method =&gt; 'GET'</span><br><span class="line">);</span><br><span class="line"><span class="comment">-- ...</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Can you spot the bug in the following code? (&lt;em&gt;Hint: it compiles and no run-time errors&lt;/em&gt;)&lt;/p&gt;
&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;
      
    
    </summary>
    
    
      <category term="plsql" scheme="http://www.talkapex.com/tags/plsql/"/>
    
      <category term="apex" scheme="http://www.talkapex.com/tags/apex/"/>
    
  </entry>
  
  <entry>
    <title>APEX Page Item Source vs Default</title>
    <link href="http://www.talkapex.com/2018/04/apex-page-item-source-vs-default/"/>
    <id>http://www.talkapex.com/2018/04/apex-page-item-source-vs-default/</id>
    <published>2018-04-05T04:50:45.000Z</published>
    <updated>2018-05-29T14:15:06.363Z</updated>
    
    <content type="html"><![CDATA[<p>Someone recently asked me about the difference between an APEX page item’s <code>Source</code>  and <code>Default</code> attributes. I’ve always been confused about these options so I decided to further investigate them. This post will cover the differences between Source and Default along with some additional info.</p><img src="/2018/04/apex-page-item-source-vs-default/source-default.png"><h2 id="Order-of-Operations"><a href="#Order-of-Operations" class="headerlink" title="Order of Operations"></a>Order of Operations</h2><p>Page items can be set in different ways and there is an order of operations to which “setting” takes precedence:</p><ol><li><strong>Session State</strong>: What ever is in session state will always trump the page item’s Source or Default settings<em>*</em></li><li><strong>Source</strong>: Source comes next. For most people this is <code>null</code> or <code>Database Column</code> (if using <code>Automatic Row Fetch</code>)</li><li><strong>Default</strong>: If the page item is still null then Default will be used. This attribute doesn’t have as many options as Source (just <code>Static Value</code>, <code>PL/SQL Expression</code>, and <code>PL/SQL Function Body</code>)</li></ol><p><em>* The Source attribute has an option to ignore the current session state value.</em></p><h2 id="Session-State-vs-On-Screen"><a href="#Session-State-vs-On-Screen" class="headerlink" title="Session State vs On Screen"></a>Session State vs On Screen</h2><p>Neither Source or Default saves the value to session state<em>*</em>. Instead it is what is shown on screen. If Source or Default is used the value will only be saved to session state once the page is submitted.</p><p><em>* Read below as the value is temporarily used in session state for the remaining duration of the page load.</em></p><h2 id="Additional-Info"><a href="#Additional-Info" class="headerlink" title="Additional Info"></a>Additional Info</h2><h3 id="Is-Default-always-Necessary"><a href="#Is-Default-always-Necessary" class="headerlink" title="Is Default always Necessary?"></a>Is Default always Necessary?</h3><p>I think a lot of the confusion with Source and Default is that in some cases Default is redundant and unnecessary. I think Default is only required when the Source is set to <code>Database Column</code>, <code>Item</code>, or <code>Preference</code>. For the other options (see below) you can wrap the returned value with a <code>nvl</code>.</p><img src="/2018/04/apex-page-item-source-vs-default/source-types.png"><h3 id="Source-Used-Attribute"><a href="#Source-Used-Attribute" class="headerlink" title="Source Used Attribute"></a>Source <code>Used</code> Attribute</h3><p>Source has additional attribute that Default does not: <code>Used</code></p><img src="/2018/04/apex-page-item-source-vs-default/source-used.png"><p>If the <code>used</code> option is set to <code>Always, replacing any existing value in session state</code> this means that after the page has loaded the value in Session State may have a value that is different than the value that is shown on the screen. The following image shows the result of this situation (i.e. different session state vs on screen value).</p><img src="/2018/04/apex-page-item-source-vs-default/session-source-diff.png"><h3 id="Temporary-Change-of-Session-State"><a href="#Temporary-Change-of-Session-State" class="headerlink" title="Temporary Change of Session State"></a>Temporary Change of Session State</h3><p>Suppose that a <code>Before Header</code> computation exists and sets <code>P1_DEMO</code> to a static value: <code>From Computation</code>. This means that during page load, right after the computation is run, the session state value for <code>P1_DEMO</code> is <code>From Computation</code>. </p><p><code>P1_DEMO</code> Source is set to <code>From Source</code> and <code>Always, replacing any existing value in session state</code> is used. After <code>P1_DEMO</code> is “loaded” during the page load computation, the session state of <code>P1_DEMO</code> is <code>From Source</code> for the duration of the page load. After the page is loaded the session state value is <code>From Computation</code>. The following image highlights this. For both the <code>Before</code> and <code>After</code> display only items the Source was set to <code>&amp;P1_DEMO.</code></p><img src="/2018/04/apex-page-item-source-vs-default/session-state-temp-change.png"><p>This can cause some weird behaviors on a page that has AJAX calls. The value in session state changes during the page load process. After the page is loaded it may flip flop and the AJAX call could use the “old” session state value (see screen shot above).</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Someone recently asked me about the difference between an APEX page item’s &lt;code&gt;Source&lt;/code&gt;  and &lt;code&gt;Default&lt;/code&gt; attributes. I’ve
      
    
    </summary>
    
    
      <category term="apex" scheme="http://www.talkapex.com/tags/apex/"/>
    
  </entry>
  
  <entry>
    <title>Docker as a Micro Service</title>
    <link href="http://www.talkapex.com/2018/04/docker-as-a-micro-service/"/>
    <id>http://www.talkapex.com/2018/04/docker-as-a-micro-service/</id>
    <published>2018-04-05T04:41:37.000Z</published>
    <updated>2018-04-05T02:46:48.159Z</updated>
    
    <content type="html"><![CDATA[<p>One thing I really dislike when trying to install new command line (CLI) software is the uninstall process isn’t always very clear. Things can get worse if the software has additional dependencies (Java for example) especially when you need to have two versions of the same tool for different apps.</p><p>Docker solves this problem by keeping everything you need for a specific task in one container. The added bonus is that you’ll probably be able to find a Docker container for just about anything you want and it’s OS independent on <a href="https://hub.docker.com/" target="_blank" rel="noopener">Docker Hub</a>.</p><p>At <a href="https://www.insum.ca/hackathon-opportunity-work-with-new-technology/" target="_blank" rel="noopener">Insum’s 2018 Hackathon</a> we developed skills for <a href="https://alexa.amazon.com" target="_blank" rel="noopener">Amazon Alexa</a>. To help the teams I published a <a href="https://hub.docker.com/r/martindsouza/amazon-ask-cli/" target="_blank" rel="noopener">Docker image</a> that has both the <a href="https://aws.amazon.com/cli/" target="_blank" rel="noopener">AWS CLI</a> and <a href="https://developer.amazon.com/docs/smapi/quick-start-alexa-skills-kit-command-line-interface.html" target="_blank" rel="noopener">Alexa Skills Kit (ASK) CLI</a>. </p><p>Most of the demos I’ve seen for containers that are used for CLI tools looked like this:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker run -it \</span><br><span class="line">  ...</span><br><span class="line">  doccker_prefs</span><br><span class="line">  my_tool.sh -some -parameters</span><br></pre></td></tr></table></figure><p>Though these containers are helpful it’s not really useful for end users (i.e. developers) since the command can be tough to remember and the containers may exist after running the tool (i.e. you may need to manually delete them.</p><p>When building the <a href="https://hub.docker.com/r/martindsouza/amazon-ask-cli/" target="_blank" rel="noopener">Amazon ASK CLI container</a> I wanted to avoid these issues to make it as easy as possible for developers to use. I did the following tricks:</p><h2 id="alias-the-docker-run-command"><a href="#alias-the-docker-run-command" class="headerlink" title="alias the docker run command"></a><code>alias</code> the <code>docker run</code> command</h2><p>Instead of having to remember the long <code>docker run</code> command with all the parameters I used an <code>alias</code> command to bundle it all together. Mine looked like this:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">alias</span> alexa=<span class="string">"docker run -it --rm \</span></span><br><span class="line"><span class="string">  -v ~/alexa-demo/ask-config:/home/node/.ask \</span></span><br><span class="line"><span class="string">  -v ~/alexa-demo/aws-config:/home/node/.aws \</span></span><br><span class="line"><span class="string">  -v ~/alexa-demo/app:/home/node/app \</span></span><br><span class="line"><span class="string">  martindsouza/amazon-ask-cli:latest</span></span><br></pre></td></tr></table></figure><p>A few key things to note from the above snippet:</p><ul><li><code>alias</code>: This means that anytime I type in <code>alexa</code> in bash it will run everything in the quotes.<ul><li><em>Windows users: <code>alias</code> doesn’t exist in DOS or PowerShell. I’m not aware of any alternatives. If you know of any easy ones please leave a comment and I’ll update this post</em></li></ul></li><li><code>--rm</code> option: Deletes (self destruct) the container after the command is run. This means is that when I run <code>alexa ask init</code> (where <code>ask init</code> is the CLI tool) it’ll <code>run</code> the container, execute <code>ask</code> (with parameter <code>init</code>), then remove the container once <code>ask</code> is done.</li></ul><p>Using the <code>alias</code> and <code>--rm</code> techniques you can easily have all the CLI tools you want without cluttering up your base machine. Of course there may be some minor performance impacts by Dockerizing them. Personally I didn’t notice any slowdowns and will start using this technique for all my future CLI tools.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;One thing I really dislike when trying to install new command line (CLI) software is the uninstall process isn’t always very clear. Thing
      
    
    </summary>
    
    
      <category term="docker" scheme="http://www.talkapex.com/tags/docker/"/>
    
  </entry>
  
  <entry>
    <title>Docker Image for ORDS Standalone</title>
    <link href="http://www.talkapex.com/2018/04/docker-image-for-ords-standalone/"/>
    <id>http://www.talkapex.com/2018/04/docker-image-for-ords-standalone/</id>
    <published>2018-04-02T02:00:42.000Z</published>
    <updated>2018-04-02T01:53:57.675Z</updated>
    
    <content type="html"><![CDATA[<p>A while ago I released a Docker image for <a href="https://github.com/martindsouza/docker-ords/releases/tag/tomcat-0.1.0" target="_blank" rel="noopener">ORDS using Tocmat</a>. I’ve tagged that script and have since rebuilt this image to use ORDS standalone as well as updating it to <code>17.4.1</code>.</p><p>If you’re interested in using it, the entire project along with documentation is available here: <a href="https://github.com/martindsouza/docker-ords" target="_blank" rel="noopener">github.com/martindsouza/docker-ords</a>. </p><p>A few things to note about this Docker image:</p><ul><li>The configuration folder points to a mountable volume. If you store your configuration on a shared folder or version control system you can have ORDS point at it. If you need to have multiple versions of ORDS running this can be helpful since they can all point to the same configuration.<ul><li>If you don’t have a shared configuration that’s fine. The container will install and configure ORDS if one isn’t found.</li></ul></li><li>I could not post this image on Docker Hub as Oracle requires that you <a href="http://www.oracle.com/technetwork/developer-tools/rest-data-services/downloads/index.html" target="_blank" rel="noopener">download ORDS</a> yourself and accept their terms and conditions. This means that you need to build your own Docker image (this adds a few minimal steps to the overall process).</li><li>The image currently does not have SSL support and can be added it in if there’s interest. Please vote or leave a comment on the <a href="https://github.com/martindsouza/docker-ords/issues/7" target="_blank" rel="noopener">“Add Support for SSL”</a> issue if you’d like it.</li></ul><p>If you have any other feedback or suggestions please create an <a href="https://github.com/martindsouza/docker-ords/issues" target="_blank" rel="noopener">issue</a> on the project page.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;A while ago I released a Docker image for &lt;a href=&quot;https://github.com/martindsouza/docker-ords/releases/tag/tomcat-0.1.0&quot; target=&quot;_blank&quot;
      
    
    </summary>
    
    
      <category term="docker" scheme="http://www.talkapex.com/tags/docker/"/>
    
      <category term="ords" scheme="http://www.talkapex.com/tags/ords/"/>
    
  </entry>
  
  <entry>
    <title>How to Save Page Data but Show Errors in APEX</title>
    <link href="http://www.talkapex.com/2018/03/how-to-save-page-data-but-show-errors-in-apex/"/>
    <id>http://www.talkapex.com/2018/03/how-to-save-page-data-but-show-errors-in-apex/</id>
    <published>2018-03-29T14:15:48.000Z</published>
    <updated>2018-03-29T14:15:36.685Z</updated>
    
    <content type="html"><![CDATA[<p>In most cases error messages are shown on an APEX page when the user submits a form and a validation fails. Sometimes (not often) you may need to manually control the validations rather than using the declarative validations section. To do this you can use the <a href="https://docs.oracle.com/database/apex-5.1/AEAPI/APEX_ERROR.htm#AEAPI2209" target="_blank" rel="noopener"><code>apex_error</code></a> API. The following is an example of how to call the API.</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">apex_error.add_error(</span><br><span class="line">  p_message =&gt; 'Custom error from PL/SQL',</span><br><span class="line">  p_display_location =&gt; apex_error.c_inline_in_notification);</span><br></pre></td></tr></table></figure><p>This will generate the following on the page:</p><img src="/2018/03/how-to-save-page-data-but-show-errors-in-apex/custom-error.png"><p><code>apex_error.add_error</code> triggers a rollback and in most cases this is a good thing. In some very specific cases you may not want a rollback to occur. The rest of this article covers how to generate errors without a rollback occurring.</p><h2 id="Edge-Case"><a href="#Edge-Case" class="headerlink" title="Edge Case"></a>Edge Case</h2><p>I recently had a rare edge case for a page submit and errors. The page was used to edit batch staging data. The requirements were:</p><ul><li>User submits page</li><li>All the data is saved (in a staging table)<ul><li><em>Since this is staging area, the data must be saved and committed each time regardless of errors </em></li></ul></li><li>Do validations against staged data<ul><li>If errors were found, the page would show them (remember the data still needs to be saved)</li><li>If no errors were found, the staged data would be posted and then branch to another page.</li></ul></li></ul><h2 id="The-Solution"><a href="#The-Solution" class="headerlink" title="The Solution"></a>The Solution</h2><p>Given that <code>apex_error.add_error</code> performs a rollback the simple solution is to save the staged data, perform an explicit <code>commit</code>, and then do custom validations. Unfortunately this was not possible due to additional requirements that I left out of this article.</p><p><em>The following relies on the fact that you know about the <code>apex.message</code> API. If you do not please read <a href="/2018/03/custom-apex-notification-messages/" title="this article">this article</a>.</em></p><p>This is an overview of the final solution:</p><ul><li>On Submit PL/SQL page process that:<ul><li>Saved all the page’s data</li><li>Called a custom validation function that returned a JSON object. If no errors were found this function would return <code>null</code>. The results of this function were stored in the page item <code>P1_ERR_JSON</code>.</li></ul></li><li>Created an <code>onPageLoad</code> Dynamic Action to display errors using the <code>apex.message</code> API</li></ul><p>The following pseudo code summarizes the above description:</p><h3 id="Page-Process"><a href="#Page-Process" class="headerlink" title="Page Process"></a>Page Process</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- ...</span></span><br><span class="line"><span class="comment">-- Save staging data</span></span><br><span class="line"><span class="comment">-- ...</span></span><br><span class="line"><span class="comment">-- Validations:</span></span><br><span class="line">l_err_json := null;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">sum</span>(salary)</span><br><span class="line"><span class="keyword">into</span> l_salary_total</span><br><span class="line"><span class="keyword">from</span> my_stage_table;</span><br><span class="line"></span><br><span class="line">if l_salary_total &gt; 1000 then</span><br><span class="line">  <span class="comment">-- Produce JSON error like:</span></span><br><span class="line">  <span class="comment">-- &#123;</span></span><br><span class="line">  <span class="comment">--   "errMsg": "Total salary must be less than $1000"</span></span><br><span class="line">  <span class="comment">-- &#125;</span></span><br><span class="line">  apex_json.initialize_clob_output;</span><br><span class="line">  apex_json.open_object;</span><br><span class="line">  apex_json.write('errMsg', 'Total salary must be less than $1000');</span><br><span class="line">  apex_json.close_object;</span><br><span class="line"></span><br><span class="line">  l_err_json := apex_json.get_clob_output;</span><br><span class="line">  apex_json.free_output;</span><br><span class="line"><span class="keyword">end</span> <span class="keyword">if</span>;</span><br><span class="line"></span><br><span class="line">apex_util.set_session_state('P1_ERR_JSON', l_err_json, false);</span><br></pre></td></tr></table></figure><h3 id="onPageLoad-Dynamic-Action"><a href="#onPageLoad-Dynamic-Action" class="headerlink" title="onPageLoad Dynamic Action"></a><code>onPageLoad</code> Dynamic Action</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">err = apex.item(<span class="string">'P1_ERR_JSON'</span>).getValue();</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (err.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">  err = <span class="built_in">JSON</span>.parse(err);</span><br><span class="line"></span><br><span class="line">  apex.message.clearErrors();</span><br><span class="line">  apex.message.showErrors([</span><br><span class="line">    &#123;</span><br><span class="line">      type: apex.message.TYPE.ERROR,</span><br><span class="line">      location: [<span class="string">"page"</span>],</span><br><span class="line">      message: err.errMsg,</span><br><span class="line">      unsafe: <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]);</span><br><span class="line">&#125;<span class="comment">// end if</span></span><br></pre></td></tr></table></figure><p>When an error occurred, the page looked like:</p><img src="/2018/03/how-to-save-page-data-but-show-errors-in-apex/total-error.png"><h2 id="Wrapping-Up"><a href="#Wrapping-Up" class="headerlink" title="Wrapping Up"></a>Wrapping Up</h2><p>This solution is a summary of the final code. You can easily expand it to handle multiple error messages, associate with page items, etc.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;In most cases error messages are shown on an APEX page when the user submits a form and a validation fails. Sometimes (not often) you may
      
    
    </summary>
    
    
      <category term="apex-5.1" scheme="http://www.talkapex.com/tags/apex-5-1/"/>
    
  </entry>
  
  <entry>
    <title>Custom APEX Notification Messages</title>
    <link href="http://www.talkapex.com/2018/03/custom-apex-notification-messages/"/>
    <id>http://www.talkapex.com/2018/03/custom-apex-notification-messages/</id>
    <published>2018-03-29T14:00:19.000Z</published>
    <updated>2018-03-29T13:56:47.843Z</updated>
    
    <content type="html"><![CDATA[<p>Ever wonder how APEX generates error messages (shown below)? Want to create your own? Starting in APEX 5.1 you can create your own error and success messages using the <a href="https://docs.oracle.com/database/apex-5.1/AEAPI/apex-message-namespace.htm#AEAPI-GUID-D15040D1-6B1A-4267-8DF7-B645ED1FDA46" target="_blank" rel="noopener"><code>apex.message</code></a> library.</p><img src="/2018/03/custom-apex-notification-messages/apex-error-message.png"><p>The following demos show how to create custom error and success messages in JavaScript.</p><h2 id="Error-Messages"><a href="#Error-Messages" class="headerlink" title="Error Messages"></a>Error Messages</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">apex.message.clearErrors();</span><br><span class="line"></span><br><span class="line">apex.message.showErrors([</span><br><span class="line">  &#123;</span><br><span class="line">    type: apex.message.TYPE.ERROR,</span><br><span class="line">    location: [<span class="string">"page"</span>, <span class="string">"inline"</span>],</span><br><span class="line">    pageItem: <span class="string">"P1_DEMO"</span>,</span><br><span class="line">    message: <span class="string">"This field is required"</span>,</span><br><span class="line">    unsafe: <span class="literal">false</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    type: apex.message.TYPE.ERROR,</span><br><span class="line">    location: [<span class="string">"page"</span>],</span><br><span class="line">    message: <span class="string">"Page level error"</span>,</span><br><span class="line">    unsafe: <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">]);</span><br></pre></td></tr></table></figure><p><br></p><img src="/2018/03/custom-apex-notification-messages/apex-custom-error-message.png"><h2 id="Success-Message"><a href="#Success-Message" class="headerlink" title="Success Message"></a>Success Message</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">apex.message.clearErrors();</span><br><span class="line"></span><br><span class="line">apex.message.showPageSuccess( <span class="string">"It works!"</span> );</span><br></pre></td></tr></table></figure><p><br></p><img src="/2018/03/custom-apex-notification-messages/apex-custom-success-message.png"><h2 id="Wrap-up"><a href="#Wrap-up" class="headerlink" title="Wrap up"></a>Wrap up</h2><p>For more examples and full documentation read the <a href="https://docs.oracle.com/database/apex-5.1/AEAPI/apex-message-namespace.htm#AEAPI-GUID-D15040D1-6B1A-4267-8DF7-B645ED1FDA46" target="_blank" rel="noopener"><code>apex.message</code></a> documentation.</p><p>The <a href="/2018/03/how-to-save-page-data-but-show-errors-in-apex/" title="next post">next post</a> covers how to leverage the <code>apex_message</code> API to simulate an error in APEX without an error happening (it will also cover why you’d want to do this).</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Ever wonder how APEX generates error messages (shown below)? Want to create your own? Starting in APEX 5.1 you can create your own error 
      
    
    </summary>
    
    
      <category term="apex-5.1" scheme="http://www.talkapex.com/tags/apex-5-1/"/>
    
  </entry>
  
  <entry>
    <title>What a Bag of Frozen Blueberries Can Teach you about Software Design</title>
    <link href="http://www.talkapex.com/2018/03/what-a-bag-of-frozen-blueberries-can-teach-you-about-software-development/"/>
    <id>http://www.talkapex.com/2018/03/what-a-bag-of-frozen-blueberries-can-teach-you-about-software-development/</id>
    <published>2018-03-28T03:30:00.000Z</published>
    <updated>2018-03-28T03:18:11.862Z</updated>
    
    <content type="html"><![CDATA[<p>I recently opened my freezer found this bag of frozen blueberries:</p><img src="/2018/03/what-a-bag-of-frozen-blueberries-can-teach-you-about-software-development/IMG_9826.jpg"><p>I was a bit surprised to say the least, especially since the bag has a “E-Z Tab” along with a “PULL TO OPEN” (all caps) instruction label.</p><img src="/2018/03/what-a-bag-of-frozen-blueberries-can-teach-you-about-software-development/IMG_9827.jpg"><p>What does this have to do with software development? Everything. The rest of this post compares the bag of blueberries with software development.</p><h2 id="What-happened"><a href="#What-happened" class="headerlink" title="What happened?"></a>What happened?</h2><p>The most obvious thing to ask is why is their such a huge tear in the bag? Clearly someone didn’t take a few seconds to look at the bag and see that it already had built-in resealable functionality. Instead they determined it faster to tear open the bag (which it wasn’t) and then spent the additional time to find an elastic and in an unsuccessful attempt (first image) seal it back up.</p><h2 id="Bad-Design-Encourages-Bad-Design"><a href="#Bad-Design-Encourages-Bad-Design" class="headerlink" title="Bad Design Encourages Bad Design"></a>Bad Design Encourages Bad Design</h2><p>I’ve encountered the “torn blueberry bag” in many systems I’ve worked on over the years (some which have been my doing). I noticed that they all share the same pattern. A bad/quick design was put in place and then everything was piled on top of it just making the problem worse. When I run into these issues I try to analyze them and see if/how we can improve them. Here’s my detailed analysis on the bag of blueberries:</p><h3 id="1-The-Tear"><a href="#1-The-Tear" class="headerlink" title="1- The Tear"></a>1- The Tear</h3><p>This was a horrible decision for various reasons. First the opening now is too big which leads to more problems such as spillage, and does not make it easy to re-seal (more of this later). The “man-made” hole is not straight. Taking a pair of scissors would have made it more uniform, thus easier to maintain in the long run.</p><h3 id="2-The-Elastic"><a href="#2-The-Elastic" class="headerlink" title="2- The Elastic"></a>2- The Elastic</h3><p>Now that the bag has been (poorly) torn the solution to re-seal it was to use an elastic that clearly wasn’t properly put on. This lead to a few stray blueberries scattered in the freezer when I took the bag out. </p><p>The elastic is a key point in this solution. When shortcuts occur in software people tend to focus on the elastic and come to the following conclusions:</p><ul><li>The elastic wasn’t put on properly</li><li>Since the elastic wasn’t put on properly, the freezer had a bunch of loose blueberries in it</li><li>I spent time cleaning out the freezer to get the loose blueberries</li></ul><p>It’s easy to blame the how the elastic was put on and the side effects it caused but it’s the wrong approach. Instead of focusing on issues right in front of you, step back and ask yourself if this was the root cause of the problem or a side affect of a bad design decision.</p><h3 id="3-The-Future"><a href="#3-The-Future" class="headerlink" title="3- The Future"></a>3- The Future</h3><p>For the rest of the life of the bag I have to find a way to properly reseal it. Sometimes the hack elastic job will work, sometimes it won’t. I’ll probably still be dealing with stray blueberries in my freezer, thus adding to the mess. Thankfully I like blueberries and will go through the bag quickly. I won’t have to deal with the torn bag for too long but software usually lasts a very long time.</p><h2 id="Recap"><a href="#Recap" class="headerlink" title="Recap"></a>Recap</h2><p>A post-implementation analysis would have brought up the following questions:</p><ul><li>Did tearing the bag open rather than spending a minute to see if there was a better way save time? No.</li><li>Did tearing it open make the situation better? No.</li><li>What gain was made quickly tearing the bag open? None.</li><li>What additional side affects were caused because of it? Wasted time, spilled blueberries, and this blog post ;-).</li></ul><p>The perceived gain is that someone accessed the blueberries quicker for their needs. The reality is they just made things harder and created a compounding problem.</p><h2 id="Lessons-Learned"><a href="#Lessons-Learned" class="headerlink" title="Lessons Learned"></a>Lessons Learned</h2><ul><li>When working on software projects always remember that taking a some extra time to think things through and review options can save a lot of time</li><li>Rushed decisions usually lead to bad designs</li><li>When encountering these issues, focus on the root cause rather than the symptoms</li><li>Bad designs lead to more bad designs</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;I recently opened my freezer found this bag of frozen blueberries:&lt;/p&gt;
&lt;img src=&quot;/2018/03/what-a-bag-of-frozen-blueberries-can-teach-you-
      
    
    </summary>
    
    
      <category term="design" scheme="http://www.talkapex.com/tags/design/"/>
    
  </entry>
  
  <entry>
    <title>How to Develop with Multiple APEX Developer Tabs in Firefox</title>
    <link href="http://www.talkapex.com/2017/11/how-to-develop-with-multiple-apex-developer-tabs-in-firefox/"/>
    <id>http://www.talkapex.com/2017/11/how-to-develop-with-multiple-apex-developer-tabs-in-firefox/</id>
    <published>2017-11-20T03:35:42.000Z</published>
    <updated>2017-11-20T03:58:34.405Z</updated>
    
    <content type="html"><![CDATA[<p>Eventually all APEX developers need to have multiple versions of the development environment open at the same time. A simple example of this is if you’re working with two pages (Page 1 and Page 2) that are dependant on one another. You constantly have to toggle between them as you can’t have two tabs open for development (one for P1 and one for P2).</p><p>Most people either open a different browser or open a new browser tab in Private or Incognito mode. Now <a href="https://www.mozilla.org/" target="_blank" rel="noopener">Firefox</a> allows you to get around this issue by having <a href="https://blog.mozilla.org/firefox/introducing-firefox-multi-account-containers/" target="_blank" rel="noopener">Multi-Account Containers</a>. </p><img src="/2017/11/how-to-develop-with-multiple-apex-developer-tabs-in-firefox/firefox-multi-account-containers.png"><p>Multi-Account Containers segregate your cookies by containers. Aside from APEX development you can also have multiple instances of Gmail or Office 365 opened in different container tabs.</p><p>For now you must install the <a href="https://addons.mozilla.org/en-US/firefox/addon/multi-account-containers/?src=userprofile" target="_blank" rel="noopener">Multi-Account Containers Plugin</a> (built by Mozilla) as it’s not included by default. Note I use the plugin on <a href="https://www.mozilla.org/en-US/firefox/developer/" target="_blank" rel="noopener">Firefox Developer Edition</a> with no issues.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Eventually all APEX developers need to have multiple versions of the development environment open at the same time. A simple example of t
      
    
    </summary>
    
    
      <category term="apex" scheme="http://www.talkapex.com/tags/apex/"/>
    
  </entry>
  
  <entry>
    <title>How to Setup Multiple APEX Environments using Docker and Oracle 12c</title>
    <link href="http://www.talkapex.com/2017/11/how-to-setup-multiple-apex-environments-using-docker-and-oracle-12c/"/>
    <id>http://www.talkapex.com/2017/11/how-to-setup-multiple-apex-environments-using-docker-and-oracle-12c/</id>
    <published>2017-11-19T14:31:49.000Z</published>
    <updated>2017-11-19T20:44:01.920Z</updated>
    
    <content type="html"><![CDATA[<p>I’ve written a few posts on how to Dockerize your Oracle and APEX setup (<a href="/2017/10/how-to-setup-oracle-db-12-2-docker-container/" title="post 1">post 1</a>, <a href="/2017/10/docker-oracle-and-apex/" title="post 2">post 2</a>). I’m constantly refining the process as I learn new things and different Docker images become available.</p><p>I was writing a third post on setting up multiple APEX environments using Docker and Oracle 12c. The post was getting long and included many steps. I decided to move the instructions to Github as it solves two problems:</p><ul><li>I can easily keep it up to date with the latest steps I do to create my Docker containers</li><li>Others can contribute to the instructions (and/or include scripts) by making pull requests (PR)</li></ul><p>To view my latest Docker setup you can view my <a href="https://github.com/martindsouza/docker-oracle-setup" target="_blank" rel="noopener">docker-oracle-setup</a> page on Github. If you have any corrections, suggestions, or enhancements please create issues or submit a PR on the repository.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;I’ve written a few posts on how to Dockerize your Oracle and APEX setup (&lt;a href=&quot;/2017/10/how-to-setup-oracle-db-12-2-docker-container/&quot;
      
    
    </summary>
    
    
      <category term="apex" scheme="http://www.talkapex.com/tags/apex/"/>
    
      <category term="12c" scheme="http://www.talkapex.com/tags/12c/"/>
    
      <category term="docker" scheme="http://www.talkapex.com/tags/docker/"/>
    
  </entry>
  
  <entry>
    <title>How to Convert Dec to Any Base in SQL</title>
    <link href="http://www.talkapex.com/2017/11/how-to-convert-dec-to-any-base-in-sql/"/>
    <id>http://www.talkapex.com/2017/11/how-to-convert-dec-to-any-base-in-sql/</id>
    <published>2017-11-07T03:26:15.000Z</published>
    <updated>2017-11-07T04:27:27.000Z</updated>
    
    <content type="html"><![CDATA[<p>If you want to convert decimal (base 10) to to hexadecimal (base 16) in SQL you can do so easily with the built in <code>to_char</code> functionality:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">trim</span>(to_char(<span class="number">300</span>, <span class="string">'XXXXX'</span>)) dec2hex</span><br><span class="line"><span class="keyword">from</span> dual;</span><br><span class="line"></span><br><span class="line">DEC2HEX</span><br><span class="line">12C</span><br></pre></td></tr></table></figure><p>What if you wanted to convert a decimal number to base 20 or any other base? This question recently came up when I was looking to add a <a href="https://github.com/OraOpenSource/oos-utils/issues/173" target="_blank" rel="noopener">transactional number generator</a> for <a href="https://github.com/OraOpenSource/oos-utils" target="_blank" rel="noopener">OOS Utils</a>. The goal of the ticket is to convert a sequence number into a human readable number (ex: invoice number). It can easily be solved using PL/SQL (solution below) but I wanted to see if I could do it in SQL as it presents an interesting problem.</p><h2 id="The-Formula"><a href="#The-Formula" class="headerlink" title="The Formula"></a>The Formula</h2><p>For some, this section will go down memory lane to your college / university years where you had to convert dec to hex by hand. It’s important to understand the formula to convert dec to hex (or any base),</p><p>Using the first example, this is how to convert <code>300</code> to <code>12C</code> “by hand”: <em>Note <code>Q</code> = Quotient, <code>R</code> = Remainder</em></p><ul><li><code>300/16 = Q: 18, R: 12 (hex: C)</code></li><li><code>18/16 = Q:1, R: 2 (hex: 2)</code></li><li><code>1/16 = Q: 0, R: 1 (hex: 1)</code></li></ul><p>The steps above produce the hexadecimal number <code>12C</code>. More importantly, each value is dependent on the calculation of the previous line. This isn’t easy to do in SQL.</p><h2 id="PL-SQL-Function"><a href="#PL-SQL-Function" class="headerlink" title="PL/SQL Function"></a>PL/SQL Function</h2><p>The following function will convert dec to hex in PL/SQL:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> <span class="keyword">replace</span> <span class="keyword">function</span> dec2hex (</span><br><span class="line">  p_num <span class="keyword">in</span> <span class="built_in">integer</span>)</span><br><span class="line">  <span class="keyword">return</span> varchar2</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line">  l_return varchar2(<span class="number">255</span>);</span><br><span class="line">  l_quotient integer;</span><br><span class="line">  l_remainder integer;</span><br><span class="line">  c_base constant pls_integer := 16;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"></span><br><span class="line">  l_quotient := p_num;</span><br><span class="line"></span><br><span class="line">  while l_quotient &gt; 0 loop</span><br><span class="line">    l_remainder := mod(l_quotient, c_base);</span><br><span class="line">    l_quotient := trunc(l_quotient / c_base);</span><br><span class="line"></span><br><span class="line">    <span class="comment">-- A=10, B=11, ... F=15</span></span><br><span class="line">    l_return := substr('0123456789ABCDEF', l_remainder+1, 1) || l_return;</span><br><span class="line">  <span class="keyword">end</span> <span class="keyword">loop</span>;</span><br><span class="line"></span><br><span class="line">  return l_return;</span><br><span class="line"><span class="keyword">end</span> dec2hex;</span><br><span class="line">/</span><br></pre></td></tr></table></figure><p>As you can see PL/SQL uses the quotient from the previous loop to calculate the current loop’s remainder.</p><h2 id="SQL-Solution"><a href="#SQL-Solution" class="headerlink" title="SQL Solution"></a>SQL Solution</h2><p>In SQL, finding the value of the previous row is easy using an analytic function such as <a href="https://docs.oracle.com/database/122/SQLRF/Analytic-Functions.htm#SQLRF06174" target="_blank" rel="noopener"><code>lag</code></a>. If you’ve never used analytic functions before, <a href="https://twitter.com/connor_mc_d" target="_blank" rel="noopener">Connor McDonald</a> has a great <a href="https://www.youtube.com/watch?v=xvZ4SmKtazs" target="_blank" rel="noopener">series on youtube</a> about them.</p><p>Using the previous row’s calculated value for the current row is more difficult and can’t be done using analytic functions. This is where the <a href="https://docs.oracle.com/database/122/SQLRF/SELECT.htm#GUID-CFA006CA-6FF1-4972-821E-6996142A51C6__I2171160" target="_blank" rel="noopener">model clause</a> comes in. It’s one of the lesser known features in Oracle SQL but very powerful in the right circumstances.</p><p>The query below will do dec to hex (or any other “base X”) conversion. For demo purposes I have left the <code>select ... from my_data</code> portion uncommented to highlight the model clause. To do a full translation uncomment the last few lines.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">var x number;</span><br><span class="line">var base number;</span><br><span class="line"></span><br><span class="line">:x := 300;</span><br><span class="line">:base := 16;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">with</span><br><span class="line">  <span class="comment">-- Find how many loops we'll need to convert dec to basex</span></span><br><span class="line">  lvls as (</span><br><span class="line">    <span class="keyword">select</span> <span class="keyword">level</span> lvl</span><br><span class="line">    <span class="keyword">from</span> dual</span><br><span class="line">    <span class="comment">-- The &lt;= logic will return the number of characters required for conversion</span></span><br><span class="line">    <span class="keyword">connect</span> <span class="keyword">by</span> <span class="keyword">level</span> &lt;= <span class="keyword">ceil</span>(<span class="keyword">log</span>(:base, :x)) + <span class="keyword">decode</span>(<span class="keyword">log</span>(:base, :x), <span class="keyword">ceil</span>(<span class="keyword">log</span>(:base, :x)), <span class="number">1</span>,<span class="number">0</span>)</span><br><span class="line">  ),</span><br><span class="line">  <span class="comment">-- Alphabet 0..Z</span></span><br><span class="line">  <span class="comment">-- Where 0-9, A=10, B=11 ....</span></span><br><span class="line">  alphabet <span class="keyword">as</span> (</span><br><span class="line">    <span class="keyword">select</span></span><br><span class="line">      <span class="keyword">level</span><span class="number">-1</span> <span class="keyword">num</span>,</span><br><span class="line">      <span class="keyword">case</span></span><br><span class="line">        <span class="keyword">when</span> <span class="keyword">level</span><span class="number">-1</span> &lt; <span class="number">10</span> <span class="keyword">then</span> to_char(<span class="keyword">level</span><span class="number">-1</span>)</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">chr</span>( <span class="keyword">ascii</span>(<span class="string">'A'</span>)+<span class="keyword">level</span><span class="number">-1</span><span class="number">-10</span>)</span><br><span class="line">      <span class="keyword">end</span> letter</span><br><span class="line">    <span class="keyword">from</span> dual</span><br><span class="line">    <span class="keyword">connect</span> <span class="keyword">by</span> <span class="keyword">level</span> &lt;= :base</span><br><span class="line">  ),</span><br><span class="line">  <span class="comment">-- Returns rows for all the Quotient and Remainder in dec value</span></span><br><span class="line">  my_data <span class="keyword">as</span> (</span><br><span class="line">    <span class="keyword">select</span></span><br><span class="line">      lvl,</span><br><span class="line">      quotient,</span><br><span class="line">      <span class="keyword">remainder</span></span><br><span class="line">    <span class="keyword">from</span> lvls</span><br><span class="line">    <span class="keyword">model</span></span><br><span class="line">      <span class="keyword">return</span> all <span class="keyword">rows</span></span><br><span class="line">      <span class="keyword">dimension</span> <span class="keyword">by</span> (lvl)</span><br><span class="line">      <span class="keyword">measures</span>( <span class="number">0</span> <span class="keyword">remainder</span>, <span class="number">0</span> quotient)</span><br><span class="line">      <span class="keyword">rules</span> (</span><br><span class="line">        <span class="comment">-- Order matters here. I.e. R must come after Q so R can "see" Q</span></span><br><span class="line">        <span class="comment">-- cv docs: https://docs.oracle.com/database/122/SQLRF/Model-Functions.htm#SQLRF51210</span></span><br><span class="line">        quotient[lvl] = trunc(nvl(quotient[cv(lvl)<span class="number">-1</span>], :x) / :base),</span><br><span class="line">        <span class="keyword">remainder</span>[lvl] = <span class="keyword">mod</span>(nvl(quotient[cv(lvl)<span class="number">-1</span>], :x), :base)</span><br><span class="line">      )</span><br><span class="line">  )</span><br><span class="line"><span class="comment">-- For demo purposes</span></span><br><span class="line"><span class="keyword">select</span> md.*, a.letter</span><br><span class="line"><span class="keyword">from</span> my_data md, alphabet a</span><br><span class="line"><span class="keyword">where</span> <span class="number">1</span>=<span class="number">1</span></span><br><span class="line">  <span class="keyword">and</span> md.remainder = a.num</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> md.lvl</span><br><span class="line"><span class="comment">-- Uncomment below for dec2hex conversion</span></span><br><span class="line"><span class="comment">--select</span></span><br><span class="line"><span class="comment">--  listagg(a.letter, '') within group (order by md.lvl desc) basex</span></span><br><span class="line"><span class="comment">--from my_data md, alphabet a</span></span><br><span class="line"><span class="comment">--where 1=1</span></span><br><span class="line"><span class="comment">--  and md.remainder = a.num</span></span><br><span class="line">;</span><br><span class="line"></span><br><span class="line">LVL   QUOTIENT   REMAINDER LETTER</span><br><span class="line">  1         18          12 C</span><br><span class="line">  2          1           2 2</span><br><span class="line">  3          0           1 1</span><br></pre></td></tr></table></figure><h2 id="Final-Thoughts"><a href="#Final-Thoughts" class="headerlink" title="Final Thoughts"></a>Final Thoughts</h2><p>The model clause is extremely powerful when used to solve problems it was intended for. The toughest thing to do is learn and understand how it works with all it’s options/function. If it’s any help, I’m still learning more about the model clause and by no means an expert.</p><p>If you do some interesting things with a model clause please blog about it and send me a message as I can list future posts in this article.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;If you want to convert decimal (base 10) to to hexadecimal (base 16) in SQL you can do so easily with the built in &lt;code&gt;to_char&lt;/code&gt; f
      
    
    </summary>
    
    
      <category term="sql" scheme="http://www.talkapex.com/tags/sql/"/>
    
  </entry>
  
  <entry>
    <title>Reset Authorization Cache</title>
    <link href="http://www.talkapex.com/2017/10/reset-authorization-cache/"/>
    <id>http://www.talkapex.com/2017/10/reset-authorization-cache/</id>
    <published>2017-10-30T04:25:48.000Z</published>
    <updated>2017-10-30T04:26:02.000Z</updated>
    
    <content type="html"><![CDATA[<p>APEX Authorization Schemes determine if a user is allowed to access APEX components (such as page, item, region, etc). <em>Note: It’s common to confuse them with Authentication Schemes which determine if a user is allowed to login to the the application</em>.</p><p>If an Authorization scheme is applied to many components within an application it has the potential to be run many times. To help minimize the performance impacts an Authorization Scheme may have, they can be cached using the following options:</p><ul><li>Once per session</li><li>Once per page view</li><li>Once per component</li><li>Always (No Caching)</li></ul><p>Suppose an Authorization Scheme is configured to <code>Once per session</code> and this Authorization Scheme is applied to a region on Page 1. The first time the region is to be displayed, APEX will run the Authorization Scheme to determine if it can run/display the region. The authorization result will then be cached so all other components that reference the same Authorization Scheme will use the cached result.</p><p>What happens if something changes with the system that requires the Authorization to be re-evaluated? Thankfully there’s an API for that: <a href="https://docs.oracle.com/database/apex-5.1/doc.51/e64915/RESET_CACHE-Procedure.htm#AEAPI29604" target="_blank" rel="noopener"><code>apex_authorization.reset_cache</code></a>.</p><p>I recently encountered the need to reset the Authorization cache on an application where users had multiple roles but could only “play” one role at a time. Example roles include Admin, Manager, User. Each time a user changed their role I needed to reset all the Authorization schemes as the role they played significantly affected the access they had to the system.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;APEX Authorization Schemes determine if a user is allowed to access APEX components (such as page, item, region, etc). &lt;em&gt;Note: It’s com
      
    
    </summary>
    
    
      <category term="apex" scheme="http://www.talkapex.com/tags/apex/"/>
    
      <category term="security" scheme="http://www.talkapex.com/tags/security/"/>
    
  </entry>
  
  <entry>
    <title>Listagg for IR Column Break Report</title>
    <link href="http://www.talkapex.com/2017/10/listagg-for-ir-column-break-report/"/>
    <id>http://www.talkapex.com/2017/10/listagg-for-ir-column-break-report/</id>
    <published>2017-10-27T12:01:52.000Z</published>
    <updated>2017-10-27T12:02:03.000Z</updated>
    
    <content type="html"><![CDATA[<p>If you’ve used Interactive Reports (IR) in APEX for a while you may find a need to display a delimited list of values next to a <code>sum</code> row. The following screenshot shows this problem. Suppose you wanted to have a comma delimited list of names for each job such as <code>FORD,SCOTT</code> in the aggregation (sum) row.</p><img src="/2017/10/listagg-for-ir-column-break-report/report-problem.png"><p>In SQL this is easy to do using the <a href="https://docs.oracle.com/database/122/SQLRF/LISTAGG.htm#SQLRF30030" target="_blank" rel="noopener"><code>listagg</code></a> function. unfortunately <code>listagg</code> isn’t available as an IR aggregation option (<code>Actions &gt; Data &gt; Aggregate</code>). I recently needed to do this for an IR. The rest of this post will cover setup along with the JavaScript (JS) solution.</p><h2 id="Setup"><a href="#Setup" class="headerlink" title="Setup"></a>Setup</h2><ol><li>Create an Interactive Report: <code>select ename, sal from emp</code></li><li>On the IR go to <code>Actions &gt; Format &gt; Control Break</code> and Select <code>Job</code> as the column (shown below) <br> <img src="/2017/10/listagg-for-ir-column-break-report/control-break.png"><br></li><li>On the IR go to <code>Actions &gt; Data &gt; Aggregate</code> and select <code>Function: Sum</code> and <code>Column: Sal</code> as shown below. <br><img src="/2017/10/listagg-for-ir-column-break-report/aggregation-sum.png"></li></ol><p>The resulting report should look like the first screenshot at the begging of this article.</p><h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>The JavaScript below will add in the necessary <code>listagg</code> for the <code>Ename</code> column for the IR.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Set to the displayed header name</span></span><br><span class="line"><span class="keyword">var</span> headerName = <span class="string">'Ename'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> headerNum; <span class="comment">//ID for TH header object</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Find the header to listagg</span></span><br><span class="line">$(<span class="string">'a.a-IRR-headerLink'</span>).each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> $<span class="keyword">this</span> = $(<span class="keyword">this</span>)</span><br><span class="line">  <span class="keyword">if</span>($<span class="keyword">this</span>.text() == headerName)&#123;</span><br><span class="line">    headerNum = $<span class="keyword">this</span>.closest(<span class="string">'th.a-IRR-header'</span>).attr(<span class="string">'id'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$(<span class="string">'.a-IRR-aggregate-value'</span>).each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> $aggRowTr = $(<span class="keyword">this</span>).first().closest(<span class="string">'tr'</span>);</span><br><span class="line">  <span class="keyword">var</span> $prevRow = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">var</span> listaggHtml = <span class="string">''</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Loop over all the rows until next next column break</span></span><br><span class="line">  <span class="keyword">while</span> (<span class="literal">true</span>)&#123;</span><br><span class="line">    $prevRow = !$prevRow ? $aggRowTr.prev(<span class="string">'tr'</span>) : $prevRow.prev(<span class="string">'tr'</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> ($prevRow.children(<span class="string">'th'</span>).length &gt; <span class="number">0</span>)&#123;</span><br><span class="line">      <span class="comment">// If TH is detected it's the end of the IR column break</span></span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">      listaggHtml = $prevRow.children(<span class="string">`td[headers*="<span class="subst">$&#123;headerNum&#125;</span>"]`</span>).text() + <span class="string">','</span> + listaggHtml;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;<span class="comment">//for</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// Regex is to remove trailing comma</span></span><br><span class="line">  $aggRowTr.children(<span class="string">`td[headers*="<span class="subst">$&#123;headerNum&#125;</span>"]`</span>).html(listaggHtml.replace(<span class="regexp">/,$/gi</span>, <span class="string">''</span>));</span><br><span class="line"></span><br><span class="line">&#125;); <span class="comment">// ('.a-IRR-aggregate-value').each</span></span><br></pre></td></tr></table></figure><p>After running the JS code the report will look like:</p><img src="/2017/10/listagg-for-ir-column-break-report/report-solution.png"><p>A few comments about this solution:</p><ul><li>This code was for a personal report and thus the JS hasn’t been optimized or properly tested on all browsers</li><li>Depending on your needs you may want to move it to a Dynamic Action</li><li>If you have time you may want to convert this to an APEX plugin. If so please share on <a href="https://apex.world/ords/f?p=100:700" target="_blank" rel="noopener">APEX.world plugins</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;If you’ve used Interactive Reports (IR) in APEX for a while you may find a need to display a delimited list of values next to a &lt;code&gt;sum
      
    
    </summary>
    
    
      <category term="apex" scheme="http://www.talkapex.com/tags/apex/"/>
    
  </entry>
  
  <entry>
    <title>Top Oracle SQL Developer Data Modeler Settings</title>
    <link href="http://www.talkapex.com/2017/10/top-oracle-sql-developer-data-modeler-settings/"/>
    <id>http://www.talkapex.com/2017/10/top-oracle-sql-developer-data-modeler-settings/</id>
    <published>2017-10-23T06:00:00.000Z</published>
    <updated>2017-10-24T02:46:58.000Z</updated>
    
    <content type="html"><![CDATA[<p>I’ve started to use SQL Developer Data Modeler](<a href="http://www.oracle.com/technetwork/developer-tools/datamodeler/overview/index.html)(SDDM" target="_blank" rel="noopener">http://www.oracle.com/technetwork/developer-tools/datamodeler/overview/index.html)(SDDM</a>) a lot for a project and realized that pretty much everything is configurable. The problem is that there’s no single area to search all the different settings and even the settings’ search boxes don’t filter for all the options. To get around this (and for my own references) I’ve included some settings that I found very useful. <em>I’ll try to keep this post up to date as I continue to explore SDDM.</em></p><p><strong>Notes</strong></p><ul><li><a href="https://twitter.com/thatjeffsmith" target="_blank" rel="noopener">Jeff Smith</a> has <a href="http://www.thatjeffsmith.com" target="_blank" rel="noopener">blogged</a> about a lot of the different settings. For a more extensive list check out his <a href="http://www.thatjeffsmith.com" target="_blank" rel="noopener">blog</a>.</li><li>When <em>Preferences</em> is mentioned it’s <code>Tools &gt; Preferences</code> in Windows and <code>Oracle Data Modeler &gt; Preferences</code> in Mac.</li><li>I did not include any scripting (design rules, transformations, or DDL transformations) in this list. I’ll write a separate article on that.</li></ul><h2 id="Adding-PROMPT-Statements-in-DDL"><a href="#Adding-PROMPT-Statements-in-DDL" class="headerlink" title="Adding PROMPT Statements in DDL"></a>Adding <code>PROMPT</code> Statements in DDL</h2><p>SDDM can generate DDL statements for you either by clicking the DDL button (1) or synchronizing the model with a schema (2):</p><p><img src="/2017/10/top-oracle-sql-developer-data-modeler-settings/Snip20170721_7.png"></p><p>It’s always helpful to have <code>prompt</code> statements before each DDL change to help debug where an issue occurred. To do so open <code>Preferences</code> and check  <code>Include PROMPT Command (for Oracle only)</code>:</p><p><img src="/2017/10/top-oracle-sql-developer-data-modeler-settings/Snip20170721_6.png"></p><p>All DDL will then include a <code>prompt</code> statement like:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PROMPT CREATING TABLE 'MY_TABLE';</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> MY_TABLE ...</span><br></pre></td></tr></table></figure><h2 id="12c-Identity-Column-or-Auto-Generate-Sequences"><a href="#12c-Identity-Column-or-Auto-Generate-Sequences" class="headerlink" title="12c Identity Column or Auto Generate Sequences"></a>12c Identity Column or Auto Generate Sequences</h2><p>Depending on your database version you may want to either have sequences automatically generated for you or not. In my case I was using a 12c instance and was going to use <a href="https://oracle-base.com/articles/12c/identity-columns-in-oracle-12cr1" target="_blank" rel="noopener">Identity Columns</a> for primary key IDs. I didn’t want sequences for each table to be automatically generated. To toggle this feature open Preferences and change the options in the image below.</p><p><img src="/2017/10/top-oracle-sql-developer-data-modeler-settings/Snip20170721_8.png"></p><p>More on the Identity Column settings <a href="http://www.thatjeffsmith.com/archive/2014/01/defining-12c-identity-columns-in-oracle-sql-developer-data-modeler/" target="_blank" rel="noopener">here</a></p><h2 id="DDL-Format-Lowercase-and-Tabs"><a href="#DDL-Format-Lowercase-and-Tabs" class="headerlink" title="DDL Format - Lowercase and Tabs"></a>DDL Format - Lowercase and Tabs</h2><p>If you’re really picky on the format of the DDL that is generated you can modify some of the settings in <code>Preferences &gt; Format</code>:</p><p><img src="/2017/10/top-oracle-sql-developer-data-modeler-settings/Snip20170721_9.png"></p><h2 id="Naming-Standard-Templates"><a href="#Naming-Standard-Templates" class="headerlink" title="Naming Standard Templates"></a>Naming Standard Templates</h2><p>When adding primary keys (PK) and various other constraints a default name is always generated. You can determine how this name is generated by modifying the design’s properties settings:</p><p><img src="/2017/10/top-oracle-sql-developer-data-modeler-settings/Snip20170721_10.png"></p><p>More information on different variables can be found <a href="https://kentgraziano.com/2015/12/29/better-data-modeling-discovering-foreign-keys-fk-in-sqldevmodeler-sddm/" target="_blank" rel="noopener">here</a></p><h2 id="Short-Table-Names"><a href="#Short-Table-Names" class="headerlink" title="Short Table Names"></a>Short Table Names</h2><p>In most DB instances all object names are limited to 30 characters (this is changed in 12c but most organizations still haven’t enabled 128 characters). When using naming standards this can cause some issues because just referencing <code>&lt;table_name&gt;</code> may not work as its already 30 characters. Note <code>&lt;table_name&gt;</code> isn’t a real variable in SDDM.</p><p>You can define a short name (SDDM calls it an <code>Abbreviation</code>) for each table via the table properties. Setting the <code>Abbreviation</code> is also very helpful when generating DDL statements or constraints from scripts.</p><p><img src="/2017/10/top-oracle-sql-developer-data-modeler-settings/Snip20170722_12.png"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;I’ve started to use SQL Developer Data Modeler](&lt;a href=&quot;http://www.oracle.com/technetwork/developer-tools/datamodeler/overview/index.htm
      
    
    </summary>
    
    
      <category term="sql-data-modeler" scheme="http://www.talkapex.com/tags/sql-data-modeler/"/>
    
  </entry>
  
  <entry>
    <title>Docker Oracle and APEX</title>
    <link href="http://www.talkapex.com/2017/10/docker-oracle-and-apex/"/>
    <id>http://www.talkapex.com/2017/10/docker-oracle-and-apex/</id>
    <published>2017-10-16T01:12:39.000Z</published>
    <updated>2017-11-19T20:41:56.000Z</updated>
    
    <content type="html"><![CDATA[<p><em>Update: I’ve moved my setup process to Dockerize Oracle and APEX to Github. It will be maintained with the latest steps I’m using it. The repository is <a href="https://github.com/martindsouza/docker-oracle-setup" target="_blank" rel="noopener">docker-oracle-setup</a>.</em></p><p>Last week I needed to test an Oracle 12.2 feature and got hooked on Docker. I wrote an article on <a href="http://www.talkapex.com/2017/10/how-to-setup-oracle-db-12-2-docker-container/">how to setup an Oracle DB 12.2 Docker container</a>. This solved my goal to test the 12.2 feature. <a href="https://twitter.com/RoelH" target="_blank" rel="noopener">Roel Hartman</a> then wrote a <a href="http://roelhartman.blogspot.ca/2017/10/dockerize-your-apex-development.html" target="_blank" rel="noopener">followup article</a> about how to setup an Oracle database in a Docker container but preserve the data on his laptop. I.e. if the container was deleted or needed to be rebuilt his database data wouldn’t be lost.</p><p>Roel’s article inspired me to setup an entire Dockerized Oracle and APEX environment, thus replacing my current local VM infrastructure. I took a lot of notes about the process. The result is this blog post which contains everything I did to create my containers and link them together. To get it all working I used the following articles and all my scripts are a result of a combination of the code found in the links.</p><ul><li><a href="http://joelkallman.blogspot.ca/2017/05/apex-and-ords-up-and-running-in2-steps.html" target="_blank" rel="noopener">APEX and ORDS up and running in….2 steps!</a> by <a href="https://twitter.com/joelkallman" target="_blank" rel="noopener">Joel Kallman</a></li><li><a href="http://roelhartman.blogspot.ca/2017/10/dockerize-your-apex-development.html" target="_blank" rel="noopener">Dockerize your APEX development environment</a> by <a href="https://twitter.com/RoelH" target="_blank" rel="noopener">Roel Hartman</a></li><li><a href="https://sqlmaria.com/2017/04/27/oracle-database-12c-now-available-on-docker/" target="_blank" rel="noopener">Oracle Database 12c now available on Docker</a> by <a href="https://twitter.com/sqlmaria" target="_blank" rel="noopener">Maria Colgan</a></li><li><a href="https://github.com/lucassampsouza/ords_apex" target="_blank" rel="noopener">ORDS Docker Setup</a> by <a href="http://www.vertech-it.com.br" target="_blank" rel="noopener">Lucas Souza</a></li></ul><h2 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h2><p>A few things to keep in mind that will help when reading the rest of this article:</p><ul><li>All my scripts are Linux / MacOS focused. If you use a Windows machine you’ll need to translate</li><li>I specifically made reference to “your laptop” to emphasize what was run “on your machine” vs “in a docker container”</li></ul><p>The following key configurations were used for the containers:</p><h3 id="Port-Mapping"><a href="#Port-Mapping" class="headerlink" title="Port Mapping"></a>Port Mapping</h3><table><thead><tr><th>Container</th><th>Port</th><th>Description</th></tr></thead><tbody><tr><td><code>oracle</code></td><td><code>32712</code></td><td>TNS listener</td></tr><tr><td><code>ords</code></td><td><code>32713</code></td><td>ORDS</td></tr></tbody></table><h3 id="Passwords"><a href="#Passwords" class="headerlink" title="Passwords"></a>Passwords</h3><table><thead><tr><th>Container</th><th>Username</th><th>Password</th><th>Description</th></tr></thead><tbody><tr><td><code>oracle</code></td><td><code>sys</code></td><td><code>Oradoc_db1</code></td><td></td></tr><tr><td><code>oracle</code></td><td><code>admin</code></td><td><code>oracle</code></td><td>Workspace <code>Internal</code> for APEX admin</td></tr></tbody></table><h3 id="Download-Files"><a href="#Download-Files" class="headerlink" title="Download Files"></a>Download Files</h3><p>Due to licensing restrictions I can’t host/provide these files in Github or elsewhere. As such you’ll need to download them manually. Download the following files and store them in your <code>Downloads</code> folder</p><ul><li>Docker Images: <a href="https://github.com/oracle/docker-images" target="_blank" rel="noopener">github.com/oracle/docker-images</a>. This will be saved as <code>docker-images-master.zip</code></li><li>Oracle 12.2 Database: Go to <a href="http://www.oracle.com/technetwork/database/enterprise-edition/downloads/index.html" target="_blank" rel="noopener">www.oracle.com/technetwork/database/enterprise-edition/downloads</a> and download <code>linuxx64_12201_database.zip</code></li><li>APEX: Go to <a href="http://www.oracle.com/technetwork/developer-tools/apex/downloads/index.html" target="_blank" rel="noopener">www.oracle.com/technetwork/developer-tools/apex/downloads</a> and download latest version of APEX. For this blog it was <code>5.1.3</code></li><li>ORDS: Go to <a href="http://www.oracle.com/technetwork/developer-tools/rest-data-services/downloads/index.html" target="_blank" rel="noopener">www.oracle.com/technetwork/developer-tools/rest-data-services/downloads</a> and download latest version of ORDS. For this blog it was <code>3.0.12</code></li></ul><h2 id="Laptop-Folder-Structure"><a href="#Laptop-Folder-Structure" class="headerlink" title="Laptop Folder Structure"></a>Laptop Folder Structure</h2><p>The following script will create a folder structure that looks like:</p><table><thead><tr><th>Path</th><th>Description</th></tr></thead><tbody><tr><td><code>~/docker</code></td><td>root</td></tr><tr><td><code>~/docker/apex</code></td><td>To host APEX installation and images for each version</td></tr><tr><td><code>~/docker/apex/5.1.3</code></td><td>APEX 5.1.3 installation files  </td></tr><tr><td><code>~/docker/oracle</code></td><td>Hold Oracle 12.2 data files</td></tr><tr><td><code>~/docker/ords</code></td><td>ORDS Dockerfile (to build ORDS image)</td></tr><tr><td><code>~/docker/tmp</code></td><td>Temp folder</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mkdir ~/docker</span><br><span class="line"></span><br><span class="line"><span class="comment"># The APEX folder structure allows for multiple versions of APEX to be hosted by different ORDS instances</span></span><br><span class="line">mkdir ~/docker/apex</span><br><span class="line">mkdir ~/docker/apex/5.1.3</span><br><span class="line"></span><br><span class="line"><span class="comment"># To store oracle data</span></span><br><span class="line">mkdir ~/docker/oracle</span><br><span class="line"><span class="comment">#Oracle REST Data Services</span></span><br><span class="line">mkdir ~/docker/ords</span><br></pre></td></tr></table></figure><h2 id="Move-Downloaded-Files"><a href="#Move-Downloaded-Files" class="headerlink" title="Move Downloaded Files"></a>Move Downloaded Files</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ORDS (done in ORDS section)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># APEX</span></span><br><span class="line"><span class="built_in">cd</span> ~/docker/apex/</span><br><span class="line">mv ~/Downloads/apex_5.1.3.zip .</span><br><span class="line">unzip apex_5.1.3.zip</span><br><span class="line">mv apex 5.1.3</span><br><span class="line"></span><br><span class="line"><span class="comment"># Oracle Docker files</span></span><br><span class="line">mkdir ~/docker/tmp</span><br><span class="line"><span class="built_in">cd</span> ~/docker/tmp</span><br><span class="line">mv ~/Downloads/docker-images-master.zip .</span><br><span class="line">mv ~/Downloads/linuxx64_12201_database.zip .</span><br></pre></td></tr></table></figure><h2 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h2><h3 id="Build-Oracle-Docker-Image"><a href="#Build-Oracle-Docker-Image" class="headerlink" title="Build Oracle Docker Image"></a>Build Oracle Docker Image</h3><p>This will be a different setup then I <a href="http://www.talkapex.com/2017/10/how-to-setup-oracle-db-12-2-docker-container/">previously blogged about</a> in that this docker container will separate the data from the app. I.e. we can remove the container and rebuild it while keeping all the data in place. This allows for us to</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/docker/tmp</span><br><span class="line">unzip docker-images-master.zip</span><br><span class="line">mv linuxx64_12201_database.zip docker-images-master/OracleDatabase/dockerfiles/12.2.0.1</span><br><span class="line"><span class="built_in">cd</span> docker-images-master/OracleDatabase/dockerfiles</span><br><span class="line">./buildDockerImage.sh -v 12.2.0.1 <span class="_">-e</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Once completed should see a message like:</span></span><br><span class="line"><span class="comment"># Successfully built ad2c10d804a7</span></span><br><span class="line"><span class="comment"># Successfully tagged oracle/database:12.2.0.1-ee</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#   Oracle Database Docker Image for 'ee' version 12.2.0.1 is ready to be extended:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#     --&gt; oracle/database:12.2.0.1-ee</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#   Build completed in 678 seconds.</span></span><br></pre></td></tr></table></figure><h3 id="Setup-Docker-Network"><a href="#Setup-Docker-Network" class="headerlink" title="Setup Docker Network"></a>Setup Docker Network</h3><p>In order for the containers to “talk” to each other we need to setup a Docker network and associate all the containers on this network. Containers can reference each other by their respective container names. When referencing another container on the same Docker network the port used is the container’s native port <strong>not</strong> the mapped port on your laptop.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">docker network create oracle_network</span><br><span class="line"></span><br><span class="line"><span class="comment"># Other docker network commands (don't need to run them as part of install)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Connect and existing container to a docker network</span></span><br><span class="line"><span class="comment"># docker network connect &lt;network name&gt; &lt;container name&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># View a network and connected containers</span></span><br><span class="line"><span class="comment"># In this example "oracle_network" is the network we're interested in</span></span><br><span class="line">docker network inspect oracle_network</span><br></pre></td></tr></table></figure><h3 id="Create-Oracle-Docker-Container"><a href="#Create-Oracle-Docker-Container" class="headerlink" title="Create Oracle Docker Container"></a>Create Oracle Docker Container</h3><p>The following command will create and run the Oracle Docker container. It’s TNS listener will be accesible via port <code>32712</code> on your laptop. The reference to the APEX installation files are necessary only whe installing APEX.</p><p>Adding the <code>-e TZ</code> will set the appropriate timezine for the OS and the database. A full list of timezones can be found <a href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones" target="_blank" rel="noopener">here</a>. If excluded it will default to UTC.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">docker run \</span><br><span class="line">  --name oracle \</span><br><span class="line">  --network=oracle_network \</span><br><span class="line">  <span class="_">-e</span> TZ=America/Edmonton \</span><br><span class="line">  -p 32712:1521 \</span><br><span class="line">  -v ~/docker/oracle:/opt/oracle/oradata \</span><br><span class="line">  -v ~/docker/apex/5.1.3:/tmp/apex-install \</span><br><span class="line">  oracle/database:12.2.0.1-ee</span><br><span class="line"></span><br><span class="line"><span class="comment"># Once the Docker image is working you'll see something like:</span></span><br><span class="line"><span class="comment"># #########################</span></span><br><span class="line"><span class="comment"># DATABASE IS READY TO USE!</span></span><br><span class="line"><span class="comment"># #########################</span></span><br><span class="line"><span class="comment"># It will then have a bunch of other information showing which you can ignore.</span></span><br></pre></td></tr></table></figure><p>In another terminal tab, set the <code>sys</code> password to <code>Oradoc_db1</code> and install APEX</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> oracle ./<span class="built_in">set</span>Password.sh Oradoc_db1</span><br></pre></td></tr></table></figure><h3 id="Install-APEX"><a href="#Install-APEX" class="headerlink" title="Install APEX"></a>Install APEX</h3><p>In a terminal tab on your laptop run:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Install and configure APEX</span></span><br><span class="line">docker <span class="built_in">exec</span> -it oracle bash -c <span class="string">"source /home/oracle/.bashrc; bash"</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> /tmp/apex-install</span><br><span class="line">sqlplus sys/Oradoc_db1@localhost/orclpdb1 as sysdba</span><br></pre></td></tr></table></figure><p>The above command will open a <code>SQL</code> prompt. Run the following scripts:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- Install APEX</span></span><br><span class="line">@apexins.sql SYSAUX SYSAUX TEMP /i/</span><br><span class="line"></span><br><span class="line"><span class="comment">-- APEX REST configuration</span></span><br><span class="line">@apex_rest_config_core.sql oracle oracle</span><br><span class="line"></span><br><span class="line"><span class="comment">-- Required for ORDS install</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">user</span> apex_public_user <span class="keyword">identified</span> <span class="keyword">by</span> <span class="keyword">oracle</span> <span class="keyword">account</span> <span class="keyword">unlock</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- From Joel's blog: "Create a network ACE for APEX (this is used when consuming Web services or sending outbound mail):"</span></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line">    l_acl_path varchar2(<span class="number">4000</span>);</span><br><span class="line">    l_apex_schema varchar2(100);</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">for</span> c1 <span class="keyword">in</span> (<span class="keyword">select</span> <span class="keyword">schema</span></span><br><span class="line">                 <span class="keyword">from</span> sys.dba_registry</span><br><span class="line">                <span class="keyword">where</span> comp_id = <span class="string">'APEX'</span>) <span class="keyword">loop</span></span><br><span class="line">        l_apex_schema := c1.schema;</span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">loop</span>;</span><br><span class="line">    sys.dbms_network_acl_admin.append_host_ace(</span><br><span class="line">        host =&gt; '*',</span><br><span class="line">        ace =&gt; xs$ace_type(privilege_list =&gt; xs$name_list('connect'),</span><br><span class="line">        principal_name =&gt; l_apex_schema,</span><br><span class="line">        principal_type =&gt; xs_acl.ptype_db));</span><br><span class="line">    <span class="keyword">commit</span>;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line">/</span><br><span class="line"></span><br><span class="line"><span class="comment">-- Setup APEX Admin password</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    apex_util.set_security_group_id( <span class="number">10</span> );</span><br><span class="line">    apex_util.create_user(</span><br><span class="line">        p_user_name =&gt; 'ADMIN',</span><br><span class="line">        p_email_address =&gt; 'martin@talkapex.com',</span><br><span class="line">        p_web_password =&gt; 'oracle',</span><br><span class="line">        p_developer_privs =&gt; 'ADMIN' );</span><br><span class="line">    apex_util.set_security_group_id( null );</span><br><span class="line">    <span class="keyword">commit</span>;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line">/</span><br><span class="line"></span><br><span class="line"><span class="comment">-- Exit SQL</span></span><br><span class="line">exit</span><br></pre></td></tr></table></figure><p>Now exit bash:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Exit bash</span></span><br><span class="line"><span class="built_in">exit</span></span><br></pre></td></tr></table></figure></p><h3 id="Create-ORDS-Container"><a href="#Create-ORDS-Container" class="headerlink" title="Create ORDS Container"></a>Create ORDS Container</h3><p>The following assumes that you’ve downloaded ORDS <code>3.0.12</code>. Referencing the ORDS version so that can create ORDS images for each ORDS release.</p><p>The scripts below will first create the ORDS Docker image then create the containers.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Uses https://github.com/martindsouza/docker-ords Dockerfile</span></span><br><span class="line"><span class="built_in">cd</span> ~/docker/ords</span><br><span class="line">git <span class="built_in">clone</span> git@github.com:martindsouza/docker-ords.git .</span><br><span class="line">mv ~/Downloads/ords.3.0.12.263.15.32.zip ~/docker/ords</span><br><span class="line"><span class="comment"># Only need ords.war from install</span></span><br><span class="line">unzip ~/docker/ords/ords.3.0.12.263.15.32.zip ords.war</span><br><span class="line"></span><br><span class="line"><span class="comment"># Build the Docker Image</span></span><br><span class="line">docker build -t ords:3.0.12 .</span><br><span class="line"></span><br><span class="line"><span class="comment"># Run ORDS</span></span><br><span class="line"><span class="comment"># Note: Leave DB_PORT=1521 as this is NOT the port that maps to your laptop,</span></span><br><span class="line"><span class="comment"># rather the internal docker network that was created. I.e. container to container</span></span><br><span class="line">docker run -t -i \</span><br><span class="line">  --name ords \</span><br><span class="line">  --network=oracle_network \</span><br><span class="line">  <span class="_">-e</span> DB_HOSTNAME=oracle \</span><br><span class="line">  <span class="_">-e</span> DB_PORT=1521 \</span><br><span class="line">  <span class="_">-e</span> DB_SERVICENAME=ORCLPDB1 \</span><br><span class="line">  <span class="_">-e</span> APEX_PUBLIC_USER_PASS=oracle \</span><br><span class="line">  <span class="_">-e</span> APEX_LISTENER_PASS=oracle \</span><br><span class="line">  <span class="_">-e</span> APEX_REST_PASS=oracle \</span><br><span class="line">  <span class="_">-e</span> ORDS_PASS=oracle \</span><br><span class="line">  <span class="_">-e</span> SYS_PASS=Oradoc_db1 \</span><br><span class="line">  --volume /Users/giffy/docker/apex/5.1.3/images:/usr/<span class="built_in">local</span>/tomcat/webapps/i \</span><br><span class="line">  -p 32713:8080 \</span><br><span class="line">  ords:3.0.12</span><br></pre></td></tr></table></figure><p>You should now be able to go to <a href="http://localhost:32713/ords/" target="_blank" rel="noopener">localhost:32713/ords/</a> on your laptop to run APEX</p><h2 id="Useful-Commands"><a href="#Useful-Commands" class="headerlink" title="Useful Commands"></a>Useful Commands</h2><h3 id="Docker-Start-Stop-Containers"><a href="#Docker-Start-Stop-Containers" class="headerlink" title="Docker Start/Stop Containers"></a>Docker Start/Stop Containers</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">docker stop -t 200 oracle</span><br><span class="line">docker stop -t 200 ords</span><br><span class="line"></span><br><span class="line"><span class="comment"># Start containers</span></span><br><span class="line">docker start oracle</span><br><span class="line"></span><br><span class="line"><span class="comment"># Wait a minute to start ORDS as Oracle will take a few minutes to boot</span></span><br><span class="line">docker start ords</span><br></pre></td></tr></table></figure><h3 id="Connect-to-DB-from-laptop"><a href="#Connect-to-DB-from-laptop" class="headerlink" title="Connect to DB from laptop"></a>Connect to DB from laptop</h3><p><code>sqlcl</code> is my alias for <a href="http://www.oracle.com/technetwork/developer-tools/sqlcl/overview/index.html" target="_blank" rel="noopener">SQLcl</a>. More information on how to install SQLcl on MacOS <a href="http://www.talkapex.com/2015/04/installing-sqlcl/">here</a>.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># CDB (not usually required)</span></span><br><span class="line">sqlcl sys/Oradoc_db1@localhost:32712:orclcdb as sysdba</span><br><span class="line"><span class="comment"># PDB</span></span><br><span class="line">sqlcl sys/Oradoc_db1@localhost:32712/orclpdb1 as sysdba</span><br><span class="line">sqlcl martin/martin@localhost:32712/orclpdb1</span><br></pre></td></tr></table></figure></p><h3 id="Create-New-DB-User"><a href="#Create-New-DB-User" class="headerlink" title="Create New DB User"></a>Create New DB User</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">define new_user = 'martin'</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> &amp;new_user. <span class="keyword">identified</span> <span class="keyword">by</span> &amp;new_user. <span class="keyword">container</span> = <span class="keyword">current</span>;</span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">connect</span>, <span class="keyword">resource</span>, <span class="keyword">create</span> <span class="keyword">any</span> <span class="keyword">context</span> <span class="keyword">to</span> &amp;new_user;</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">user</span> &amp;new_user <span class="keyword">quota</span> <span class="keyword">unlimited</span> <span class="keyword">on</span> <span class="keyword">users</span>;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;em&gt;Update: I’ve moved my setup process to Dockerize Oracle and APEX to Github. It will be maintained with the latest steps I’m using it.
      
    
    </summary>
    
    
      <category term="apex" scheme="http://www.talkapex.com/tags/apex/"/>
    
      <category term="oracle" scheme="http://www.talkapex.com/tags/oracle/"/>
    
      <category term="docker" scheme="http://www.talkapex.com/tags/docker/"/>
    
  </entry>
  
  <entry>
    <title>How to Setup Oracle DB 12.2 Docker Container</title>
    <link href="http://www.talkapex.com/2017/10/how-to-setup-oracle-db-12-2-docker-container/"/>
    <id>http://www.talkapex.com/2017/10/how-to-setup-oracle-db-12-2-docker-container/</id>
    <published>2017-10-11T05:39:44.000Z</published>
    <updated>2017-11-19T20:41:45.504Z</updated>
    
    <content type="html"><![CDATA[<p><em>Update: I’ve moved my setup process to Dockerize Oracle and APEX to Github. It will be maintained with the latest steps I’m using it. The repository is <a href="https://github.com/martindsouza/docker-oracle-setup" target="_blank" rel="noopener">docker-oracle-setup</a>.</em></p><p>I recently had a need to do a Proof of Concept (POC) on a new feature released in Oracle 12c R2 (12.2). My first instinct was to go to my DBAs and ask them to give me access to a 12.2 environment. Thankfully I was at the <a href="http://www.oracle.com/technetwork/community/oracle-ace/index.html" target="_blank" rel="noopener">Oracle ACE</a> annual Oracle Open World dinner and <a href="https://twitter.com/geraldvenzl?lang=en" target="_blank" rel="noopener">Gerald Venzl</a> (aka Mr.Oracle-Docker) was there and convinced me otherwise. I must thank Gerald for both pushing me to start using Docker again and also for some support when I ran into issues.</p><p>The following post will cover how to get a 12.2 instance up and running using the Oracle Container Registry for your own personal instances</p><h1 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h1><ul><li>If you haven’t already done so, go install <a href="https://www.docker.com" target="_blank" rel="noopener">Docker</a>. If you’ve never heard of Docker before I suggest reading a bit about it so you have some understanding of what is and how it works.</li><li>Go to <a href="https://container-registry.oracle.com" target="_blank" rel="noopener">container-registry.oracle.com</a> and use your Oracle Technology Network (OTN) login and register.<ul><li>One logged in go to <code>Database &gt; Enterprise</code> and read and if you agree to the Terms and Conditions click the <code>Accept</code> button</li></ul></li></ul><h1 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h1><p>The following steps will pull the appropriate image(s) and setup your docker instance. I’ve added inline comments to describe each step. <em>If you’re new to Docker please read my comments rather than blindly running the code.</em></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Some Docker versions may complain about login credentials when calling the pull command</span></span><br><span class="line"><span class="comment"># If you aren't auto prompted for login credentials run the following and use your OTN credentials</span></span><br><span class="line"><span class="comment"># docker login container-registry.oracle.com</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># They're various docker 12c images. To help reduce the number (and size) of images on my laptop I only needed the 12.2 version</span></span><br><span class="line"><span class="comment"># This will take a while to run as the image size is around 3.5 GB</span></span><br><span class="line">docker pull container-registry.oracle.com/database/enterprise:12.2.0.1</span><br><span class="line"></span><br><span class="line"><span class="comment"># For all the examples below the name "OracleDB" was used.</span></span><br><span class="line"><span class="comment"># You can use any name you want or just use the docker container ID to reference it</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># To run the image the documentation says to just use the -P option for something like:</span></span><br><span class="line"><span class="comment"># docker run -d -it --name OracleDB -P container-registry.oracle.com/database/enterprise:12.2.0.1</span></span><br><span class="line"><span class="comment"># This will auto map a local port on your laptop to the container's Oracle 1521 port.</span></span><br><span class="line"><span class="comment"># The problem with this approach is that each time you stop and start the container you may get a new local port</span></span><br><span class="line"><span class="comment"># To get around this restriction you can use the the "-p" option for a statically defined port.</span></span><br><span class="line"><span class="comment"># In this example I chose 32711</span></span><br><span class="line">docker run <span class="_">-d</span> -it --name OracleDB -p 32711:1521 container-registry.oracle.com/database/enterprise:12.2.0.1</span><br><span class="line"></span><br><span class="line"><span class="comment"># It takes some time for the Oracle container to fully boot up. Before trying to connect to it check the container status by running:</span></span><br><span class="line">docker ps</span><br><span class="line"></span><br><span class="line"><span class="comment"># Look in the STATUS column for the container. During "boot" time it will say "... (health: starting)".</span></span><br><span class="line"><span class="comment"># Wait until it says (healthy) before trying anything else.</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># To review/confirm the port mapping run:</span></span><br><span class="line">docker port OracleDB</span><br><span class="line"><span class="comment"># Should result in something like: 1521/tcp -&gt; 0.0.0.0:32711</span></span><br></pre></td></tr></table></figure><p>Your docker container should now be running. The following code shows how to connect to the instance using <a href="http://www.oracle.com/technetwork/developer-tools/sqlcl/overview/index.html" target="_blank" rel="noopener">SQLcl</a> along with creating a test account on the PDB. You can take the connection strings in the SQLcl demos and apply to <a href="http://www.oracle.com/technetwork/developer-tools/sql-developer/overview/index.html" target="_blank" rel="noopener">SQL Developer</a>.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Note on my laptop I renamed "sql" to "sqlcl". Adjust the scripts accordingly or call sqlplus</span></span><br><span class="line"><span class="comment"># The difference between : and / at the end of the connection strings is :SID /SERVICE_NAME</span></span><br><span class="line"><span class="comment"># Note: Oradoc_db1 is the default password for the image</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># To connect to the CDB (you probably won't need to do this)</span></span><br><span class="line"><span class="comment"># sqlcl sys/Oradoc_db1@localhost:32711:orclcdb as sysdba</span></span><br><span class="line"><span class="comment"># You'd then need to connect to PDB in SQL: alter session set container = orclpdb1;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># To connect to the PDB to create schema to develop with</span></span><br><span class="line">sqlcl sys/Oradoc_db1@localhost:32711/orclpdb1.localdomain as sysdba</span><br></pre></td></tr></table></figure><p>In <code>SQL&gt;</code>:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- Create account to develop with</span></span><br><span class="line">define new_user = 'martin'</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> &amp;new_user. <span class="keyword">identified</span> <span class="keyword">by</span> &amp;new_user. <span class="keyword">container</span> = <span class="keyword">current</span>;</span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">connect</span>, <span class="keyword">resource</span>, <span class="keyword">create</span> <span class="keyword">any</span> <span class="keyword">context</span> <span class="keyword">to</span> &amp;new_user;</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">user</span> &amp;new_user <span class="keyword">quota</span> <span class="keyword">unlimited</span> <span class="keyword">on</span> <span class="keyword">users</span>;</span><br><span class="line"></span><br><span class="line">exit</span><br></pre></td></tr></table></figure><p>Connect to the PDB</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqlcl martin/martin@localhost:32711/orclpdb1.localdomain</span><br></pre></td></tr></table></figure><p>Note: In SQL Developer this connection looks like:</p><img src="/2017/10/how-to-setup-oracle-db-12-2-docker-container/docker-sql-developer.png"><p>In <code>SQL&gt;</code></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- Create the emp and dept tables (<span class="doctag">note:</span> only works in SQLcl / SQL Dev. Not SQL*Plus)</span></span><br><span class="line">@https://raw.githubusercontent.com/OraOpenSource/OXAR/master/oracle/emp_dept.sql</span><br><span class="line"><span class="keyword">commit</span>;</span><br><span class="line">exit;</span><br></pre></td></tr></table></figure><p>You can now do/test whatever you want to do in your PDB!</p><h1 id="Common-docker-commands"><a href="#Common-docker-commands" class="headerlink" title="Common docker commands"></a>Common docker commands</h1><p>So now that you’ve started your Docker instance, and established a working connection to the PDB how do you manage the Docker container? Here are some useful Docker commands:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># See all containers (running or otherwise)</span></span><br><span class="line">docker ps <span class="_">-a</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Stop the docker image</span></span><br><span class="line"><span class="comment"># docker stop OracleDB</span></span><br><span class="line"><span class="comment"># From Gerald Venzl: By default docker will kill the container after just 10 seconds.</span></span><br><span class="line"><span class="comment"># That usually means that your database will die and has to run through recovery when it restarts.</span></span><br><span class="line"><span class="comment"># I always do a "docker stop -t 100 &lt;container name&gt;". That gives it a minute and 40 secs.</span></span><br><span class="line"><span class="comment"># It won't need that, usually 30 - 40 secs is enough.</span></span><br><span class="line"><span class="comment"># Docker will shutdown as soon as the database is down as well.</span></span><br><span class="line">docker stop -t 100 OracleDB</span><br><span class="line"></span><br><span class="line"><span class="comment"># Start the docker image</span></span><br><span class="line">docker start OracleDB</span><br><span class="line"></span><br><span class="line"><span class="comment"># *** Cleanup ***</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Delete container</span></span><br><span class="line">docker rm OracleDB</span><br><span class="line"></span><br><span class="line"><span class="comment"># Delete Image</span></span><br><span class="line">docker rmi container-registry.oracle.com/database/enterprise:12.2.0.1</span><br></pre></td></tr></table></figure><h1 id="Final-Thoughts"><a href="#Final-Thoughts" class="headerlink" title="Final Thoughts"></a>Final Thoughts</h1><p>I’ve just started to use the Docker 12.2 image and may launch a 12.1 container as well (will blog instructions if I do it).</p><p>If I run into any issues doing my tests and “learning” development (i.e. kicking the 12.2 tires) I’ll write another article and link below. I also plan to look into upgrading APEX on the 12.2 container along with creating a simple web server container to test APEX with some 12.2 features. If I get this working I’ll blog about it.</p><p><strong>Update: </strong> <a href="https://twitter.com/RoelH" target="_blank" rel="noopener">Role Hartman</a> wrote a followup <a href="http://roelhartman.blogspot.ca/2017/10/dockerize-your-apex-development.html" target="_blank" rel="noopener">post</a> to this article that I highly suggest reading. I will update this article with some of his suggestions on how he sets up his Docker Oracle DB container.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;em&gt;Update: I’ve moved my setup process to Dockerize Oracle and APEX to Github. It will be maintained with the latest steps I’m using it.
      
    
    </summary>
    
    
      <category term="docker" scheme="http://www.talkapex.com/tags/docker/"/>
    
  </entry>
  
  <entry>
    <title>Montreal Oracle Dev Day 2017</title>
    <link href="http://www.talkapex.com/2017/10/montreal-oracle-dev-day-2017/"/>
    <id>http://www.talkapex.com/2017/10/montreal-oracle-dev-day-2017/</id>
    <published>2017-10-09T11:41:37.000Z</published>
    <updated>2017-10-09T10:14:38.000Z</updated>
    
    <content type="html"><![CDATA[<p>For those in Montreal and the surrounding area I encourage you to come out to the <a href="http://info.insum.ca/en/oracle-developer-day-mtl" target="_blank" rel="noopener">Montreal Oracle Dev Day</a> on October 25th. The event is just $15 which is a steal considering that 3 Oracle ACE Directors will be presenting. <em>Note: The cost was to help reduce no-shows that occur when having entirely free events.</em></p><p>Here’s a summary agenda of the presentations with the full agenda <a href="http://info.insum.ca/en/oracle-developer-day-montreal-agenda-1" target="_blank" rel="noopener">here</a>:</p><ul><li>Time: 8:30-4:30</li><li>Location: <a href="https://goo.gl/maps/F4cGdR9d8Py" target="_blank" rel="noopener">Centre for Sustainable Development</a></li><li>Session 1: Oracle speaker (TBA)</li><li>Session 2: <a href="https://twitter.com/fr4ncis" target="_blank" rel="noopener">Francis Mignault</a>: Cloudy with a chance of Oracle APEX</li><li>Session 3: <a href="https://twitter.com/martindsouza" target="_blank" rel="noopener">Martin D’Souza</a>: Open Source PL/SQL Utility Tools for Oracle</li><li>Session 4: <a href="https://twitter.com/dgielis" target="_blank" rel="noopener">Dimitri Gielis</a>: APEX Reporting tips &amp; tricks</li></ul><p>Aside from the presentations attendees will have plenty of opportunity to network and share your Oracle development experiences. The speakers will be available all day so feel free to bring your APEX questions!</p><p>You can <strong><a href="https://www.eventbrite.ca/e/billets-montreal-oracle-dev-day-meet-up-modd-25-octobre-38504641419" target="_blank" rel="noopener">register</a></strong> now online.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;For those in Montreal and the surrounding area I encourage you to come out to the &lt;a href=&quot;http://info.insum.ca/en/oracle-developer-day-m
      
    
    </summary>
    
    
      <category term="odtug" scheme="http://www.talkapex.com/tags/odtug/"/>
    
  </entry>
  
  <entry>
    <title>Oracle Open World 17</title>
    <link href="http://www.talkapex.com/2017/09/oracle-open-world-17/"/>
    <id>http://www.talkapex.com/2017/09/oracle-open-world-17/</id>
    <published>2017-09-28T03:15:57.000Z</published>
    <updated>2017-09-28T03:48:51.000Z</updated>
    
    <content type="html"><![CDATA[<p>I’ll be attending <a href="https://www.oracle.com/openworld/index.html" target="_blank" rel="noopener">Oracle Open World 17</a> (OOW 17) next week. This year is going to be special for me as I’ll be giving a presentation at <a href="http://www.oaktable.net/blog/oak-table-world-2017-oracle-open-world" target="_blank" rel="noopener">Oak Table World</a> for the first time. I’m a bit nervous as I’ll be presenting alongside some of the biggest names in the Oracle DB community. Specifically I’m talking between lightening talks from Oak Table members and <a href="https://twitter.com/CaryMillsap" target="_blank" rel="noopener">Cary Millsap</a>!</p><h2 id="My-Presentations"><a href="#My-Presentations" class="headerlink" title="My Presentations"></a>My Presentations</h2><p>Here are the presentations I’ll be giving at OOW 17:</p><h3 id="Explore-Oracle-Application-Express-APIs"><a href="#Explore-Oracle-Application-Express-APIs" class="headerlink" title="Explore Oracle Application Express APIs"></a>Explore Oracle Application Express APIs</h3><p><strong>Date:</strong> Sunday, Oct 01, 3:45 p.m. - 4:30 p.m.<br><strong>Location:</strong> <a href="https://goo.gl/maps/Cz8YTBHQa1P2" target="_blank" rel="noopener">Marriott Marquis</a> (Yerba Buena Level) - Salon 4-6<br><strong>Session Code:</strong> <a href="https://events.rainfocus.com/catalog/oracle/oow17/catalogoow17?search=d%27souza&amp;showEnrolled=false" target="_blank" rel="noopener"><code>SUN6244</code></a></p><p><strong>Abstract:</strong> Most developers new to Oracle Application Express aren’t aware that it comes with a plethora of very powerful APIs for both PL/SQL and JavaScript. This session highlights some of these APIs and explains how and when to use them to speed up and simplify developing your Oracle Application Express applications. New Oracle Application Express 5.1 APIs are also discussed.</p><p><em> Note: This presentation was voted the best presentation at <a href="http://kscope17.com" target="_blank" rel="noopener">ODTUG Kscope 17</a></em></p><h3 id="Open-Source-PL-SQL-Utility-Tools-for-Oracle"><a href="#Open-Source-PL-SQL-Utility-Tools-for-Oracle" class="headerlink" title="Open Source PL/SQL Utility Tools for Oracle"></a>Open Source PL/SQL Utility Tools for Oracle</h3><p><strong>Date</strong>: Tuesday, Oct 03, 12:30 p.m. - 1:30 p.m.<br><strong>Location: </strong> <a href="https://goo.gl/maps/1dnsnsT6saE2" target="_blank" rel="noopener">Children’s Creativity Museum</a> (221 4th St - corner of 4th ST and Howard).</p><p><strong>Abstract: </strong> <a href="https://github.com/oraopensource/oos-utils" target="_blank" rel="noopener">OOS Utils</a> is a free open-source PL/SQL tool set for common utility functionality that developers use. Its goal is to prevent developers from having to rewrite the same code over and over again.</p><p>This presentation will highlight some of the great features of OOS Utils and showcase some future plans for the project. All audience types (DBAs, PL/SQL and APEX developers, and development managers) are encouraged to attend, as all will see immediate benefits for themselves or their teams to use.</p><h2 id="Other-Notes"><a href="#Other-Notes" class="headerlink" title="Other Notes:"></a>Other Notes:</h2><ul><li>As usual we’ll be having our annual <strong>ODTUG APEX Meetup</strong> on Tuesday (Oct 3rd) night at <a href="https://www.google.com/maps?f=q&amp;hl=en&amp;q=243+O%27Farrell+St.,+San+Francisco,+CA,+us" target="_blank" rel="noopener">Johnny Foley’s</a>. There’s a slight twist to the event. Since this has been a huge hit we’ve opened it up and made it an ODTUG All Community event! This means that the entire ODTUG community at OOW will be in one place and no need to run around to all the different events. You can register (free) for the event on <a href="https://www.meetup.com/ODTUGers/events/242740673/" target="_blank" rel="noopener">meetup.com</a>. If you’ve never been to this event before here are few tips:<ul><li>We’re downstairs (Johnny Foley’s has two levels) where all the action is at for the dueling pianos.</li><li>We <strong>don’t</strong> have any special reservations.</li><li>The earlier you show up the better as there’s always a lineup to get in as the night goes on.</li></ul></li><li>If this is your first time going to OOW then I highly recommend reading the <a href="https://www.insum.ca/openworld-survival-guide/" target="_blank" rel="noopener">OpenWorld Survival Guide</a> that <a href="https://twitter.com/monty_latiolais" target="_blank" rel="noopener">Monty Latiolais</a> recently wrote.</li></ul><p>Looking forward to seeing everyone there! If you want to get in touch you can send me a DM on Twitter: <a href="https://twitter.com/martindsouza" target="_blank" rel="noopener">@martindsouza</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;I’ll be attending &lt;a href=&quot;https://www.oracle.com/openworld/index.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Oracle Open World 17&lt;/a&gt; (OOW 17) 
      
    
    </summary>
    
    
      <category term="oow" scheme="http://www.talkapex.com/tags/oow/"/>
    
  </entry>
  
  <entry>
    <title>Oracle SQL Developer Randomly Closes</title>
    <link href="http://www.talkapex.com/2017/07/oracle-sql-developer-randomly-closes/"/>
    <id>http://www.talkapex.com/2017/07/oracle-sql-developer-randomly-closes/</id>
    <published>2017-07-22T04:59:33.000Z</published>
    <updated>2017-07-22T05:17:20.000Z</updated>
    
    <content type="html"><![CDATA[<p>I recently had a situation that running either <a href="http://www.oracle.com/technetwork/developer-tools/sql-developer/overview/index.html" target="_blank" rel="noopener">Oracle SQL Developer</a> or <a href="http://www.oracle.com/technetwork/developer-tools/datamodeler/overview/index.html" target="_blank" rel="noopener">SQL Developer Data Modeler</a> on a Windows 7 VM (more on this later) would randomly close (or crash depending on how you look at it). The log files didn’t produce anything substantial and after a lot of digging around it was due to the JVM and the video driver. <a href="https://twitter.com/thatjeffsmith" target="_blank" rel="noopener">Jeff Smith</a> confirmed this over Twitter:</p><p><blockquote class="twitter-tweet" data-conversation="none" data-lang="en"><p lang="en" dir="ltr">So it&#39;s the jvm crashing because of the video driver…happens on Windows a decent amount, usually fixed with a driver update</p>&mdash; Jeff Smith 🥃 ☜ (@thatjeffsmith) <a href="https://twitter.com/thatjeffsmith/status/888428472326029315" target="_blank" rel="noopener">July 21, 2017</a></blockquote> <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script></p><p>I was using windows on a VM and it had no available video driver updates. After reading <a href="https://stackoverflow.com/questions/40651162/sql-developer-crashes-randomly-every-time" target="_blank" rel="noopener">this post</a> on StackOverflow I found there is a configuration setting to get around the issue. It wasn’t very clear as to where to make the configuration change so here it is:</p><ol><li>Modify <code>datamodeler\ide\bin\jdk.conf</code></li><li>Add <code>AddVMOption  -Dsun.awt.nopixfmt=true</code> on a new line after <code>AddVMOption  -Dsun.java2d.noddraw=true</code></li><li>Restart the application</li></ol><p>A few additional notes:</p><ol><li>The versions I downloaded included the JDK. If you’re using your own JDK then the location of <code>jdk.conf</code> will probably be different.</li><li>If you’re using the included JDK version then you’ll need to remember to do this step with each update of the applications.</li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;I recently had a situation that running either &lt;a href=&quot;http://www.oracle.com/technetwork/developer-tools/sql-developer/overview/index.ht
      
    
    </summary>
    
    
      <category term="sql-developer" scheme="http://www.talkapex.com/tags/sql-developer/"/>
    
      <category term="sql-data-modeler" scheme="http://www.talkapex.com/tags/sql-data-modeler/"/>
    
  </entry>
  
  <entry>
    <title>Kscope 17</title>
    <link href="http://www.talkapex.com/2017/06/kscope-17/"/>
    <id>http://www.talkapex.com/2017/06/kscope-17/</id>
    <published>2017-06-16T06:09:59.000Z</published>
    <updated>2017-06-15T13:19:06.000Z</updated>
    
    <content type="html"><![CDATA[<p>I’ll be attending and presenting at this year’s <a href="http://kscope17.com" target="_blank" rel="noopener">ODTUG Kscope 17</a>. Here are some things that I’m involved with and my personal highlights for the conference this year:</p><h1 id="Conference-Planning-APEX-App"><a href="#Conference-Planning-APEX-App" class="headerlink" title="Conference Planning APEX App"></a>Conference Planning APEX App</h1><p>We (<a href="http://www.insum.ca" target="_blank" rel="noopener">Insum</a>) created a conference planning application built in APEX: <a href="https://bit.ly/insum-kscope17" target="_blank" rel="noopener">bit.ly/insum-kscope17</a>. The goal was to showcase APEX and some cool features we added into the application. If time permits I may give a brief demo into how we created the app during Monday’s <a href="APEX Open Mic Night">APEX Open Mic Night</a>. I made a short video to highlight this application:</p><div class="video-container"><iframe src="//www.youtube.com/embed/DiV7Zt4LFSc" frameborder="0" allowfullscreen></iframe></div><p>Note: This is an unofficial application. Official Kscope 17 mobile apps for <a href="https://itunes.apple.com/us/app/odtug-kscope17/id1228530832?mt=8&amp;utm_source=email&amp;utm_source=email&amp;utm_source=email&amp;utm_source=email&amp;utm_source=email&amp;utm_campaign=Mobile_app_and_Kscope_Go_&amp;utm_campaign=Mobile_app_and_Kscope_Go_&amp;utm_campaign=Mobile_app_and_Kscope_Go_&amp;utm_campaign=Mobile_app_and_Kscope_Go_&amp;utm_campaign=Mobile_app_and_Kscope_Go_&amp;cmp=1&amp;cmp=1&amp;cmp=1&amp;cmp=1&amp;cmp=1&amp;utm_medium=HTMLEmail&amp;utm_medium=HTMLEmail&amp;utm_medium=HTMLEmail&amp;utm_medium=HTMLEmail&amp;utm_medium=HTMLEmail&amp;utm_source=email&amp;utm_campaign=Mobile_app_and_Kscope_Go_&amp;cmp=1&amp;utm_medium=HTMLEmail" target="_blank" rel="noopener">Apple iOS</a> and <a href="https://play.google.com/store/apps/details?id=com.crowdcompass.appoYMYOqXoRT&amp;utm_source=email&amp;utm_source=email&amp;utm_source=email&amp;utm_source=email&amp;utm_source=email&amp;utm_campaign=Mobile_app_and_Kscope_Go_&amp;utm_campaign=Mobile_app_and_Kscope_Go_&amp;utm_campaign=Mobile_app_and_Kscope_Go_&amp;utm_campaign=Mobile_app_and_Kscope_Go_&amp;utm_campaign=Mobile_app_and_Kscope_Go_&amp;cmp=1&amp;cmp=1&amp;cmp=1&amp;cmp=1&amp;cmp=1&amp;utm_medium=HTMLEmail&amp;utm_medium=HTMLEmail&amp;utm_medium=HTMLEmail&amp;utm_medium=HTMLEmail&amp;utm_medium=HTMLEmail&amp;utm_source=email&amp;utm_campaign=Mobile_app_and_Kscope_Go_&amp;cmp=1&amp;utm_medium=HTMLEmail" target="_blank" rel="noopener">Google Android</a>.</p><h1 id="Presentations"><a href="#Presentations" class="headerlink" title="Presentations"></a>Presentations</h1><p>I’ll be giving / participating in the following presentations:</p><h2 id="Explore-the-APEX-APIs"><a href="#Explore-the-APEX-APIs" class="headerlink" title="Explore the APEX APIs"></a>Explore the APEX APIs</h2><p><strong>When</strong>: Jun 26, 2017, Monday Session 5 , 4:45 pm - 5:45 pm<br><strong>Room</strong>: Cibolo Canyon 5</p><p>Most developers new to APEX aren’t aware that APEX comes with a plethora of very powerful APIs for both PL/SQL and JavaScript. This presentation will highlight some of these APIs and explain how and when to use them to speed up and simplify developing your APEX applications. New 5.1 APIs will also be discussed.</p><h2 id="Open-Source-PL-SQL-Utility-Tools-for-Oracle"><a href="#Open-Source-PL-SQL-Utility-Tools-for-Oracle" class="headerlink" title="Open Source PL/SQL Utility Tools for Oracle"></a>Open Source PL/SQL Utility Tools for Oracle</h2><p><em>Note: this is in the Database track rather than the APEX track. More about this below.</em></p><p><strong>When</strong>: Jun 28, 2017, Wednesday Session 14 , 1:45 pm - 2:45 pm<br><strong>Room</strong>: Verbena/Periwinkle</p><p><a href="https://github.com/oraopensource/oos-utils" target="_blank" rel="noopener">OOS Utils</a> is a free open-source PL/SQL tool set for common utility functionality that developers use. Its goal is to prevent developers from having to rewrite the same code over and over again.</p><p>This presentation will highlight some of the great features of OOS Utils and showcase some future plans for the project. All audience types (DBAs, PL/SQL and APEX developers, and development managers) are encouraged to attend, as all will see immediate benefits for themselves or their teams to use.</p><h2 id="LetsWreckThisTogether-APEX-Talks"><a href="#LetsWreckThisTogether-APEX-Talks" class="headerlink" title="#LetsWreckThisTogether APEX Talks"></a>#LetsWreckThisTogether APEX Talks</h2><p><em>This is a 2 hour session with many of the APEX gurus giving 10 minute lightning talks. My 10 min talk is called “Optimizing Laziness” and will be about how to develop more efficiently.</em></p><p><strong>When</strong>: Jun 29, 2017, Deep-Dive Session, 9:00 am - 11:00 am<br><strong>Room</strong>: Grand Oaks G</p><p>Just in case you have not received enough inspiring content by the end of the week, the #LetsWreckThisTogether APEX Talks is back. At last year’s Kscope, this exciting new format was a success.</p><p>Instead of long, in-depth “deep dives” on a single topic. The APEX track of the conference will close with Lightning Talks presented by some of the best and well-known speakers and personalities in the APEX world.</p><p>The exact lineup will be announced closer to the event.</p><h2 id="Insum-Vendor-Presentation"><a href="#Insum-Vendor-Presentation" class="headerlink" title="Insum Vendor Presentation"></a>Insum Vendor Presentation</h2><p>When: Jun 27, 2017, Tuesday Vendor Presentation, 9:45 am - 10:45 am<br>Room: Cibolo Canyon 5<br>Topic: Vendor Presentation - Subtopic: Vendor Presentation</p><p>We’re doing something very different this year for our vendor presentation. Instead of a pre-canned talk we’re letting you decide what we talk about. Think <a href="https://en.wikipedia.org/wiki/Choose_Your_Own_Adventure" target="_blank" rel="noopener">Choose Your Own Adventure</a> but instead of stories we’ve got some great mini APEX presentations to chose from. You can vote right now for what you’d like to see in this presentation: <a href="http://bit.ly/insum-vote-kscope17" target="_blank" rel="noopener">bit.ly/insum-vote-kscope17</a>! If you aren’t going to be at Kscope 17 we still encourage you to vote as we may do webinars on some of the top topics. We also have a full <a href="https://www.insum.ca/breadboard-innovation-oracle-apex/" target="_blank" rel="noopener">blog post</a> about this.</p><h1 id="Other-Kscope-News"><a href="#Other-Kscope-News" class="headerlink" title="Other Kscope News"></a>Other Kscope News</h1><h2 id="Monday-Night-Events"><a href="#Monday-Night-Events" class="headerlink" title="Monday Night Events"></a>Monday Night Events</h2><p>Monday night is all about communities at Kscope. APEX will have its annual Open Mic Night which is one of my favorite events at Kscope. If you have an APEX application you’d like to show off this is the place to do it!</p><p>The Database Community is changing things up and doing something similar to APEX with its own twist. It will be a combination of lightning talks and a variety show. I can’t speak for the later but if you have some cool PL/SQL, SQL, etc that you’d like to show off in 5 minutes or less this is the place to do it! I may have a few demos up my sleeve that I may show if there’s any room on the signup list.</p><p>More information about all the Monday night events can be found <a href="http://kscope17.com/events/community-nigh-events" target="_blank" rel="noopener">here</a>.</p><h2 id="APEX-Speakers-in-the-Database-Track"><a href="#APEX-Speakers-in-the-Database-Track" class="headerlink" title="APEX Speakers in the Database Track"></a>APEX Speakers in the Database Track</h2><p>This year we asked some of our top APEX speakers to give presentations in the Database track. The reason behind it is that APEX developers do a lot of PL/SQL and SQL and we’re hoping that these presenters will encourage some of the APEX attendees to check out the Database presentations. Here are the APEX speakers giving talks in the Database track:</p><ul><li>Open-Source PL/SQL Utility Tools for Oracle - Martin D’Souza</li><li>Six Reasons Why You Will Get Addicted to SQLcl Scripting - Sabine Heimsath</li><li>Oracle 12c for Developers - Alex Nuijten</li></ul><h2 id="Twitter"><a href="#Twitter" class="headerlink" title="Twitter"></a>Twitter</h2><p>Keep up to date on all the Kscope news by following the <a href="https://twitter.com/hashtag/kscope17" target="_blank" rel="noopener">#kscope17</a> on Twitter.</p><h1 id="Wrapping-Up"><a href="#Wrapping-Up" class="headerlink" title="Wrapping Up"></a>Wrapping Up</h1><p>For those going to Kscope 17 see you in a few weeks and be sure to say hi!</p><p>- Martin</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;I’ll be attending and presenting at this year’s &lt;a href=&quot;http://kscope17.com&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;ODTUG Kscope 17&lt;/a&gt;. Here ar
      
    
    </summary>
    
    
      <category term="kscope" scheme="http://www.talkapex.com/tags/kscope/"/>
    
      <category term="odtug" scheme="http://www.talkapex.com/tags/odtug/"/>
    
  </entry>
  
</feed>
