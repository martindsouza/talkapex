<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>TalkApex</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="TalkApex">
<meta property="og:url" content="http://www.talkapex.com/page/26/index.html">
<meta property="og:site_name" content="TalkApex">
<meta property="article:author" content="Martin Giffy D&#39;Souza">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@martindsouza">
  
    <link rel="alternate" href="/atom.xml" title="TalkApex" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 4.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <!-- <div id="banner"></div> -->
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <img src="/images/header-banner.png" alt="" />
      <!-- <h1 id="logo-wrap">
        <a href="/" id="logo">TalkApex</a>
      </h1> -->
      <!-- 
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Martin Giffy D&#39;Souza on Oracle APEX</a>
        </h2>
       -->
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://www.talkapex.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-enhanced-apex-session-timeouts" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2009/09/enhanced-apex-session-timeouts/" class="article-date">
  <time datetime="2009-09-21T15:00:00.000Z" itemprop="datePublished">2009-09-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2009/09/enhanced-apex-session-timeouts/">Enhanced APEX Session Timeouts</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>APEX has built in logic to set the lifetime of a session. <em>To configure this option go to Shared Components / Edit Security Attributes / Maximum Session Idle Time in Seconds and set the time in seconds.</em></p>
<p>This essentially terminates the user’s session in the database and the next time they submit the page they’ll be redirected to the login screen. <strong><em>The user will only know that they are logged out once they submit the page</em></strong>. If you have an Interactive Report (IR), or use Partial Page Refresh (PPR) the users won’t know they’re logged out. Instead it will look as though the report is still trying to load.</p>
<p><a href="http://2.bp.blogspot.com/_33EF80fk9sM/SrZjdKYpklI/AAAAAAAADqs/GPxkwVTc1Ow/s1600-h/apex_session_timeout_ir_ex.PNG" target="_blank" rel="noopener"><img src="http://2.bp.blogspot.com/_33EF80fk9sM/SrZjdKYpklI/AAAAAAAADqs/GPxkwVTc1Ow/s400/apex_session_timeout_ir_ex.PNG" alt=""></a><br>Another situation that may happen is that the user is filling out a long form on your page, their session timesout, then they click “submit”. They’ll be redirected to the login page and they’ll lose all the information that they entered.</p>
<p>What if a user wants to extend their session? i.e. they haven’t done anything to the page but would like a warning message before we automatically log them out? Or they are entering a log form and don’t want to be logged out? I got this idea from the <a href="http://www.aircanada.com/" target="_blank" rel="noopener">Air Canada</a> web site when I was booking tickets. I really liked the fact that they let me know that they were to end my session, and gave me the option to extend my session.</p>
<p><a href="http://3.bp.blogspot.com/_33EF80fk9sM/SrZjlS8xbPI/AAAAAAAADq0/GlyvVtBhr2Y/s1600-h/ac_session_timeout.PNG" target="_blank" rel="noopener"><img src="http://3.bp.blogspot.com/_33EF80fk9sM/SrZjlS8xbPI/AAAAAAAADq0/GlyvVtBhr2Y/s400/ac_session_timeout.PNG" alt=""></a><br>The following solution will allow you to use APEX’s session timeout and resolve the issues listed above. You can view the demo here: <a href="http://apex.oracle.com/pls/otn/f?p=20195:2600" target="_blank" rel="noopener">http://apex.oracle.com/pls/otn/f?p=20195:2600</a></p>
<p><em>Please note that since the demo page is set to public you can refresh after the session is supposed to have timedout and it will still work. If you set the Idle Session in APEX, this will work for pages that require authentication.</em></p>
<p><a href="http://2.bp.blogspot.com/_33EF80fk9sM/SrZkYgKz7_I/AAAAAAAADrM/U8se-ZIHyIw/s1600-h/apex_session_extend.PNG" target="_blank" rel="noopener"><img src="http://2.bp.blogspot.com/_33EF80fk9sM/SrZkYgKz7_I/AAAAAAAADrM/U8se-ZIHyIw/s400/apex_session_extend.PNG" alt=""></a><br><a href="http://2.bp.blogspot.com/_33EF80fk9sM/SrZj0SLARDI/AAAAAAAADrE/0ywt1wBNUNA/s1600-h/apex_session_ended.PNG" target="_blank" rel="noopener"><img src="http://2.bp.blogspot.com/_33EF80fk9sM/SrZj0SLARDI/AAAAAAAADrE/0ywt1wBNUNA/s400/apex_session_ended.PNG" alt=""></a><br>Here’s a high level overview of what this solution does:</p>
<ul>
<li>Start a timer (pingApexSession) that will constantly “ping” (therefore refresh) your APEX session every X seconds.</li>
<li>Start a timer (idleTimer) to detect movement on the page.</li>
<li>If the idleTimer times out, give the user the option to extend session</li>
<li>If the user does not extend their session, terminate their session<br><em>I haven’t put this code into a production application yet. As I mention below, I plan to make a jQuery plugin for this, so if you please send me any feedback that would be useful fur the plugin.</em></li>
</ul>
<p>This solution uses <a href="http://jquery.com" target="_blank" rel="noopener">jQuery</a> and the following plugins:</p>
<ul>
<li><a href="http://www.ericmmartin.com/projects/simplemodal/" target="_blank" rel="noopener">Simple Modal</a></li>
<li><a href="http://paulirish.com/2009/jquery-idletimer-plugin/" target="_blank" rel="noopener">jQuery idleTimer</a></li>
<li><a href="http://tylermuth.wordpress.com/2009/08/19/japex-a-jquery-plugin-for-apex/" target="_blank" rel="noopener">jApex</a></li>
<li><a href="http://keith-wood.name/countdown.html" target="_blank" rel="noopener">jQuery Countdown</a></li>
</ul>
<h2 id="Create-Application-Process-AP-NULL"><a href="#Create-Application-Process-AP-NULL" class="headerlink" title="Create Application Process: AP_NULL"></a>Create Application Process: AP_NULL</h2><ul>
<li>Process Point: On Demand</li>
<li>Name: AP_NULL</li>
<li>Type: PL/SQL Anonymous Block</li>
<li>Process Text: NULL;</li>
</ul>
<h2 id="Create-Application-Process-AP-LOGOUT"><a href="#Create-Application-Process-AP-LOGOUT" class="headerlink" title="Create Application Process: AP_LOGOUT"></a>Create Application Process: AP_LOGOUT</h2><ul>
<li>Process Point: On Demand</li>
<li>Name: AP_LOGOUT</li>
<li>Type: PL/SQL Anonymous Block</li>
<li>Process Text:</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">begin</span></span><br><span class="line">  apex_custom_auth.logout(</span><br><span class="line">    p_this_app =&gt; :app_id,</span><br><span class="line">    p_next_app_page_sess =&gt; :app_id || <span class="string">':1'</span>);</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>

<h2 id="Create-Region-“Extend-Session”-on-Page-0"><a href="#Create-Region-“Extend-Session”-on-Page-0" class="headerlink" title="Create Region: “Extend Session” on Page 0"></a>Create Region: “Extend Session” on Page 0</h2><ul>
<li>Title: Extend Session</li>
<li>Type: HTML Text</li>
<li>Static ID: P0_REG_EXTEND_SESSION</li>
<li>Region Attributes: style=”display:none”</li>
<li>Region Source: <code>Your session will timeout in: &lt;span id=&quot;timeoutCountdownDisplay&quot; style=&quot;font-weight:bold&quot;&gt;&lt;/span&gt;</code><br><em>You can put whatever message you want. Just make sure the span tags exist for the countdown timer.</em></li>
</ul>
<h2 id="Create-Button-“Extend-Session”-on-Page-0"><a href="#Create-Button-“Extend-Session”-on-Page-0" class="headerlink" title="Create Button: “Extend Session” on Page 0"></a>Create Button: “Extend Session” on Page 0</h2><ul>
<li>Button Name: EXTEND_SESSION</li>
<li>Text Label: Extend Session</li>
<li>Display in Region: Extend Session</li>
<li>Target is a: URL</li>
<li>URL Target: javascript:gTimeout.timers.killSession.liveFn();</li>
</ul>
<h2 id="Create-Region-“Session-Timedout”-on-Page-0"><a href="#Create-Region-“Session-Timedout”-on-Page-0" class="headerlink" title="Create Region: “Session Timedout” on Page 0"></a>Create Region: “Session Timedout” on Page 0</h2><ul>
<li>Title: Session Ended</li>
<li>Type: HTML Text</li>
<li>Static ID: <code>P0_REG_SESSION_ENDED</code></li>
<li>Region Attributes: <code>style=&quot;display:none&quot;</code></li>
<li>Region Source: Your session has ended. Please login.</li>
</ul>
<h2 id="Create-Button-“Login”-on-Page-0"><a href="#Create-Button-“Login”-on-Page-0" class="headerlink" title="Create Button: “Login” on Page 0"></a>Create Button: “Login” on Page 0</h2><ul>
<li>Button Name: LOGIN</li>
<li>Text Label: Login</li>
<li>Display in Region: Session Ended</li>
<li>Target is a: Page in this Application</li>
<li>Page: 1</li>
</ul>
<h2 id="Create-Region-“JavaScript-Session-Timeout”-on-Page-0"><a href="#Create-Region-“JavaScript-Session-Timeout”-on-Page-0" class="headerlink" title="Create Region: “JavaScript - Session Timeout” on Page 0"></a>Create Region: “JavaScript - Session Timeout” on Page 0</h2><ul>
<li>Title: JavaScript - Session Timeout</li>
<li>Type: HTML Text</li>
<li>Template: No Template</li>
<li>Region Source:</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"#APP_IMAGES#jquery-1.3.2.min.js"</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"#APP_IMAGES#jquery.simplemodal-1.3.min.js"</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"#APP_IMAGES#idle-timer-0.7.080609.js"</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"#APP_IMAGES#jquery.jApex.0.9.2.js"</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"#APP_IMAGES#jquery.countdown-1.5.3.js"</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="actionscript">  <span class="comment">//*** Insert script from below ***/</span></span></span><br><span class="line"><span class="actionscript">  <span class="comment">//Removed for display purposes</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><em>You’ll need to upload the JS files beforehand. Please see the list above to obtain the files.</em></p>
<p>Here’s the script to put into the region above. I separated them for display purposes.</p>
<p>I probably should have created this as a jQuery plugin. I may convert it later on.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gTimeout = &#123;</span><br><span class="line">  <span class="comment">//debug</span></span><br><span class="line">  debug: <span class="literal">false</span>, <span class="comment">//Set to True to turn on debugging</span></span><br><span class="line">  debugFn: <span class="function"><span class="keyword">function</span>(<span class="params">pMsg</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (gTimeout.debug)&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(pMsg);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, <span class="comment">//debug</span></span><br><span class="line">  modalRegions: &#123;</span><br><span class="line">    <span class="comment">//Region that contains the "Extend Session" information</span></span><br><span class="line">    extendSession: &#123;</span><br><span class="line">      id: <span class="string">'P0_REG_EXTEND_SESSION'</span>,</span><br><span class="line">      backgroundColor: <span class="string">'#CCC'</span>,</span><br><span class="line">      opacity: <span class="number">70</span>,</span><br><span class="line">      openFn: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        gTimeout.debugFn(<span class="string">'gTimeout.modalRegions.extendSession.openFn'</span>);</span><br><span class="line">        <span class="comment">// Start display timeout counter</span></span><br><span class="line">        $(<span class="string">'#timeoutCountdownDisplay'</span>).countdown(<span class="string">'destroy'</span>);</span><br><span class="line">        $(<span class="string">'#timeoutCountdownDisplay'</span>).countdown(&#123;</span><br><span class="line">          until: <span class="string">'+'</span> + (gTimeout.timers.killSession.time / <span class="number">1000</span>),</span><br><span class="line">          compact: <span class="literal">true</span>,</span><br><span class="line">          format: <span class="string">'M:S'</span></span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">// Load modal box to give user option to extend session</span></span><br><span class="line">        $(<span class="string">'#'</span> + gTimeout.modalRegions.extendSession.id).modal(&#123;</span><br><span class="line">          overlayCss: &#123;<span class="attr">backgroundColor</span>: <span class="keyword">this</span>.backgroundColor&#125;,</span><br><span class="line">          opacity: <span class="keyword">this</span>.opacity</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;, <span class="comment">//openFn</span></span><br><span class="line">      closeFn: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        gTimeout.debugFn(<span class="string">'gTimeout.modalRegions.extendSession.closeFn'</span>);</span><br><span class="line">        $.modal.close();</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;<span class="comment">//closeFn</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//Region that will be displayed if the user does not extend thier session</span></span><br><span class="line">    sessionEnded: &#123;</span><br><span class="line">      id: <span class="string">'P0_REG_SESSION_ENDED'</span>,</span><br><span class="line">      backgroundColor: <span class="string">'black'</span>,</span><br><span class="line">      opacity: <span class="number">70</span>,</span><br><span class="line">      openFn: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        gTimeout.debugFn(<span class="string">'gTimeout.modalRegions.sessionEnded.openFn'</span>);</span><br><span class="line">        <span class="comment">// Close Extend Sessios modal window</span></span><br><span class="line">        gTimeout.modalRegions.extendSession.closeFn();</span><br><span class="line">        <span class="comment">// Open Logout modal window</span></span><br><span class="line">        $(<span class="string">'#'</span> + gTimeout.modalRegions.sessionEnded.id).modal(&#123;</span><br><span class="line">          overlayCss: &#123;<span class="attr">backgroundColor</span>: <span class="keyword">this</span>.backgroundColor&#125;,</span><br><span class="line">          opacity: <span class="keyword">this</span>.opacity</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;<span class="comment">// openFn</span></span><br><span class="line">    &#125;<span class="comment">//sessionEnded</span></span><br><span class="line">  &#125;,<span class="comment">//modalRegions</span></span><br><span class="line">  timers: &#123;</span><br><span class="line">    <span class="comment">//Ping APEX Session timer will update the database session timer</span></span><br><span class="line">    pingApexSession: &#123;</span><br><span class="line">      id: <span class="number">-1</span>,</span><br><span class="line">      time: <span class="number">5000</span>, <span class="comment">//Time to keep database session alive. This should be really close to the APEX idle time</span></span><br><span class="line">      loadFn: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        gTimeout.debugFn(<span class="string">'gTimeout.timers.pingApexSession.loadFn:'</span>);</span><br><span class="line">        <span class="keyword">this</span>.id = setTimeout(<span class="string">'gTimeout.timers.pingApexSession.fn();'</span>, <span class="keyword">this</span>.time);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;,</span><br><span class="line">      unloadFn: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        gTimeout.debugFn(<span class="string">'gTimeout.timers.pingApexSession.unloadFn:'</span>);</span><br><span class="line">        clearTimeout(<span class="keyword">this</span>.id);</span><br><span class="line">        <span class="keyword">this</span>.id = <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;,<span class="comment">//unloadFn</span></span><br><span class="line">      fn: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        gTimeout.debugFn(<span class="string">'gTimeout.timers.pingApexSession.fn: Extending APEX Session'</span>);</span><br><span class="line">        jQuery.jApex.ajax(&#123;</span><br><span class="line">          appProcess: <span class="string">'AP_NULL'</span>,</span><br><span class="line">          success: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;,</span><br><span class="line">          <span class="keyword">async</span>: <span class="literal">true</span></span><br><span class="line">        &#125;);</span><br><span class="line">        gTimeout.timers.pingApexSession.loadFn();</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;<span class="comment">//fn</span></span><br><span class="line">    &#125;,<span class="comment">//pingApexSessions</span></span><br><span class="line">    <span class="comment">//Kill current session. This is called when the user gets the option to extend their session</span></span><br><span class="line">    killSession: &#123;</span><br><span class="line">      id: <span class="number">-1</span>,</span><br><span class="line">      time: <span class="number">5000</span>, <span class="comment">// Time to kill the APEX session once launched. Should only be run when extend session popup box is loaded</span></span><br><span class="line">      loadFn: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        gTimeout.debugFn(<span class="string">'gTimeout.timers.killSession.loadFn:'</span>);</span><br><span class="line">        <span class="keyword">this</span>.id = setTimeout(<span class="string">'gTimeout.timers.killSession.killFn();'</span>, <span class="keyword">this</span>.time);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;,</span><br><span class="line">      unloadFn: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        gTimeout.debugFn(<span class="string">'gTimeout.timers.killSession.unloadFn: '</span>);</span><br><span class="line">        clearTimeout(<span class="keyword">this</span>.id);</span><br><span class="line">        <span class="keyword">this</span>.id = <span class="number">-1</span>;</span><br><span class="line">        gTimeout.modalRegions.extendSession.closeFn(); <span class="comment">// Close extendSession Modal</span></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;,</span><br><span class="line">      killFn: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        gTimeout.debugFn(<span class="string">'gTimeout.timers.killSession.killFn: Killing APEX Session'</span>);</span><br><span class="line">        <span class="comment">// Open Logout modal window</span></span><br><span class="line">        gTimeout.modalRegions.sessionEnded.openFn();</span><br><span class="line">        <span class="comment">// Stop ping Apex session</span></span><br><span class="line">        gTimeout.timers.pingApexSession.unloadFn();</span><br><span class="line">        <span class="comment">// Logout APEX session</span></span><br><span class="line">        jQuery.jApex.ajax(&#123;</span><br><span class="line">          appProcess: <span class="string">'AP_LOGOUT'</span>,</span><br><span class="line">          success: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;,</span><br><span class="line">          <span class="keyword">async</span>: <span class="literal">true</span></span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// Prevents the session from being killed. We should be in a about to kill state now</span></span><br><span class="line">      liveFn: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        gTimeout.debugFn(<span class="string">'gTimeout.timers.killSession.liveFn: '</span>);</span><br><span class="line">        <span class="comment">//Check that we're about to be killed</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.id == <span class="number">-1</span>)&#123;</span><br><span class="line">          alert(<span class="string">'Session is not marked to be killed'</span>);</span><br><span class="line">          <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Stop the kill timer</span></span><br><span class="line">        <span class="keyword">this</span>.unloadFn();</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;<span class="comment">//liveFn</span></span><br><span class="line">    &#125;,<span class="comment">//killSession</span></span><br><span class="line">    <span class="comment">// Timer for user movement time</span></span><br><span class="line">    idle:&#123;</span><br><span class="line">      time: <span class="number">5000</span>, <span class="comment">// Time to load the "Extend Session" popup box</span></span><br><span class="line">      loadFn: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        gTimeout.debugFn(<span class="string">'gTimeout.timers.idle.loadFn:'</span>);</span><br><span class="line">        $.idleTimer(<span class="keyword">this</span>.time);</span><br><span class="line">        $(<span class="built_in">document</span>).bind(<span class="string">"idle.idleTimer"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;gTimeout.timers.idle.idleFn();&#125;);</span><br><span class="line">        <span class="comment">// Trigger countdown timer</span></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;,</span><br><span class="line">      idleFn: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        gTimeout.debugFn(<span class="string">'gTimeout.timers.idle.idleFn:'</span>);</span><br><span class="line">        <span class="comment">// Load modal box to give user option to extend session</span></span><br><span class="line">        gTimeout.modalRegions.extendSession.openFn();</span><br><span class="line">        <span class="comment">// Only load if we're not in a kill state</span></span><br><span class="line">        <span class="keyword">if</span> (gTimeout.timers.killSession.id == <span class="number">-1</span>)&#123;</span><br><span class="line">          gTimeout.timers.killSession.loadFn();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125; <span class="comment">//idle Fn     </span></span><br><span class="line">    &#125; <span class="comment">// idle</span></span><br><span class="line">  &#125;,<span class="comment">//timers</span></span><br><span class="line">  loadFn: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    gTimeout.timers.pingApexSession.loadFn(); <span class="comment">// Keep database sessions alive</span></span><br><span class="line">    gTimeout.timers.idle.loadFn(); <span class="comment">// Turn on user idle timer</span></span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;<span class="comment">//loadFn</span></span><br><span class="line"></span><br><span class="line">&#125;;<span class="comment">//gTimeout</span></span><br><span class="line"></span><br><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="comment">// Set Parameters</span></span><br><span class="line">  gTimeout.timers.pingApexSession.time = <span class="number">5</span> * <span class="number">1000</span>; <span class="comment">// Refresh APEX session every 5 seconds. This should be really close to your apex session timeout values</span></span><br><span class="line">  gTimeout.timers.idle.time = <span class="number">10</span> * <span class="number">1000</span>; <span class="comment">// 10 seconds of inactivity will trigger this window</span></span><br><span class="line">  gTimeout.timers.killSession.time = <span class="number">10</span> * <span class="number">1000</span>; <span class="comment">// Once the warning message pops up, user has 10 seconds to extend their session</span></span><br><span class="line">  <span class="comment">// Configure Modal windows (not required)</span></span><br><span class="line">  gTimeout.modalRegions.extendSession.backgroundColor = <span class="string">'#CCC'</span>;</span><br><span class="line"></span><br><span class="line">  gTimeout.loadFn();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.talkapex.com/2009/09/enhanced-apex-session-timeouts/" data-id="ck7mtpuej00bq01qje6vf7n2e" class="article-share-link">Share</a>
      
        <a href="http://www.talkapex.com/2009/09/enhanced-apex-session-timeouts/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/apex/" rel="tag">apex</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/security/" rel="tag">security</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-redirects-for-apex-tabs-instead-of-page" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2009/09/redirects-for-apex-tabs-instead-of-page/" class="article-date">
  <time datetime="2009-09-17T15:00:00.000Z" itemprop="datePublished">2009-09-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2009/09/redirects-for-apex-tabs-instead-of-page/">Redirects for APEX Tabs instead of page submits</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>With APEX Tabs you may not want the page to be submitted each time the user clicks on a tab. If you look at the link for the tabs they look like: <span style="font-style:italic">javascript:doSubmit(‘xxxx’);</span> Where “xxx” is the name of the tab. “doSubmit” will submit the page and could trigger page computations, validations, and processes. If all you want to do is use the tabs as a form of navigation (i.e. when you click on a tab it redirects to another page) then this could cause some problems.</p>
<p>To avoid triggering Page Processing on tabs you can modify all the conditions on your Page Process (this could be very long) or change the link. They’re multiple ways to change the links, here’s a simple one using <a href="http://jquery.com" target="_blank" rel="noopener">jQuery</a>.</p>
<p>Here’s a link to the demo: <a href="http://apex.oracle.com/pls/otn/f?p=20195:2500" target="_blank" rel="noopener">http://apex.oracle.com/pls/otn/f?p=20195:2500</a>. Note, in the demo I don’t trigger the javascript to change the link automatically so you can see what they look like before and after changing the links.</p>
<p><span style="font-weight:bold;">- Create an Application Process</span><br><span style="font-style:italic">Note: You may want to only apply this to certain pages depending on the use case</span></p>
<p>Name: AP_UNSUBMIT_TABS<br>Process Point: On Load: After Header</p>
<pre class="brush: sql">
BEGIN
  FOR x IN (SELECT tab_name,
                   tab_page,
                      '<span class="apexTabURLs" tabname="'
                   || tab_name
                   || '" tabnewurl="'
                   || apex_util.prepare_url (   'f?p='
                                             || :app_id
                                             || ':'
                                             || tab_page
                                             || ':'
                                             || :app_session
                                             || ':'
                                             || tab_name
                                             || '::'
                                             || tab_page
                                             || '::')
                   || '"></span>' tabinfo
              FROM apex_application_tabs t
             WHERE application_id = :app_id)
  LOOP
    HTP.p (x.tabinfo);
  END LOOP;
END;
</pre>

<p><span style="font-weight:bold;">- Create a HTML region</span><br><span style="font-style:italic">Note: You’ll need to install the jQuery JS file in Shared Components / Static Files</span></p>
<pre class="brush: html">
<script src="#APP_IMAGES#jquery-1.3.2.min.js" type="text/javascript"></script>
<script type="text/javascript">
  $('span.apexTabURLs').each(function(i){
    var vTabName = $(this).attr('tabname');
    var vNewUrl = $(this).attr('tabnewurl');
    $('#t20Tabs a[href="javascript:doSubmit(\'' + vTabName + '\');"]').attr('href',vNewUrl);
  });
  // Remove the extra span tags
  $('span.apexTabURLs').remove();
</script>  
</pre>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.talkapex.com/2009/09/redirects-for-apex-tabs-instead-of-page/" data-id="ck7mtpue600bg01qj1mlahifs" class="article-share-link">Share</a>
      
        <a href="http://www.talkapex.com/2009/09/redirects-for-apex-tabs-instead-of-page/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/apex/" rel="tag">apex</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-tooltip-help-in-apex-alternative-to" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2009/09/tooltip-help-in-apex-alternative-to/" class="article-date">
  <time datetime="2009-09-15T15:00:00.000Z" itemprop="datePublished">2009-09-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2009/09/tooltip-help-in-apex-alternative-to/">Tooltip Help in APEX: An alternative to popup help</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>The default help functionality for APEX is ok but can cause some problems with users browsers since it uses popup windows to display the help. If you do some digging around regarding web development best practices you’ll find a lot of articles discussing why you should avoid popup windows. Instead of using the default help popup windows I prefer to use tooltips to display the help. Besides avoiding the popup window, tooltips generate a good user experience by displaying item help very quickly.</p>
<p>This demo uses a jQuery tooltip plugin: <a href="http://bassistance.de/jquery-plugins/jquery-plugin-tooltip/" target="_blank" rel="noopener">http://bassistance.de/jquery-plugins/jquery-plugin-tooltip/</a>. Please visit the Bassistance website to find out how to configure the look and feel of the tool tips.</p>
<p>Here’s a link to the demo: <a href="http://apex.oracle.com/pls/otn/f?p=20195:2400" target="_blank" rel="noopener">http://apex.oracle.com/pls/otn/f?p=20195:2400</a></p>
<p><a href="http://1.bp.blogspot.com/_33EF80fk9sM/Sq0Cb8Ae2WI/AAAAAAAADqc/flO0nQATWCA/s1600-h/tooltiphelp.jpg" target="_blank" rel="noopener"><img src="http://1.bp.blogspot.com/_33EF80fk9sM/Sq0Cb8Ae2WI/AAAAAAAADqc/flO0nQATWCA/s400/tooltiphelp.jpg" alt=""></a></p>
<p><span style="font-weight:bold;">- Create or Update Label Template</span><br><span style="font-style: italic;">Note: You don’t need to create a new template. If you want to, just update the existing templates</span></p>
<ul>
<li><p>Copy the “Optional Label with Help” and rename to “Optional Label with ToolTip”.<br><span style="font-style: italic;">Note: You can do this for required labels as well</span></p>
</li>
<li><p>Change the “Before Label” From:<br>&lt;label for=”#CURRENT_ITEM_NAME#” tabindex=”999”&gt;&lt;a class=”t20OptionalLabelwithHelp” href=”javascript:popupFieldHelp(‘#CURRENT_ITEM_ID#’,’&amp;SESSION.’)” tabindex=”999”&gt;</p>
</li>
</ul>
<p>To:<br><span style="font-style: italic;">I removed the href reference and replaced with #</span><br>&lt;label for=”#CURRENT_ITEM_NAME#” tabindex=”999”&gt;&lt;a class=”t20OptionalLabelwithHelp” href=”#” tabindex=”999”&gt;</p>
<p><span style="font-weight:bold;">- Create a HTML region</span><br><span style="font-style: italic;">This can be done on P0 to load for each page</span><br><span style="font-style: italic;">Don’t forget to upload the <a href="http://jquery.com/" target="_blank" rel="noopener">jQuery</a> and <a href="http://bassistance.de/jquery-plugins/jquery-plugin-tooltip/" target="_blank" rel="noopener">tooltip</a> JS files into Shared Components / Static Files</span></p>
<pre class="brush: html">
<script src="#APP_IMAGES#jquery-1.3.2.min.js" type="text/javascript"></script>
<script src="#APP_IMAGES#jquery.tooltip.pack-1.3.js" type="text/javascript"></script>

<script type="text/javascript">

$(document).ready(function(){
  $('span.itemToolTip').each(function(i){
    $('label[for="' +  $(this).attr('foritem') + '"]').attr('title',$(this).html()).tooltip({
        track: true,
        delay: 0,
        showURL: false,
        showBody: " - ",
        fade: 250
      });
  });
  // Remove Original ToolTip Help Text
  $('span.itemToolTip').remove();
});
</script>

<style>
#tooltip {
 position: absolute;
 z-index: 3000;
 border: 1px solid #111;
 background-color: #eee;
 padding: 5px;
 opacity: 0.85;
}
#tooltip h3, #tooltip div { margin: 0; }
</style>
</pre>

<p><span style="font-weight:bold;">- Create an Application Process</span><br>Name: AP_GET_HELP_TEXT<br>Process Point: On Load: After Header</p>
<pre class="brush: sql">
BEGIN
  FOR x IN (SELECT    '<span class="itemToolTip" foritem="'
                   || item_name
                   || '">'
                   || item_help_text
                   || '</span>' help_html
              FROM apex_application_page_items
             WHERE application_id = :app_id
               AND page_id = :app_page_id
               AND item_help_text IS NOT NULL)
  LOOP
    HTP.p (x.help_html);
  END LOOP;
END;
</pre>

<p><span style="font-weight:bold;">- Change Item Labels</span><br>Change Item labels to “Optional Label with ToolTip”. Only do this if you created a new template</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.talkapex.com/2009/09/tooltip-help-in-apex-alternative-to/" data-id="ck7mtpudq00b601qj3a4resbu" class="article-share-link">Share</a>
      
        <a href="http://www.talkapex.com/2009/09/tooltip-help-in-apex-alternative-to/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/apex/" rel="tag">apex</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-updateable-interactive-report-for-apex" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2009/09/updateable-interactive-report-for-apex/" class="article-date">
  <time datetime="2009-09-14T15:00:00.000Z" itemprop="datePublished">2009-09-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2009/09/updateable-interactive-report-for-apex/">Updateable Interactive Report for APEX</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>A colleague had a requirement where he had over 10,000 rows of data which had to be updateable. Using Interactive Reports (IR) was the preferred approach as it would allow users to filter the data to modify the rows they wanted to before submitting the page. Tabular forms wouldn’t work since the page would be to large. This is the solution that I proposed to make “Updateable IRs”.</p>
<p>The following solution will work with IRs and standard reports with pagination. If the users applies filters or paginates to another set of data, the changes they make will remain in the collection. This is using a similar technique that I wrote about for <a href="http://apex-smb.blogspot.com/2009/01/apex-report-with-checkboxes-advanced.html" target="_blank" rel="noopener">APEX Report with checkboxes (advanced)</a>. To summarize this process:</p>
<ul>
<li>Store the current query data into a collection as well as the md5 checksum.</li>
<li>Build an IR against the collection and use APEX_ITEMs to display input fields.*   When a user changes a field, we submit that change to the collection.</li>
<li>Once the user is done with their changes you’ll need to process the collection as required. In the last step in this example I have a query that will help identify changed rows.<br>You can do a lot with this approach but if you don’t have an urgent need I’d suggest holding off until APEX 4.0. They’re some security issues that would need to be addressed before launching this code in a public application. I didn’t include the security updates in this example since I did not want to lose scope of the base functionality. Updating the code to make it secure shouldn’t be too difficult.</li>
</ul>
<p>Here’s the link to the demo: <a href="http://apex.oracle.com/pls/otn/f?p=20195:2300" target="_blank" rel="noopener">http://apex.oracle.com/pls/otn/f?p=20195:2300</a></p>
<p><a href="http://1.bp.blogspot.com/_33EF80fk9sM/SqxaSe21azI/AAAAAAAADqU/xsH4IhHxhwg/s1600-h/updateable_ir.jpg" target="_blank" rel="noopener"><img src="http://1.bp.blogspot.com/_33EF80fk9sM/SqxaSe21azI/AAAAAAAADqU/xsH4IhHxhwg/s400/updateable_ir.jpg" alt=""></a></p>
<p><span style="font-weight: bold;">- Create IR Report Region</span><br><span style="font-style: italic;">Note: You can use this for regular reports with pagination as well</span></p>
<pre class="brush: sql">
SELECT e.empno,
    apex_item.text (2,
                    ac.c002,
                    NULL,
                    NULL,
                       'class="updateableIR" seqid="'
                    || ac.seq_id
                    || '" attrNum="2"'
                   ) ename,
    apex_item.text (3,
                    ac.c003,
                    NULL,
                    NULL,
                       'class="updateableIR" seqid="'
                    || ac.seq_id
                    || '" attrNum="3"'
                   ) job,
    apex_item.select_list_from_query
       (4,
        ac.c004,
           'select E.ENAME d, E.EMPNO r from emp e where E.EMPNO != '
        || e.empno,
        'class="updateableIR" seqid="' || ac.seq_id || '" attrNum="4"',
        'YES',
        NULL,
        '- Manager -'
       ) mgr,
    apex_item.text (5,
                    ac.c005,
                    NULL,
                    NULL,
                       'class="updateableIR" seqid="'
                    || ac.seq_id
                    || '" attrNum="5"'
                   ) hiredate,
    apex_item.text (6,
                    ac.c006,
                    NULL,
                    NULL,
                       'class="updateableIR" seqid="'
                    || ac.seq_id
                    || '" attrNum="6"'
                   ) comm,
    apex_item.select_list_from_query
                       (7,
                        ac.c007,
                        'SELECT d.dname d, d.deptno r FROM dept d',
                           'class="updateableIR" seqid="'
                        || ac.seq_id
                        || '" attrNum="7"',
                        'YES',
                        NULL,
                        '- Department -'
                       ) deptno
FROM apex_collections ac, emp e
WHERE ac.collection_name = :p2300_collection_name AND ac.c001 = e.empno
</pre>

<p><span style="font-weight: bold;">- Create Region Items</span></p>
<ul>
<li>Hidden &amp; Protected: P2300_COLLECTION_NAME</li>
</ul>
<p><span style="font-weight: bold;">- Create Page Computation</span><br><span style="font-style: italic;">Note: This is just to set the collection name. You can call it whatever you want</span></p>
<p>Item: P2300_COLLECTION_NAME<br>Computation Point: Before Header<br>Computation Type: Static Assignment<br>Computation: P2300_IR_COLLECTION</p>
<p><span style="font-weight: bold;">- Create a Page Process  (PL/SQL)</span></p>
<p>Name: Load Collection<br>Process Point: On Lead - Before Header</p>
<pre class="brush: sql">
-- This creates the collection if it isn't created yet.
DECLARE
v_collection_name             apex_collections.collection_name%TYPE
                                                 := :p2300_collection_name;
v_reset_flag                  VARCHAR2 (1) := 'N';
BEGIN
-- Create collection if it does not exist or reset collection required
IF    apex_collection.collection_exists
                                   (p_collection_name            => v_collection_name) =
                                                                     FALSE
  OR v_reset_flag = 'Y'
THEN
 apex_collection.create_collection_from_query
   (p_collection_name            => :p2300_collection_name,
    p_query                      => q'! SELECT empno,
    ename,
    job,
    mgr,
    TO_DATE (hiredate, 'DD-MON-YYYY'),
    comm,
    deptno
FROM emp !',
    p_generate_md5               => 'YES'
   );        -- Generated md5 is important to help identify changed columns
END IF;
END;
</pre>

<p><span style="font-weight: bold;">- Create HTML Region to store JS code:</span><br>Note: This uses <a href="http://jquery.com/" target="_blank" rel="noopener">jQuery</a> and <a href="http://tylermuth.wordpress.com" target="_blank" rel="noopener">Tyler Muth’s</a> <a href="http://tylermuth.wordpress.com/2009/08/19/japex-a-jquery-plugin-for-apex/" target="_blank" rel="noopener">jApex plugin</a>. You’ll have to upload the .js files as static files in Shared Components.</p>
<pre class="brush: html">
<script src="#APP_IMAGES#jquery-1.3.2.min.js" type="text/javascript"></script>
<script src="#APP_IMAGES#jquery.jApex.0.9.2.js" type="text/javascript"></script>

<script type="text/javascript">
/**
 * Updates a cell in a collection
 * @author Martin Giffy D'Souza. http://apex-smb.blogspot.com
 * @param pThis input item that was changed
 *  Must contain the following attributes:
 *  - seqid Seq ID from collection
 *  - attrnum Attribute number (column number)
 * @param pOptions Options
 *  - appProcess: Application process to call
 *  - collectionName: Collection to update
 *  - successFn: Function to execute once completed
 */
function updateCollectionCell(pThis, pOptions){
  var vDefaults = {
    appProcess: 'AP_UPDATE_COLLECTION_CELL',
    collectionName: '',
    successFn: function(){}
  };
  pOptions = jQuery.extend({}, vDefaults, pOptions);  

  // Check that collection name is present
  if (pOptions.collectionName == ''){
    alert('Missing Collection Name');
    return;
  }

  jQuery.jApex.ajax({
    appProcess: pOptions.appProcess,
    success: pOptions.successFn,
    x01: pOptions.collectionName,
    x02: $(pThis).attr('seqid'), //Seq ID
    x03: $(pThis).attr('attrnum'), //Attribute Number (i.e. column number)
    x04: $(pThis).val() // New Value
  });

  return;
}// updateCollectionCell

//Set all updateableIR columns onChange events
$('.updateableIR').live('change',function(){
  updateCollectionCell(this, {
    collectionName: $v('P2300_COLLECTION_NAME'),
    successFn: function(){}
    });
});
</script>
</pre>

<p><span style="font-weight: bold;">- Create Application Process:</span><br>Name: AP_UPDATE_COLLECTION_CELL<br>Process Point: On Demand</p>
<pre class="brush: sql">
-- AP_UPDATE_COLLECTION_CELL
BEGIN
apex_collection.update_member_attribute
                             (p_collection_name            => apex_application.g_x01,
                              p_seq                        => apex_application.g_x02,
                              p_attr_number                => apex_application.g_x03,
                              p_attr_value                 => apex_application.g_x04
                             );
END;
</pre>

<p><span style="font-weight: bold;">- Query to see which rows were changed</span></p>
<pre class="brush: sql">
SELECT ac.collection_name, ac.seq_id, ac.c001, ac.c002, ac.c003, ac.c004,
    ac.c005, ac.c006, ac.c007, ac.md5_original,
    CASE
      WHEN apex_collection.get_member_md5
                                       (:p2300_collection_name,
                                        ac.seq_id) =
                                                ac.md5_original
        THEN 'NO'
      ELSE 'YES'
    END row_change
FROM apex_collections ac
WHERE collection_name = :p2300_collection_name
</pre>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.talkapex.com/2009/09/updateable-interactive-report-for-apex/" data-id="ck7mtpudk00b201qj34oig5yr" class="article-share-link">Share</a>
      
        <a href="http://www.talkapex.com/2009/09/updateable-interactive-report-for-apex/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/apex/" rel="tag">apex</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-apex-rules-guidelines" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2009/09/apex-rules-guidelines/" class="article-date">
  <time datetime="2009-09-02T15:00:00.000Z" itemprop="datePublished">2009-09-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2009/09/apex-rules-guidelines/">APEX Rules &amp; Guidelines</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>After several late nights of nerding I’ve finally submitted/completed my APEX application for the <a href="http://www.oracle.com/technology/products/database/application_express/html/competition.html" target="_blank" rel="noopener">APEX Developer Competition 2009</a>.</p>
<p><strike>You can demo and download the application here: <a href="http://apex.oracle.com/pls/otn/f?p=46865" target="_blank" rel="noopener">http://apex.oracle.com/pls/otn/f?p=46865</a></strike><br><em>Note: Demo is no longer up and will not be supported.</em></p>
<p>This purpose of this application is to allow development teams to create an online Rules &amp; Guidelines development document. The template for this application is based on Patrick Cimolini’s (Cayman Islands Government) presentation at <a href="http://www.odtugkaleidoscope.com/" target="_blank" rel="noopener">ODTUG</a>.</p>
<p>The concept of the R&amp;G template is:</p>
<p><span style="font-weight: bold;">Rule:</span> Follow 100% of the time<br><span style="font-weight: bold;">Guideline:</span> Follow 90% of the time</p>
<p><span style="font-style: italic; font-weight: bold;">Mandatory Headings:</span></p>
<p><span style="font-weight: bold;">Rule/Guideline:</span> Active voice sentence.<br><span style="font-weight: bold;">Why:</span>Important for Team Buy-In</p>
<p><span style="font-style: italic; font-weight: bold;">Optional Headings:</span></p>
<p><span style="font-weight: bold;">Result:</span> Illustration of desired outcome<br><span style="font-weight: bold;">How:</span> How the result is achieved.<br><span style="font-weight: bold;">Notes:</span> State the non-obvious<br><span style="font-weight: bold;">See Also:</span> Point to related Rules and Guidelines</p>
<p>You can use this template for both APEX development and your PL/SQL standards. I’ve included the installation files in the demo application so feel <span style="font-weight: bold;">free</span> to install at your organization. If you are using it please post any comments/suggestions on this post and I’ll try to write some updates.</p>
<p><a href="http://1.bp.blogspot.com/_33EF80fk9sM/Sp4BV-rhSZI/AAAAAAAADqE/DLGLV8dMcs4/s1600-h/rng_screen_shot_01.gif" target="_blank" rel="noopener"><img src="http://1.bp.blogspot.com/_33EF80fk9sM/Sp4BV-rhSZI/AAAAAAAADqE/DLGLV8dMcs4/s400/rng_screen_shot_01.gif" alt=""></a></p>
<p><a href="http://3.bp.blogspot.com/_33EF80fk9sM/Sp4BWTCNUYI/AAAAAAAADqM/kgNcLDgq4Q4/s1600-h/rng_screen_shot_02.gif" target="_blank" rel="noopener"><img src="http://3.bp.blogspot.com/_33EF80fk9sM/Sp4BWTCNUYI/AAAAAAAADqM/kgNcLDgq4Q4/s400/rng_screen_shot_02.gif" alt=""></a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.talkapex.com/2009/09/apex-rules-guidelines/" data-id="ck7mtpudm00b401qj2ivhakfc" class="article-share-link">Share</a>
      
        <a href="http://www.talkapex.com/2009/09/apex-rules-guidelines/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/apex/" rel="tag">apex</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/best-practice/" rel="tag">best-practice</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-apex-xdisableitem" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2009/07/apex-xdisableitem/" class="article-date">
  <time datetime="2009-07-30T15:00:00.000Z" itemprop="datePublished">2009-07-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2009/07/apex-xdisableitem/">APEX: $x_disableItem</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>I had an issue where I disabled a radio button (after selecting a value) using the APEX JavaScript function (<a href="http://download.oracle.com/docs/cd/E10513_01/doc/apirefs.310/e12855/javascript_api.htm#CHDDAHDJ" target="_blank" rel="noopener">$x_disableItem</a>) but my selected value wasn’t being saved.</p>
<p>After some testing I noticed that if I selected a value, disabled the radio, then submitted the page item’s value would be null (empty string).</p>
<p><a href="http://4.bp.blogspot.com/_33EF80fk9sM/SnDhTxFCoLI/AAAAAAAADp8/_zigDWvuY9E/s1600-h/disableItem_01.bmp" target="_blank" rel="noopener"><img src="http://4.bp.blogspot.com/_33EF80fk9sM/SnDhTxFCoLI/AAAAAAAADp8/_zigDWvuY9E/s400/disableItem_01.bmp" alt=""></a><br>You can view an example of this here: <a href="http://apex.oracle.com/pls/otn/f?p=20195:2200" target="_blank" rel="noopener">http://apex.oracle.com/pls/otn/f?p=20195:2200</a></p>
<p>They’re several ways to fix this problem. The easiest would be to “<span style="font-style:italic;">undisable</span>“ (i.e. re-enable) the item before the page is submitted. I know “<span style="font-style:italic;">undisable</span>“ is not a word but to re-enable a page item you need to call the disable function: $x_<span style="font-weight:bold;">disable</span>Item(‘PX’,<span style="font-weight:bold;">false</span>);</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.talkapex.com/2009/07/apex-xdisableitem/" data-id="ck7mtpud800aw01qjh4dh4ukv" class="article-share-link">Share</a>
      
        <a href="http://www.talkapex.com/2009/07/apex-xdisableitem/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/apex/" rel="tag">apex</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/" rel="tag">javascript</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-apex-how-to-pass-multiselect-list" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2009/07/apex-how-to-pass-multiselect-list/" class="article-date">
  <time datetime="2009-07-28T15:00:00.000Z" itemprop="datePublished">2009-07-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2009/07/apex-how-to-pass-multiselect-list/">APEX: How to Pass Multiselect List Values in URL</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>When passing multiselect list values, or any multi LOV, in the URL you may have some unexpected behaviors. Here’s an example: <a href="http://apex.oracle.com/pls/otn/f?p=20195:2100" target="_blank" rel="noopener">http://apex.oracle.com/pls/otn/f?p=20195:2100</a></p>
<p>If you take a look at the example you’ll notice that the URL doesn’t contain all the values that you may have submitted. For example I selected KING (7839), BLAKE (7698), and CLARK (7782). I would expect the URL to contain these values when I pass them via the URL. Instead the URL looks like this:</p>
<blockquote>
<p><span style="font-style:italic;"><a href="http://apex.oracle.com/pls/otn/f?p=20195:2100:1674288126968745::NO" target="_blank" rel="noopener">http://apex.oracle.com/pls/otn/f?p=20195:2100:1674288126968745::NO</a>::<span style="font-weight:bold;">P2100_EMPNO_LIST:7839:7698</span></span><br>Notice how only 2 values are passed in? That’s because the delimiter used in LOVs is the same that is used in the URL. What can be even more confusing is that I selected 3 values but when I pass them in the URL only 1 is “accepted”. This is because the last value in the URL is the “PrinterFriendly” parameter (please see: <a href="http://download.oracle.com/docs/cd/E14373_01/appdev.32/e11838/concept.htm#BEIJCIAG" target="_blank" rel="noopener">http://download.oracle.com/docs/cd/E14373_01/appdev.32/e11838/concept.htm#BEIJCIAG</a>)</p>
</blockquote>
<p>To fix the issue for all your mutli LOVs you can use a similar technique that I used to resolve the <a href="http://apex-smb.blogspot.com/2009/07/how-to-resolve-null-issue-in-apex-lovs.html" target="_blank" rel="noopener">%null% issue</a>. An example of the fix can be found here: <a href="http://apex.oracle.com/pls/otn/f?p=20195:2110" target="_blank" rel="noopener">http://apex.oracle.com/pls/otn/f?p=20195:2110</a>. If you take a look at the example and select several employees the URL now looks like this:</p>
<blockquote>
<p><a href="http://apex.oracle.com/pls/otn/f?p=20195:2110:1674288126968745::NO" target="_blank" rel="noopener">http://apex.oracle.com/pls/otn/f?p=20195:2110:1674288126968745::NO</a>::<span style="font-weight:bold;">P2110_EMPNO_LIST:7839<em>7698</em>7782</span><br>Notice how the delimiters are *s for the empnos?</p>
</blockquote>
<p>1- Create Application Process to replace colon delimiter with *<br><span style="font-style:italic;">Note: You aren’t limited to using * as your delimiter</span></p>
<p>Name: AP_REMOVE_URL_DELIM_FROM_ITEMS<br>Sequence: -10   (helps ensure that it is run before any other process<br>Point: On Submit: After Page Submission - Before Computations and Validations</p>
<pre class="brush: sql">
BEGIN
  FOR x IN (SELECT item_name,
                   REPLACE (v (item_name), ':', '*') new_item_value
              FROM (SELECT item_name
                      FROM apex_application_page_items aapi
                     WHERE aapi.application_id = :app_id
                       AND aapi.page_id = :app_page_id
                       AND LOWER (display_as) IN ('checkbox', 'shuttle', 'select list', 'multiselect list') -- Limiting to these types. Can remove if you want to handle all types
                       AND ROWNUM > 0) x
             WHERE INSTR (v (x.item_name), ':') > 0) LOOP
    apex_util.set_session_state (x.item_name, x.new_item_value);
  END LOOP;
END;
</pre>

<p><span style="font-style:italic;color:red;">Note: This will replace the colon delimiter with a *. This may change some of your validations, page processes etc.</span></p>
<p>2- Create Application Process to replace * with colon delimiter on page load</p>
<p>Name: AP_RESET_URL_DELIM_FROM_ITEMS<br>Sequence: -10   (helps ensure that it is run before any other process)<br>Point: On Load: Before Header (page template header)</p>
<pre class="brush: sql">
BEGIN
  FOR x IN
    (SELECT item_name,
            REPLACE (v (item_name), '*', ':') new_item_value
       FROM (SELECT item_name
               FROM apex_application_page_items aapi
              WHERE aapi.application_id = :app_id
                AND aapi.page_id = :app_page_id
                AND LOWER (display_as) IN
                      ('checkbox', 'shuttle', 'select list', 'multiselect list')   -- Limiting to these types. Can remove if you want
                AND ROWNUM > 0) x
      WHERE INSTR (v (x.item_name), '*') > 0) LOOP
    apex_util.set_session_state (x.item_name, x.new_item_value);
  END LOOP;
END;
</pre>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.talkapex.com/2009/07/apex-how-to-pass-multiselect-list/" data-id="ck7mtpudg00b001qj56kedclq" class="article-share-link">Share</a>
      
        <a href="http://www.talkapex.com/2009/07/apex-how-to-pass-multiselect-list/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/apex/" rel="tag">apex</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-oracle-how-to-update-all-sequences" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2009/07/oracle-how-to-update-all-sequences/" class="article-date">
  <time datetime="2009-07-24T15:00:00.000Z" itemprop="datePublished">2009-07-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2009/07/oracle-how-to-update-all-sequences/">Oracle: How to update all sequences</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>If you ever do data refreshes from production to development or test environments you may run into an issue where your sequences are not up to date. It seems that Oracle exports the sequences first, then the data. If your sequence numbers change during the entire export process you may get errors when using them in your refreshed schema.</p>
<p>To fix this problem you can try to find where your sequences are used and get the MAX(value) to find the next value. Alternatively you can just add a large random number, say 1,000,000, to all your sequences. For most users this will fix the problem and is very easy to do. Here’s how:</p>
<pre class="brush: sql">
-- Update all sequences
DECLARE
  v_increase_by                     NUMBER;
  v_bkp_increment_by            NUMBER;
  v_str                         VARCHAR2 (1000);
  v_count                       NUMBER;
BEGIN
  v_increase_by                  := 1000000;

  FOR rec IN (SELECT *
              FROM   user_sequences) LOOP
    -- Backup current incrementation number
    v_bkp_increment_by         := rec.increment_by;
    -- Alter the sequence to increase by a defined amount
    v_str                      := 'alter sequence ' || rec.sequence_name || ' increment by ' || v_increase_by;

    EXECUTE IMMEDIATE v_str;

    -- Increase by that amount
    v_str                      := 'select ' || rec.sequence_name || '.nextval from dual';

    EXECUTE IMMEDIATE v_str
    INTO              v_count;

    -- Reset the increment factor
    v_str                      := 'alter sequence ' || rec.sequence_name || ' increment by ' || v_bkp_increment_by;

    EXECUTE IMMEDIATE v_str;
  END LOOP;
END;
/
</pre>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.talkapex.com/2009/07/oracle-how-to-update-all-sequences/" data-id="ck7mtpuda00ay01qjcbg2hvgu" class="article-share-link">Share</a>
      
        <a href="http://www.talkapex.com/2009/07/oracle-how-to-update-all-sequences/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/oracle/" rel="tag">oracle</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/plsql/" rel="tag">plsql</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-oracle-advanced-error-messages" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2009/07/oracle-advanced-error-messages/" class="article-date">
  <time datetime="2009-07-22T15:00:00.000Z" itemprop="datePublished">2009-07-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2009/07/oracle-advanced-error-messages/">Oracle: Advanced Error Messages</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><span style="font-style:italic;">This is not an APEX specific post, however it can be useful for error handling</span>.</p>
<p>A colleague showed me a great way to get more useful debug information. Normally I used <span style="font-style:italic;">SQLERRM</span> and <span style="font-style:italic;">SQLCODE</span> in an exception to display or store error messages. Using <a href="http://download.oracle.com/docs/cd/B19306_01/appdev.102/b14258/d_util.htm" target="_blank" rel="noopener">DBMS_UTILITY</a> you can get more detailed Oracle error messages. Here’s an example:</p>
<pre class="brush: sql">
-- I put this in a package for demo purposes
CREATE OR REPLACE PACKAGE pkg_err_test
AS
  PROCEDURE sp_err_test (
    p_empno IN emp.empno%TYPE
  );
END pkg_err_test;

CREATE OR REPLACE PACKAGE BODY pkg_err_test
AS
  PROCEDURE sp_err_test (
    p_empno IN emp.empno%TYPE
  )
  AS
    v_ename emp.ename%TYPE;
  BEGIN
    SELECT ename
      INTO v_ename
      FROM emp
     WHERE empno = p_empno;

    DBMS_OUTPUT.put_line ('Employee name is: ' || v_ename);
  EXCEPTION
    WHEN OTHERS THEN
      -- Basic Error Message
      DBMS_OUTPUT.put_line ('Old Error Message: ' || SUBSTR (SQLERRM, 1, 255));
      DBMS_OUTPUT.put_line ('Old Err Code: ' || SQLCODE);
      -- Advanced Error Messages
      DBMS_OUTPUT.put_line ('-- New Error Messages --');
      DBMS_OUTPUT.put_line (DBMS_UTILITY.format_error_stack);   -- Error Message
      DBMS_OUTPUT.put_line (DBMS_UTILITY.format_error_backtrace);   -- Where it occurred
      DBMS_OUTPUT.put_line (DBMS_UTILITY.format_call_stack);   -- Call Stack
  END sp_err_test;
END pkg_err_test;

-- Run the error test with an invalid employee number so an exception will be raised
EXEC pkg_err_test.sp_err_test(p_empno => 123);
</pre>

<p>DBMS Output:</p>
<blockquote>
<p>Old Error Message: ORA-01403: no data found<br>Old Err Code: 100<br>– New Error Messages –<br>ORA-01403: no data found</p>
<p>ORA-06512: at “GIFFY.PKG_ERR_TEST”, line 9</p>
<p>—– PL/SQL Call Stack —–<br>  object      line  object<br>  handle    number  name<br>362D7814        24  package body GIFFY.PKG_ERR_TEST<br>362D70E0         1  anonymous block</p>
</blockquote>
<p>The error message is displayed as well as where the error occurred and the call stack. In large systems this can be very helpful. You should be aware that when called from a package, it does not list the procedure or function (as seen in this example) where the error occurred so you may need to hard code the function or procedure name in your error message.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.talkapex.com/2009/07/oracle-advanced-error-messages/" data-id="ck7mtpud400as01qjaa3veikc" class="article-share-link">Share</a>
      
        <a href="http://www.talkapex.com/2009/07/oracle-advanced-error-messages/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/plsql/" rel="tag">plsql</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-how-to-resolve-null-issue-in-apex-lovs" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2009/07/how-to-resolve-null-issue-in-apex-lovs/" class="article-date">
  <time datetime="2009-07-21T15:00:00.000Z" itemprop="datePublished">2009-07-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2009/07/how-to-resolve-null-issue-in-apex-lovs/">How to resolve %null% issue in APEX LOVs</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="http://www.inside-oracle-apex.com" target="_blank" rel="noopener">Patrick Wolf</a> mentioned this at <a href="http://www.odtugkaleidoscope.com" target="_blank" rel="noopener">ODTUG Kaleidoscope</a> this year.</p>
<p>After you implement your first LOV in an APEX application you’ll quickly learn about the %null% problem. APEX substitutes an empty string for <span style="font-style:italic;">Null return value</span> as %null%.</p>
<p>They’re several workarounds, like using “<span style="font-weight:bold;">-1</span>“ as the NULL value. Or modifying your query using “<span style="font-weight:bold;">‘%’ || ‘null%’</span>“. For example:</p>
<pre class="brush: sql">
SELECT ename,
       empno
  FROM emp
 WHERE empno = DECODE (:p_empno, '%' || 'null%', empno, NULL, empno, :p_empno)
</pre>

<p>Instead of using workarounds you can convert %null% to NULL (empty string) by creating the following application process:</p>
<p><span style="font-weight:bold;">Application Process:</span> <span style="font-style:italic;">AP_SET_LOV_NULLS</span><br><span style="font-weight:bold;">Process Point:</span> <span style="font-style:italic;">On Submit - Before Computations and Validations </span></p>
<pre class="brush: sql">
BEGIN
  FOR x IN (SELECT *
              FROM (SELECT item_name
                      FROM apex_application_page_items aapi
                     WHERE aapi.application_id = :app_id
                       AND aapi.page_id = :app_page_id
                       AND LOWER (aapi.lov_display_null) = 'yes'
                       AND aapi.lov_definition IS NOT NULL
                       AND aapi.lov_null_value IS NULL
                       AND ROWNUM > 0) x
             WHERE LOWER (v (x.item_name)) = '%' || 'null%') LOOP
    apex_util.set_session_state (x.item_name, NULL);
  END LOOP;
END;
</pre>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.talkapex.com/2009/07/how-to-resolve-null-issue-in-apex-lovs/" data-id="ck7mtpudw00b801qj1xcd8com" class="article-share-link">Share</a>
      
        <a href="http://www.talkapex.com/2009/07/how-to-resolve-null-issue-in-apex-lovs/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/apex/" rel="tag">apex</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/25/">&amp;laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/24/">24</a><a class="page-number" href="/page/25/">25</a><span class="page-number current">26</span><a class="page-number" href="/page/27/">27</a><a class="page-number" href="/page/28/">28</a><span class="space">&hellip;</span><a class="page-number" href="/page/30/">30</a><a class="extend next" rel="next" href="/page/27/">Next &amp;raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    <div class="widget-wrap">
  <h3 class="widget-title">Martin Giffy D'Souza</h3>
  <div class="widget aced">
    <img src="/images/profile-martin.jpg" alt="">&nbsp;&nbsp;<a href="http://goo.gl/IOHra" target="_blank" rel="noopener"><img src="/images/aced-logo.gif" alt="" /></a>
  </div>
</div>

  
    <div class="widget-wrap">
  <h3 class="widget-title">Links</h3>
  <div class="widget">
    <ul>
      <li><a id="sidebar-link-oos" href="https://github.com/oraopensource/" target="_blank">OraOpenSource</a></li>
      <li><a id="sidebar-link-podcast" href="http://apex.press/talkshow" target="_blank">Oracle APEX Podcast</a></li>
      <li><a id="sidebar-link-rss" href="/atom.xml">RSS Feed</a></li>
      <li><a id="sidebar-link-email" href="mailto:martin@talkapex.com">Email me</a></li>
      <li><a id="sidebar-link-twitter" href="https://twitter.com/martindsouza" target="_blank">Twitter</a></li>
      <li><a id="sidebar-link-linkedin" href="http://www.linkedin.com/in/martingiffydsouza" target="_blank">LinkedIn</a></li>
    </ul>
  </div>
</div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/" rel="tag">Docker</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/apex/" rel="tag">apex</a><span class="tag-list-count">155</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/apex-19/" rel="tag">apex-19</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/apex-5/" rel="tag">apex-5</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/apex-5-1/" rel="tag">apex-5.1</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/apex-plugin/" rel="tag">apex-plugin</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/best-practice/" rel="tag">best-practice</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/checkbox/" rel="tag">checkbox</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/chrome/" rel="tag">chrome</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/" rel="tag">css</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/design/" rel="tag">design</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/" rel="tag">docker</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dynamic-actions/" rel="tag">dynamic-actions</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/" rel="tag">git</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/interactive-report/" rel="tag">interactive-report</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iot/" rel="tag">iot</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/" rel="tag">javascript</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jquery/" rel="tag">jquery</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kscope/" rel="tag">kscope</a><span class="tag-list-count">21</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/logger/" rel="tag">logger</a><span class="tag-list-count">20</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/macos/" rel="tag">macos</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/meta/" rel="tag">meta</a><span class="tag-list-count">19</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/odtug/" rel="tag">odtug</a><span class="tag-list-count">25</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/oos-utils/" rel="tag">oos-utils</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/oow/" rel="tag">oow</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/open-source/" rel="tag">open-source</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/oracle/" rel="tag">oracle</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/oracle-12c/" rel="tag">oracle-12c</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/oracle-18c/" rel="tag">oracle-18c</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ords/" rel="tag">ords</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/plsql/" rel="tag">plsql</a><span class="tag-list-count">28</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/security/" rel="tag">security</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sql/" rel="tag">sql</a><span class="tag-list-count">18</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sql-data-modeler/" rel="tag">sql-data-modeler</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sql-developer/" rel="tag">sql-developer</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sqlcl/" rel="tag">sqlcl</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sqlplus/" rel="tag">sqlplus</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tabular-form/" rel="tag">tabular-form</a><span class="tag-list-count">3</span></li></ul>
    </div>
  </div>


  
    <div class="widget-wrap">
  <h3 class="widget-title">Books</h3>
  <div class="widget">
    <table class="books">
      <tbody>
        <tr>
          <td><img src="/images/book-apex-plugins.jpeg" alt=""></td>
          <td><img src="/images/book-expert-apex-5.jpeg" alt=""></td>
        </tr>
        <tr>
          <td><a href="http://goo.gl/089zi" target="_blank" rel="noopener">APEX Plugins</a></td>
          <td><a href="http://bit.ly/talkapex-book-expert-2nd-ed" target="_blank" rel="noopener">Expert APEX 5</a></td>
        </tr>
        <tr>
          <td><img src="/images/book-begin-apex-4.jpeg" alt=""></td>
          <td><img src="/images/book-expert-apex-4.jpeg" alt=""></td>
        </tr>
        <tr>
          <td><a href="http://goo.gl/NxHoF" target="_blank" rel="noopener">Beginning APEX 4</a></td>
          <td><a href="http://goo.gl/tXm3P" target="_blank" rel="noopener">Expert APEX 4</a></td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/">2020</a><span class="archive-list-count">14</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/">2019</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/">2018</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/">2017</a><span class="archive-list-count">22</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/">2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/">2015</a><span class="archive-list-count">35</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/">2014</a><span class="archive-list-count">17</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/">2013</a><span class="archive-list-count">35</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/">2012</a><span class="archive-list-count">25</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/">2011</a><span class="archive-list-count">27</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/">2010</a><span class="archive-list-count">40</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/">2009</a><span class="archive-list-count">51</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/">2008</a><span class="archive-list-count">5</span></li></ul>
    </div>
  </div>


  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 Martin Giffy D&#39;Souza<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    
<script>
  var disqus_shortname = 'talkapex';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>


<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-8016477-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->




  </div>
</body>
</html>