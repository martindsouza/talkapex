<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>TalkApex</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="TalkApex">
<meta property="og:url" content="http://www.talkapex.com/index.html">
<meta property="og:site_name" content="TalkApex">
<meta property="article:author" content="Martin Giffy D&#39;Souza">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@martindsouza">
  
    <link rel="alternate" href="/atom.xml" title="TalkApex" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 4.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <!-- <div id="banner"></div> -->
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <img src="/images/header-banner.png" alt="" />
      <!-- <h1 id="logo-wrap">
        <a href="/" id="logo">TalkApex</a>
      </h1> -->
      <!-- 
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Martin Giffy D&#39;Souza on Oracle APEX</a>
        </h2>
       -->
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://www.talkapex.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-docker-image-for-oracle-sqlcl" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/02/docker-image-for-oracle-sqlcl/" class="article-date">
  <time datetime="2020-02-01T12:11:00.000Z" itemprop="datePublished">2020-02-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/02/docker-image-for-oracle-sqlcl/">Docker Image for Oracle SQLcl</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><em>This article is part of a series on using Docker for CLI tools. You can read the original article <a href="/2020/01/using-docker-for-cli-applications/" title="here">here</a>.</em></p>
<p>Oracle <a href="https://www.oracle.com/ca-en/database/technologies/appdev/sqlcl.html" target="_blank" rel="noopener">SQLcl</a> is the new command line (CLI) tool for connecting to the database. I prefer to use it instead of SQL*Plus as it has a lot of new features and is constantly upgraded.</p>
<p>SQLcl is fairly easy to install. Just download and unzip the file then you can run it. The caveat is that it requires Java Runtime Engine (JRE) 8. For most people the JRE dependency isn’t an issue but for some it may cause problems. </p>
<p>I built a Docker image for SQLcl and it is available on <a href="https://github.com/martindsouza/docker-oracle-sqlcl" target="_blank" rel="noopener">Github</a>. The catch is that you need to clone the repo and build the image yourself (due to Oracle licensing restrictions). If this changes in the future I’ll update the repo so a Docker image is available on <a href="https://hub.docker.com/" target="_blank" rel="noopener">Docker Hub</a>.</p>
<p>The Github page covers how to clone and setup the <code>alias</code> to run SQLcl via a Docker container. A demo of it in action is included below. A few notes about the demo:</p>
<ul>
<li>The initial command <code>docker ps |grep sql</code> shows all the active docker containers</li>
<li>SQLcl is run via a bash alias (<em>see <a href="https://github.com/martindsouza/docker-oracle-sqlcl" target="_blank" rel="noopener">Github</a> instructions for how to do this</em>).<ul>
<li>It kicks off my local <code>login.sql</code> script that is on my laptop (not on the docker container).</li>
</ul>
</li>
<li><code>docker ps |grep sql</code> is run again (in different terminal) to show that SQLcl is actually being run as a Docker container</li>
</ul>
<img src="/2020/02/docker-image-for-oracle-sqlcl/docker-sqlcl.gif" class="">
      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.talkapex.com/2020/02/docker-image-for-oracle-sqlcl/" data-id="ck6maeytt00go01ma4mtw8xni" class="article-share-link">Share</a>
      
        <a href="http://www.talkapex.com/2020/02/docker-image-for-oracle-sqlcl/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/docker/" rel="tag">docker</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/sqlcl/" rel="tag">sqlcl</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-using-docker-for-cli-applications" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/01/using-docker-for-cli-applications/" class="article-date">
  <time datetime="2020-01-27T12:12:53.000Z" itemprop="datePublished">2020-01-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/01/using-docker-for-cli-applications/">Using Docker for CLI Applications</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>A while ago I wrote an article called <a href="/2018/04/docker-as-a-micro-service/" title="Docker as a Micro Service">Docker as a Micro Service</a> which covered how I used <a href="https://www.docker.com/" target="_blank" rel="noopener">Docker</a> to run the Alexa CLI tool. This was my first time using Docker for a CLI application.</p>
<p>Since then, I’ve started to Dockerize other CLI tools and have found it very useful. Before I continue, I’ll admit there’s been some additional overhead both running a container for each command and also getting the Docker images correct. It has solved a few issues for me:</p>
<ul>
<li>I no longer worry about OS upgrade/changes on my laptop as my CLI commands all “reside” in the Docker image</li>
<li>I avoid cluttering my system with a bunch of tools that can be a pain to remove if I don’t like them</li>
<li>Avoid all the installation, dependency issues, etc</li>
<li>When I change laptops I don’t need to reinstall all my tools. Docker will fetch them automatically the first time I call them.<ul>
<li>This is also true for working with multiple machines</li>
</ul>
</li>
</ul>
<p>Going down the path of Dockerizing my CLI applications I’ve learned a few things that others may find  helpful looking to take the same approach:</p>
<ul>
<li>Use <code>`pwd`</code> to evaluate your current directory as a mount volume to the container (<em>demo in next point</em>)</li>
<li>Use single quotes around the <code>alias</code> definition so that expressions aren’t evaluated until run time. Ex:</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Double Quote issue</span></span><br><span class="line"><span class="built_in">alias</span> dummycommand=<span class="string">"docker run -it --rm \</span></span><br><span class="line"><span class="string">  -v `pwd`:/opt/node_app \</span></span><br><span class="line"><span class="string">  somedockerimage:latest"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># This will always (no matter where I call dummycommand from) </span></span><br><span class="line"><span class="comment"># map "~/" on my laptop to "/opt/node_app" on the container</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Single Quote (Solution)</span></span><br><span class="line"><span class="built_in">alias</span> dummycommand=<span class="string">'docker run -it --rm \</span></span><br><span class="line"><span class="string">  -v `pwd`:/opt/node_app/app \</span></span><br><span class="line"><span class="string">  somedockerimage:latest'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># This will always map the current directory I'm in on my </span></span><br><span class="line"><span class="comment"># laptop to "/opt/node_app/app" on the container</span></span><br></pre></td></tr></table></figure>

<p>In the next few articles I’ll write about some of the CLI tools I use and how I’ve moved them to Docker.</p>
<ul>
<li><a href="/2020/02/docker-image-for-oracle-sqlcl/" title="Docker Image for Oracle SQLcl">Docker Image for Oracle SQLcl</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.talkapex.com/2020/01/using-docker-for-cli-applications/" data-id="ck6maeyu100gs01ma8fcw4hkr" class="article-share-link">Share</a>
      
        <a href="http://www.talkapex.com/2020/01/using-docker-for-cli-applications/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/docker/" rel="tag">Docker</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-how-to-stage-part-of-a-file-in-git" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/01/how-to-stage-part-of-a-file-in-git/" class="article-date">
  <time datetime="2020-01-25T20:53:25.000Z" itemprop="datePublished">2020-01-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/01/how-to-stage-part-of-a-file-in-git/">How to Stage Part of a File in Git</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>When working with <a href="https://git-scm.com/" target="_blank" rel="noopener">Git</a> (or any version control system) most developers tend to commit all the changes in a given file. What if you wanted to only commit part of the file? This situation can occur in a few situations, such as:</p>
<ul>
<li>Code not ready to be committed</li>
<li>Working on two tickets at once and want separate commits for each set of work</li>
<li>Some <code>TODO</code> comments that you don’t want in the codebase</li>
</ul>
<p>Git has a feature called <a href="https://git-scm.com/book/en/v2/Git-Tools-Interactive-Staging" target="_blank" rel="noopener">interactive staging</a> which lets you select specific lines of code you want staged (and then committed). The demo below highlights this using <a href="https://code.visualstudio.com/" target="_blank" rel="noopener">Visual Studio Code</a>‘s (VSCode) Git tools.</p>
<p>In my current file I have the following:</p>
<img src="/2020/01/how-to-stage-part-of-a-file-in-git/demo-1.png" class="">

<p>We can divide up the “new code” into two sections. The first <code>select</code> statement should be committed but the second statement (staring with <code>-- TODO mdsouza</code>) should not be committed. </p>
<p>If the file needs to be committed without interactive staging a few options exist:</p>
<ul>
<li>Commit everything</li>
<li>Cut out the sections I don’t want in and paste them back in after commit</li>
<li>Copy file (as a backup), remove sections I don’t want, commit, restore backup</li>
</ul>
<p>Neither of these options will lead to good results and take additional time. Using VSCode you can do interactive staging in multiple ways. The following shows how to stage specific lines.</p>
<img src="/2020/01/how-to-stage-part-of-a-file-in-git/git-demo.gif" class="">

<p>A few things to note from the demo:</p>
<ul>
<li>Once staged, <code>test.sql</code> was still marked as having both changes and staged changes</li>
<li>Only selected lines were staged (then committed)</li>
</ul>
<p><em>Note: In <a href="https://www.sourcetreeapp.com/" target="_blank" rel="noopener">Source Tree</a> (a free Git UI from <a href="https://www.atlassian.com/" target="_blank" rel="noopener">Atlassian</a>) this feature is called <code>hunk</code>s.</em></p>
<p>Since finding out about interactive staging I’ve been using it to restrict what goes into each commit. It’s allowed me to keep my commits more concise along with not having to commit work that isn’t ready for others (ex: personal <code>TODO</code> comments).</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.talkapex.com/2020/01/how-to-stage-part-of-a-file-in-git/" data-id="ck6maeyt000gh01maf4df4z2q" class="article-share-link">Share</a>
      
        <a href="http://www.talkapex.com/2020/01/how-to-stage-part-of-a-file-in-git/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/git/" rel="tag">git</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-how-to-select-an-optional-value" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/01/how-to-select-an-optional-value/" class="article-date">
  <time datetime="2020-01-22T20:21:52.000Z" itemprop="datePublished">2020-01-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/01/how-to-select-an-optional-value/">How to Select an Optional Value</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Sometimes in your PL/SQL code you need to query a table which may or may not contain what you’re looking for. This post will cover some different ways of doing it.</p>
<h2 id="The-problem"><a href="#The-problem" class="headerlink" title="The problem"></a>The problem</h2><p>Suppose you need to find an employee’s ID named <code>SAM</code>. If he doesn’t exist in the table then insert a new employee record.</p>
<p><em>Side note: Technically you can use a <code>merge</code> statement for this functionality but want to highlight that a row may not be found.</em></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span></span><br><span class="line">  l_empno emp.empno%<span class="keyword">type</span>;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">select</span> e.empno</span><br><span class="line">  <span class="keyword">into</span> l_empno</span><br><span class="line">  <span class="keyword">from</span> emp e</span><br><span class="line">  <span class="keyword">where</span> e.ename = <span class="string">'SAM'</span>;</span><br><span class="line"></span><br><span class="line">  if l_empno is null then</span><br><span class="line">    <span class="comment">-- ... insert new emp</span></span><br><span class="line">  <span class="keyword">end</span> <span class="keyword">if</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">-- ...</span></span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line">/</span><br><span class="line"></span><br><span class="line"><span class="comment">-- Errors</span></span><br><span class="line">ORA-01403: no data found</span><br><span class="line">ORA-06512: at line 4</span><br><span class="line">1.     00000 -  "no data found"</span><br></pre></td></tr></table></figure>

<p>An error is raised if the employee (<code>SAM</code> in this case) isn’t found. Here are some options to get around this.</p>
<h2 id="Explicit-exception-block"><a href="#Explicit-exception-block" class="headerlink" title="Explicit exception block"></a>Explicit exception block</h2><p>This is the most correct way to know if the value exists or not. Some don’t like to use this approach as it can clutter code (due to additional lines of code), on the positive side it is very explicit.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span></span><br><span class="line">  l_empno emp.empno%<span class="keyword">type</span>;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">select</span> e.empno</span><br><span class="line">    <span class="keyword">into</span> l_empno</span><br><span class="line">    <span class="keyword">from</span> emp e</span><br><span class="line">    <span class="keyword">where</span> e.ename = <span class="string">'SAM'</span>;</span><br><span class="line">  exception</span><br><span class="line">    when no_data_found then </span><br><span class="line">      l_empno := null;</span><br><span class="line">  <span class="keyword">end</span>;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line">/</span><br></pre></td></tr></table></figure>

<h2 id="Using-max"><a href="#Using-max" class="headerlink" title="Using max"></a>Using <code>max</code></h2><p>Using an aggregate function will always return a value even if no rows are returned. For example:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> nvl(<span class="keyword">max</span>(dummy), <span class="string">'still returns value'</span>) val</span><br><span class="line"><span class="keyword">from</span> dual</span><br><span class="line"><span class="keyword">where</span> <span class="number">1</span>=<span class="number">2</span> <span class="comment">-- Always false</span></span><br><span class="line">;</span><br><span class="line"></span><br><span class="line">VAL          </span><br><span class="line"><span class="comment">-------------</span></span><br><span class="line">still returns value</span><br></pre></td></tr></table></figure>

<p>Using this logic with the base example we can do:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span></span><br><span class="line">  l_empno emp.empno%<span class="keyword">type</span>;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">select</span> <span class="keyword">max</span>(e.empno)</span><br><span class="line">  <span class="keyword">into</span> l_empno</span><br><span class="line">  <span class="keyword">from</span> emp e</span><br><span class="line">  <span class="keyword">where</span> e.ename = <span class="string">'SAM'</span>;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line">/</span><br></pre></td></tr></table></figure>

<p>I’ve used this in the past, however it comes with a caveat. If used on a column that isn’t unique it will still return one value. If multiple values are present (ex: all <code>emp</code>s who’s <code>job</code> is <code>MANAGER</code>) it can lead to false positives.</p>
<h2 id="Using-left-join"><a href="#Using-left-join" class="headerlink" title="Using left join"></a>Using <code>left join</code></h2><p>Similar to the previous option, selecting from <code>dual</code> (always returns a row) we can <code>left join</code> to optionally find the value.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span></span><br><span class="line">  l_empno emp.empno%<span class="keyword">type</span>;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">select</span> e.empno</span><br><span class="line">  <span class="keyword">into</span> l_empno</span><br><span class="line">  <span class="keyword">from</span> dual</span><br><span class="line">    <span class="keyword">left</span> <span class="keyword">join</span> emp e <span class="keyword">on</span> <span class="number">1</span>=<span class="number">1</span></span><br><span class="line">      <span class="keyword">and</span> e.ename = <span class="string">'SAM'</span>;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line">/</span><br></pre></td></tr></table></figure>

<p>I prefer this approach compared to the <code>max</code> approach since if multiple values are possible an error is returned (which in most cases we want):</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span></span><br><span class="line">  l_empno emp.empno%<span class="keyword">type</span>;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">select</span> e.empno</span><br><span class="line">  <span class="keyword">into</span> l_empno</span><br><span class="line">  <span class="keyword">from</span> dual</span><br><span class="line">    <span class="keyword">left</span> <span class="keyword">join</span> emp e <span class="keyword">on</span> <span class="number">1</span>=<span class="number">1</span></span><br><span class="line">     <span class="keyword">and</span> e.job = <span class="string">'MANAGER'</span> <span class="comment">-- Will return multiple values</span></span><br><span class="line">  ;   </span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line">/</span><br><span class="line"></span><br><span class="line"><span class="comment">-- Error</span></span><br><span class="line">ORA-01422: exact fetch returns more than requested number of rows</span><br><span class="line">ORA-06512: at line 5</span><br></pre></td></tr></table></figure>





      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.talkapex.com/2020/01/how-to-select-an-optional-value/" data-id="ck6maeytx00gq01mae3o9e7zw" class="article-share-link">Share</a>
      
        <a href="http://www.talkapex.com/2020/01/how-to-select-an-optional-value/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/plsql/" rel="tag">plsql</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-how-to-find-matching-sets-of-data-using-sql" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/11/how-to-find-matching-sets-of-data-using-sql/" class="article-date">
  <time datetime="2019-11-24T05:20:59.000Z" itemprop="datePublished">2019-11-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/11/how-to-find-matching-sets-of-data-using-sql/">How to Find Matching Sets of Data Using SQL</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Suppose you have a set of data in Oracle, how can you find any other matching sets of data? This is different then most queries in SQL which just have “standard” predicates. For example most queries answer the question “<em>find me all cars that are red</em>“ (<code>where color = &#39;red&#39;</code>) whereas set comparison is answering the question “<em>find me all cars that are the same as a given set of cars</em>“.</p>
<p>A good example of this problem is if you need to find orders that are <strong>exactly</strong> the same as a given order. An order can have multiple products in it. It’s not as easy as comparing one row to another, rather sets of rows to other sets of rows. </p>
<h2 id="Set-Theory"><a href="#Set-Theory" class="headerlink" title="Set Theory"></a>Set Theory</h2><p>Before continuing it’s important to go over some basic set theory. One way to think of sets are as arrays of data. When comparing for equivalence of sets we need to ask two questions:</p>
<ul>
<li>Is everything in <code>A</code> in <code>B</code>? (i.e. <code>A - B = 0</code>)</li>
<li>Is everything in <code>B</code> in <code>A</code>? (i.e. <code>B - A = 0</code>)</li>
</ul>
<p>At first glance, the second point may seem unnecessary but it isn’t as <code>A</code> may be a subset of <code>B</code>.</p>
<p>Take for example the following arrays:</p>
<ul>
<li><code>A = 1,2,3</code></li>
<li><code>B = 1,2,3,4</code></li>
</ul>
<p>In the above case, everything in <code>A</code> is in <code>B</code>, however everything in <code>B</code> (i.e. <code>4</code>) is not in <code>A</code>.</p>
<h2 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h2><p>Suppose we have a table (<code>tab_a</code>) and we want to find any other tables with the exact same column definition.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- Base table to be compared against</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tab_a (</span><br><span class="line">  <span class="keyword">id</span> <span class="built_in">number</span>,</span><br><span class="line">  first_name <span class="built_in">varchar2</span>(<span class="number">255</span>),</span><br><span class="line">  birth_date <span class="built_in">date</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- Close to tab_a but has an additional column (last_name)</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tab_b (</span><br><span class="line">  <span class="keyword">id</span> <span class="built_in">number</span>,</span><br><span class="line">  first_name <span class="built_in">varchar2</span>(<span class="number">255</span>),</span><br><span class="line">  last_name <span class="built_in">varchar2</span>(<span class="number">255</span>),</span><br><span class="line">  birth_date <span class="built_in">date</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- Same as tab_a</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tab_c (</span><br><span class="line">  <span class="keyword">id</span> <span class="built_in">number</span>,</span><br><span class="line">  first_name <span class="built_in">varchar2</span>(<span class="number">255</span>),</span><br><span class="line">  birth_date <span class="built_in">date</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>The above script will create three tables. If we start with <code>tab_a</code> only <code>tab_c</code> is the exact same. Using the set theory logic above, and the <a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/sqlrf/Set-Operators.html#GUID-5CB549AF-5A4F-453E-B164-49CAC8F94CBF" target="_blank" rel="noopener"><code>minus</code></a> set operator clause in Oracle you can find matching tables using the following query:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> at_match.table_name</span><br><span class="line"><span class="keyword">from</span> dual</span><br><span class="line">  <span class="comment">-- Using the all_tables view so we have a large data set to compare against</span></span><br><span class="line">  <span class="keyword">join</span> all_tables at_src <span class="keyword">on</span> <span class="number">1</span>=<span class="number">1</span></span><br><span class="line">  <span class="keyword">join</span> all_tables at_match <span class="keyword">on</span> <span class="number">1</span>=<span class="number">1</span></span><br><span class="line">    <span class="comment">-- Exclude the same table</span></span><br><span class="line">    <span class="keyword">and</span> at_match.table_name != at_src.table_name</span><br><span class="line"><span class="keyword">where</span> <span class="number">1</span>=<span class="number">1</span></span><br><span class="line">  <span class="keyword">and</span> at_src.table_name = <span class="string">'TAB_A'</span></span><br><span class="line">  <span class="comment">-- A - B = 0</span></span><br><span class="line">  <span class="keyword">and</span> <span class="keyword">not</span> <span class="keyword">exists</span> (</span><br><span class="line">    <span class="keyword">select</span> atc.column_name, atc.data_type</span><br><span class="line">    <span class="keyword">from</span> all_tab_columns atc</span><br><span class="line">    <span class="keyword">where</span> atc.table_name = at_src.table_name</span><br><span class="line">    <span class="keyword">minus</span></span><br><span class="line">    <span class="keyword">select</span> atc.column_name, atc.data_type</span><br><span class="line">    <span class="keyword">from</span> all_tab_columns atc</span><br><span class="line">    <span class="keyword">where</span> atc.table_name = at_match.table_name</span><br><span class="line">  )</span><br><span class="line">  <span class="comment">-- B - A = 0</span></span><br><span class="line">  <span class="keyword">and</span> <span class="keyword">not</span> <span class="keyword">exists</span> (</span><br><span class="line">    <span class="keyword">select</span> atc.column_name, atc.data_type</span><br><span class="line">    <span class="keyword">from</span> all_tab_columns atc</span><br><span class="line">    <span class="keyword">where</span> atc.table_name = at_match.table_name</span><br><span class="line">    <span class="keyword">minus</span></span><br><span class="line">    <span class="keyword">select</span> atc.column_name, atc.data_type</span><br><span class="line">    <span class="keyword">from</span> all_tab_columns atc</span><br><span class="line">    <span class="keyword">where</span> atc.table_name = at_src.table_name</span><br><span class="line">  )</span><br><span class="line">;</span><br><span class="line"></span><br><span class="line">TABLE_NAME</span><br><span class="line"><span class="comment">----------</span></span><br><span class="line">TAB_C</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.talkapex.com/2019/11/how-to-find-matching-sets-of-data-using-sql/" data-id="ck6maeyp700f701mae3cdb01g" class="article-share-link">Share</a>
      
        <a href="http://www.talkapex.com/2019/11/how-to-find-matching-sets-of-data-using-sql/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/sql/" rel="tag">sql</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-validating-dates-and-numbers-in-oracle-12-2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/03/validating-dates-and-numbers-in-oracle-12-2/" class="article-date">
  <time datetime="2019-03-26T21:16:41.000Z" itemprop="datePublished">2019-03-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/03/validating-dates-and-numbers-in-oracle-12-2/">Validating Dates and Numbers in Oracle 12.2</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Prior to 12.2 validating dates and numbers was a bit of a pain as you had to write your own custom PL/SQL function. <a href="http://github.com/oraopenSource/oos-utils/" target="_blank" rel="noopener">OOS-Utils</a> has a quick solution to this issue and I recommend using <a href="https://github.com/OraOpenSource/oos-utils/blob/master/docs/oos_util_validation.md#is_number" target="_blank" rel="noopener"><code>oos_util_validation.is_number</code></a> and <a href="https://github.com/OraOpenSource/oos-utils/blob/master/docs/oos_util_validation.md#is_date" target="_blank" rel="noopener"><code>oos_util_validation.is_date</code></a>.</p>
<p>If you’re using Oracle 12.2 or above you can (and should) use <a href="https://docs.oracle.com/en/database/oracle/oracle-database/18/sqlrf/VALIDATE_CONVERSION.html#GUID-DC485EEB-CB6D-42EF-97AA-4487884CB2CD" target="_blank" rel="noopener"><code>validation_conversion</code></a> instead. Here are some examples of how to use it along with results:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">  validate_conversion(<span class="string">'123.34'</span> <span class="keyword">as</span> <span class="built_in">number</span>, <span class="string">'999.00'</span>) valid_number,</span><br><span class="line">  validate_conversion(<span class="string">'abc'</span> <span class="keyword">as</span> <span class="built_in">number</span>) invalid_number,</span><br><span class="line">  validate_conversion(<span class="string">'01-Jan-19'</span> <span class="keyword">as</span> <span class="built_in">date</span>, <span class="string">'DD-MON-YYYY'</span>) valid_date,</span><br><span class="line">  validate_conversion(<span class="string">'01-BAD-19'</span> <span class="keyword">as</span> <span class="built_in">date</span>, <span class="string">'DD-MON-YYYY'</span>) invalid_date</span><br><span class="line"><span class="keyword">from</span> dual</span><br><span class="line">;</span><br><span class="line"></span><br><span class="line">VALID_NUMBER INVALID_NUMBER VALID_DATE INVALID_DATE</span><br><span class="line"><span class="comment">------------ -------------- ---------- ------------</span></span><br><span class="line">           1              0          1            0</span><br></pre></td></tr></table></figure>

<p><code>validate_conversion</code> will return <code>1</code> for valid conversions and <code>0</code> for invalid conversions. </p>
<p><em>Note: in the next release of OOS Utils, the validation functions will use</em> <code>validate_conversion</code> <em>if your database is 12.2 or older internally.</em></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.talkapex.com/2019/03/validating-dates-and-numbers-in-oracle-12-2/" data-id="ck6maeyp400f501mad5he4r14" class="article-share-link">Share</a>
      
        <a href="http://www.talkapex.com/2019/03/validating-dates-and-numbers-in-oracle-12-2/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/oracle-12c/" rel="tag">oracle-12c</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/plsql/" rel="tag">plsql</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/sql/" rel="tag">sql</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-apex-read-only-mode-page-processes" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/03/apex-read-only-mode-page-processes/" class="article-date">
  <time datetime="2019-03-26T17:15:01.000Z" itemprop="datePublished">2019-03-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/03/apex-read-only-mode-page-processes/">APEX Read Only Mode: Page Processes</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>APEX has the ability to easily have Read Only (RO) pages. The screen shot below shows how to define the page’s RO attribute. For this demo it’s set to <code>Always</code> but it could use any of the usual conditions in APEX.</p>
<img src="/2019/03/apex-read-only-mode-page-processes/page-attribute.png" class="">

<p>When the page is loaded, all its page items are not editable:</p>
<img src="/2019/03/apex-read-only-mode-page-processes/p2_name_ro.png" class="">

<p>They’re a few things to consider when using the Read Only attribute for a page:</p>
<h2 id="Hacking-a-page-item-with-JavaScript"><a href="#Hacking-a-page-item-with-JavaScript" class="headerlink" title="Hacking a page item with JavaScript"></a>Hacking a page item with JavaScript</h2><p>In the previous image I can not modify the page item by standard means. I can still modify it using JavaScript (JS): <code>apex.item(&#39;P2_NAME&#39;).setValue(&#39;martin&#39;);</code> Submitting the page will trigger an error (which is good):</p>
<img src="/2019/03/apex-read-only-mode-page-processes/js-modify-page-item.png" class="">

<p>This information is relevant as you should probably disable any Dynamic Actions (DA) that modify page items when the page is in Read Only mode. Conditionally running DAs can easily be done by applying the declarative condition to a DA <code>Page/Region is Read Only</code>. You could also use the <a href="https://docs.oracle.com/database/apex-18.1/AEAPI/IS_READ_ONLY-Function.htm#AEAPI30179" target="_blank" rel="noopener"><code>apex_page.is_read_only</code></a> if you have additional server-side conditions for a DA.</p>
<h2 id="Page-can-still-be-submitted"><a href="#Page-can-still-be-submitted" class="headerlink" title="Page can still be submitted"></a>Page can still be submitted</h2><p>In this demo, a page process has been created that logs a message using <a href="https://github.com/oraopensource/logger" target="_blank" rel="noopener">Logger</a>.</p>


<p>If a user clicks the <code>Save</code> button the process is still run, despite the page being in Read Only mode. The next logical thing to do is to put a condition on the <code>Save</code> button so it does not appear when the page is in Read Only mode. Users can bypass this by running <code>apex.page.submit(&#39;SAVE&#39;);</code> in the console. The following demo highlights these concerns:</p>
<img src="/2019/03/apex-read-only-mode-page-processes/demo-save-no-restrictions.gif" class="">

<p>Similar to the previous section, if your page uses the Read Only attribute you should also apply conditions on the corresponding processes to restrict them when the page is in Read Only mode.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.talkapex.com/2019/03/apex-read-only-mode-page-processes/" data-id="ck6maeyp100f301mab450apaw" class="article-share-link">Share</a>
      
        <a href="http://www.talkapex.com/2019/03/apex-read-only-mode-page-processes/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/apex/" rel="tag">apex</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-how-to-refresh-a-report-only-once-with-multiple-dependant-cascading-lovs" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/03/how-to-refresh-a-report-only-once-with-multiple-dependant-cascading-lovs/" class="article-date">
  <time datetime="2019-03-26T16:15:46.000Z" itemprop="datePublished">2019-03-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/03/how-to-refresh-a-report-only-once-with-multiple-dependant-cascading-lovs/">How to Refresh a Report Only Once With Multiple Dependant Cascading LOVs</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Suppose you have a region with a set of cascading LOVs and report that references both of these items. When either of these items is refreshed, the report should be refreshed. When the parent item is changed it will trigger multiple refreshes of the report. The following example highlights this problem:</p>
<img src="/2019/03/how-to-refresh-a-report-only-once-with-multiple-dependant-cascading-lovs/overview.png" class="">

<p><strong>p2_deptno:</strong> </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> d.dname d, d.deptno r</span><br><span class="line"><span class="keyword">from</span> dept d</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> dname</span><br></pre></td></tr></table></figure>

<p><strong>p2_empno:</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> e.ename d, e.empno r</span><br><span class="line"><span class="keyword">from</span> emp e</span><br><span class="line"><span class="keyword">where</span> <span class="number">1</span>=<span class="number">1</span></span><br><span class="line">  <span class="keyword">and</span> e.deptno = nvl(:p2_deptno, e.deptno)</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> e.ename</span><br></pre></td></tr></table></figure>

<p><em>Cascading LOV Parent Item(s)</em>: <code>p2_deptno</code></p>
<p><strong>Report Region</strong></p>
<p><em>Type</em>: <code>Classic Report</code></p>
<p><em>SQL Query</em>:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> empno, ename, deptno</span><br><span class="line"><span class="keyword">from</span> emp e</span><br><span class="line"><span class="keyword">where</span> <span class="number">1</span>=<span class="number">1</span></span><br><span class="line">  <span class="keyword">and</span> e.deptno = nvl(:p2_deptno, e.deptno)</span><br><span class="line">  <span class="keyword">and</span> e.empno = nvl(:p2_empno, e.empno)</span><br></pre></td></tr></table></figure>

<p><em>Page Items to Submit</em>: <code>p2_deptno,p2_empno</code></p>
<p>Next, create a Dynamic Action (DA) that will trigger a refresh on the <code>Report</code> region each time any item has changed:</p>
<img src="/2019/03/how-to-refresh-a-report-only-once-with-multiple-dependant-cascading-lovs/dynamic-action.png" class="">

<p>When <code>p2_deptno</code> is changed, 3 Ajax requests occur:</p>
<ol>
<li><code>Report</code> region is refreshed (reason: Page items to Submit contains <code>p2_deptno</code>)</li>
<li><code>p2_empno</code> LOV is refreshed (reason: Cascading LOV Parent Item(s): <code>p2_deptno</code>). This triggers another refresh to the <code>Report</code> region (see next step)</li>
<li><code>Report</code> region is refreshed (reason: Page items to Submit contains <code>p2_empno</code>)</li>
</ol>
<p>The following demo highlights this problem. The report refreshes so quickly the only way to see the problem is to look at the differnet Ajax calls. <em>Note: the order of the Ajax responses may change since it’s asynchronous.</em></p>
<img src="/2019/03/how-to-refresh-a-report-only-once-with-multiple-dependant-cascading-lovs/cascade-lov-dup.gif" class="">

<p>If your report runs relatively quick you may not even notice the duplicate refresh. I had a situation where we had five cascading LOVs and the underlying report was refreshed five times and was very noticeable to the users.</p>
<p>Thankfully there’s a simple fix to this problem. When a JavaScript (JS) <code>change</code> event occurs and is triggered “by a user” the JS event <code>e.originalEvent</code> contains a value. In the above example step 3 was not really triggered by a user, rather triggered by a cascading LOV. In this case the JS event attribute <code>originalEvent</code> is null.</p>
<p>Using the event attribute <code>originalEvent</code> we can solve the problem by adding the following Client-side Condition to the DA: <code>this.browserEvent.originalEvent !== undefined</code></p>
<img src="/2019/03/how-to-refresh-a-report-only-once-with-multiple-dependant-cascading-lovs/da-condition.png" class="">

<p>Now when <code>p2_deptno</code> is modified only two Ajax calls occur (which is correct):</p>
<img src="/2019/03/how-to-refresh-a-report-only-once-with-multiple-dependant-cascading-lovs/cascade-lov-fix.gif" class="">

<p>Thanks to <a href="https://twitter.com/fuzziebrain" target="_blank" rel="noopener">Adrian Png</a> for helping me with this.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.talkapex.com/2019/03/how-to-refresh-a-report-only-once-with-multiple-dependant-cascading-lovs/" data-id="ck6maeypg00fe01madcc67l0l" class="article-share-link">Share</a>
      
        <a href="http://www.talkapex.com/2019/03/how-to-refresh-a-report-only-once-with-multiple-dependant-cascading-lovs/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/apex/" rel="tag">apex</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/" rel="tag">javascript</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-adding-a-refresh-button-for-standard-reports-in-apex" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/03/adding-a-refresh-button-for-standard-reports-in-apex/" class="article-date">
  <time datetime="2019-03-20T19:38:14.000Z" itemprop="datePublished">2019-03-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/03/adding-a-refresh-button-for-standard-reports-in-apex/">Adding a Refresh Button for Standard Reports in APEX</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>While developing standard reports in APEX I usually do the following repetitive steps. Modify something to do with the report (query, setting, attributes, source data, etc). After saving or committing my changes I refresh the page to see how it looks. This gets frustrating when doing a lot of small edits as a full page refresh is not required.</p>
<p>I recently created a script to solve this problem. The script adds a small refresh icon in the first column header of each standard report. Clicking it will refresh the current report. The following demo shows it in action and how you don’t need a full page refresh to view changes to a report: <em>(note: you don’t need to run this in the console, which will be discussed at the end of the post)</em></p>
<img src="/2019/03/adding-a-refresh-button-for-standard-reports-in-apex/standard-report-refresh.gif" class="">

<p>The following steps outline how to integrate this directly in your application:</p>
<ul>
<li>On Page 0, create a new Dynamic Action (DA)<ul>
<li><code>When &gt; Event</code>: Page Load<ul>
<li><code>Action &gt; True &gt; JavaScript</code>:</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> buttonHtml = <span class="string">'&lt;span aria-hidden="true" class="apex-dev-refresh fa fa-refresh fa-anim-spin"&gt;&lt;/span&gt;'</span>;</span><br><span class="line"></span><br><span class="line">$(<span class="string">'.t-Report'</span>).each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> $<span class="keyword">this</span> = $(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Add button to screen</span></span><br><span class="line">  $<span class="keyword">this</span>.find(<span class="string">'th:first'</span>).prepend(buttonHtml);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Regenerate the refresh button after a region refresh</span></span><br><span class="line">  $(<span class="string">'#'</span> + $<span class="keyword">this</span>.data(<span class="string">'regionId'</span>)).on(<span class="string">'apexafterrefresh'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    $(<span class="keyword">this</span>).find(<span class="string">'th:first'</span>).prepend(buttonHtml);</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Register event listener</span></span><br><span class="line">$(<span class="built_in">document</span>).on(<span class="string">'click'</span>, <span class="string">".apex-dev-refresh"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  $(<span class="keyword">this</span>).closest(<span class="string">'.t-Report'</span>).trigger(<span class="string">'apexrefresh'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>The DA should look like this:</p>
<img src="/2019/03/adding-a-refresh-button-for-standard-reports-in-apex/p0-da-setup.png" class="">

<p>You can change the icon and its settings to anything you want (i.e. by modifying the <code>buttonHtml</code>). You can use the <a href="https://apex.oracle.com/pls/apex/f?p=42:4000:::NO:::" target="_blank" rel="noopener">APEX Icon Generator</a> tool to generate the code for a new icon.</p>
<p>Though not required, I <strong>highly recommend</strong> you add a Build Option (read <a href="https://twitter.com/swesley_perth" target="_blank" rel="noopener">Scott Wesley’s</a> <a href="http://www.grassroots-oracle.com/2010/06/oracle-apex-build-options.html" target="_blank" rel="noopener">article</a> - I have a Build Option called <code>DEV_ONLY</code>) to restrict the DA to development only.</p>
<p>You could add the code to a JavaScript file and include it with your application or create a Dynamic Action plugin. <em>(If you create a plugin for this please let me know and I’ll be sure to refreence it.</em></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.talkapex.com/2019/03/adding-a-refresh-button-for-standard-reports-in-apex/" data-id="ck6maeyor00ew01ma05heek4u" class="article-share-link">Share</a>
      
        <a href="http://www.talkapex.com/2019/03/adding-a-refresh-button-for-standard-reports-in-apex/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/apex/" rel="tag">apex</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-how-to-execute-queries-in-sql-developer" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/02/how-to-execute-queries-in-sql-developer/" class="article-date">
  <time datetime="2019-02-28T04:12:55.000Z" itemprop="datePublished">2019-02-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/02/how-to-execute-queries-in-sql-developer/">How to Execute Queries in SQL Developer</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>They’re certain things in life that absolutely drive me crazy. I can probably start an entire blog on this topic but instead will focus on something I see many developers do in <a href="https://www.oracle.com/database/technologies/appdev/sql-developer.html" target="_blank" rel="noopener">SQL Developer</a>.</p>
<p>Unfortunately I’ve see a lot of developers run their queries using a mouse instead of a keyboard shortcut (note no semicolon between queries) as demonstrated below:</p>
<img src="/2019/02/how-to-execute-queries-in-sql-developer/sqldev-inefficient.gif" class="">

<p>You’ll notice that my second query had an error with it so I had to select it again, then click the run button to execute it.</p>
<p>At first glance this may not seem like a big deal however if you run hundreds of queries a day that are much longer than two lines the inefficiencies really start to add up. With the use of the right syntax you can execute everything in SQL Developer via keyboard shortcuts. In the example below everything is run using <code>ctrl+enter</code></p>
<img src="/2019/02/how-to-execute-queries-in-sql-developer/sqldev-correct.gif" class="">

<p>The syntax structure that you need to use is very simple:</p>
<ul>
<li>After every query have a semicolon (<code>;</code>)</li>
<li>After every PL/SQL block end with a semicolon (<code>;</code>) and then a forward slash (<code>/</code>)</li>
</ul>
<p>The following code sample is what was used in the second demo:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> *</span><br><span class="line"><span class="keyword">from</span> emp</span><br><span class="line">;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> *</span><br><span class="line"><span class="keyword">from</span> dept</span><br><span class="line">;</span><br><span class="line"></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  dbms_output.put_line(<span class="string">'hello'</span>);</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line">/</span><br></pre></td></tr></table></figure>





      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.talkapex.com/2019/02/how-to-execute-queries-in-sql-developer/" data-id="ck6maeyoq00eu01ma1a6kae4z" class="article-share-link">Share</a>
      
        <a href="http://www.talkapex.com/2019/02/how-to-execute-queries-in-sql-developer/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/sql-developer/" rel="tag">sql-developer</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/29/">29</a><a class="extend next" rel="next" href="/page/2/">Next &amp;raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    <div class="widget-wrap">
  <h3 class="widget-title">Martin Giffy D'Souza</h3>
  <div class="widget aced">
    <img src="/images/profile-martin.jpg" alt="">&nbsp;&nbsp;<a href="http://goo.gl/IOHra" target="_blank" rel="noopener"><img src="/images/aced-logo.gif" alt="" /></a>
  </div>
</div>

  
    <div class="widget-wrap">
  <h3 class="widget-title">Links</h3>
  <div class="widget">
    <ul>
      <li><a id="sidebar-link-oos" href="https://github.com/oraopensource/" target="_blank">OraOpenSource</a></li>
      <li><a id="sidebar-link-podcast" href="http://apex.press/talkshow" target="_blank">Oracle APEX Podcast</a></li>
      <li><a id="sidebar-link-rss" href="/atom.xml">RSS Feed</a></li>
      <li><a id="sidebar-link-email" href="mailto:martin@talkapex.com">Email me</a></li>
      <li><a id="sidebar-link-twitter" href="https://twitter.com/martindsouza" target="_blank">Twitter</a></li>
      <li><a id="sidebar-link-linkedin" href="http://www.linkedin.com/in/martingiffydsouza" target="_blank">LinkedIn</a></li>
    </ul>
  </div>
</div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/" rel="tag">Docker</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/apex/" rel="tag">apex</a><span class="tag-list-count">149</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/apex-5/" rel="tag">apex-5</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/apex-5-1/" rel="tag">apex-5.1</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/apex-plugin/" rel="tag">apex-plugin</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/best-practice/" rel="tag">best-practice</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/checkbox/" rel="tag">checkbox</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/chrome/" rel="tag">chrome</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/" rel="tag">css</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/design/" rel="tag">design</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/" rel="tag">docker</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dynamic-actions/" rel="tag">dynamic-actions</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/" rel="tag">git</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iot/" rel="tag">iot</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/" rel="tag">javascript</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jquery/" rel="tag">jquery</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kscope/" rel="tag">kscope</a><span class="tag-list-count">21</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/logger/" rel="tag">logger</a><span class="tag-list-count">20</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/macos/" rel="tag">macos</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/meta/" rel="tag">meta</a><span class="tag-list-count">19</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/odtug/" rel="tag">odtug</a><span class="tag-list-count">25</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/oos-utils/" rel="tag">oos-utils</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/oow/" rel="tag">oow</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/open-source/" rel="tag">open-source</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/oracle/" rel="tag">oracle</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/oracle-12c/" rel="tag">oracle-12c</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/oracle-18c/" rel="tag">oracle-18c</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ords/" rel="tag">ords</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/plsql/" rel="tag">plsql</a><span class="tag-list-count">25</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/security/" rel="tag">security</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sql/" rel="tag">sql</a><span class="tag-list-count">16</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sql-data-modeler/" rel="tag">sql-data-modeler</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sql-developer/" rel="tag">sql-developer</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sqlcl/" rel="tag">sqlcl</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tabular-form/" rel="tag">tabular-form</a><span class="tag-list-count">3</span></li></ul>
    </div>
  </div>


  
    <div class="widget-wrap">
  <h3 class="widget-title">Books</h3>
  <div class="widget">
    <table class="books">
      <tbody>
        <tr>
          <td><img src="/images/book-apex-plugins.jpeg" alt=""></td>
          <td><img src="/images/book-expert-apex-5.jpeg" alt=""></td>
        </tr>
        <tr>
          <td><a href="http://goo.gl/089zi" target="_blank" rel="noopener">APEX Plugins</a></td>
          <td><a href="http://bit.ly/talkapex-book-expert-2nd-ed" target="_blank" rel="noopener">Expert APEX 5</a></td>
        </tr>
        <tr>
          <td><img src="/images/book-begin-apex-4.jpeg" alt=""></td>
          <td><img src="/images/book-expert-apex-4.jpeg" alt=""></td>
        </tr>
        <tr>
          <td><a href="http://goo.gl/NxHoF" target="_blank" rel="noopener">Beginning APEX 4</a></td>
          <td><a href="http://goo.gl/tXm3P" target="_blank" rel="noopener">Expert APEX 4</a></td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/">2020</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/">2019</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/">2018</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/">2017</a><span class="archive-list-count">22</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/">2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/">2015</a><span class="archive-list-count">35</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/">2014</a><span class="archive-list-count">17</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/">2013</a><span class="archive-list-count">35</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/">2012</a><span class="archive-list-count">25</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/">2011</a><span class="archive-list-count">27</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/">2010</a><span class="archive-list-count">40</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/">2009</a><span class="archive-list-count">51</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/">2008</a><span class="archive-list-count">5</span></li></ul>
    </div>
  </div>


  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 Martin Giffy D&#39;Souza<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    
<script>
  var disqus_shortname = 'talkapex';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>


<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-8016477-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->




  </div>
</body>
</html>