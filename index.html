<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>TalkApex</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="TalkApex">
<meta property="og:url" content="http://www.talkapex.com/index.html">
<meta property="og:site_name" content="TalkApex">
<meta property="article:author" content="Martin Giffy D&#39;Souza">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@martindsouza">
  
    <link rel="alternate" href="/atom.xml" title="TalkApex" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 4.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <!-- <div id="banner"></div> -->
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <img src="/images/header-banner.png" alt="" />
      <!-- <h1 id="logo-wrap">
        <a href="/" id="logo">TalkApex</a>
      </h1> -->
      <!-- 
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Martin Giffy D&#39;Souza on Oracle APEX</a>
        </h2>
       -->
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://www.talkapex.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-changing-the-maximum-session-idle-time-in-apex" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/02/changing-the-maximum-session-idle-time-in-apex/" class="article-date">
  <time datetime="2020-02-16T13:44:16.000Z" itemprop="datePublished">2020-02-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/02/changing-the-maximum-session-idle-time-in-apex/">Changing the Maximum Session Idle Time in APEX</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>APEX allows you to set the maximum idle time for a given session. This is an application level attribute that is set in <code>Shared Components &gt; Security Attributes</code>. Under the <code>Session Management</code> there is a setting for <code>Maximum Session Idle Time in Seconds</code> which defaults to <code>3600</code> seconds:</p>
<img src="/2020/02/changing-the-maximum-session-idle-time-in-apex/max-idle-setting.png" class="">

<p>When a new session is created in APEX, the max idle time is “copied” from the application settings directly into the user’s session settings. If you change the setting at an application level <strong>only new sessions will use the new value</strong>. <strong>Existing sessions will use the old value</strong>.</p>
<p>The following example demonstrates when changes take effect. The current max idle time is set to <code>3600</code> and one session is active (i.e. one user is logged in):</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- App setting</span></span><br><span class="line"><span class="keyword">select</span> aa.maximum_session_idle_seconds</span><br><span class="line"><span class="keyword">from</span> apex_applications aa</span><br><span class="line"><span class="keyword">where</span> aa.application_id = <span class="number">101</span></span><br><span class="line">;</span><br><span class="line"></span><br><span class="line">   MAXIMUM_SESSION_IDLE_SECONDS</span><br><span class="line">_______________________________</span><br><span class="line">                           3600</span><br><span class="line"></span><br><span class="line"><span class="comment">-- Active sessions</span></span><br><span class="line"><span class="keyword">select</span></span><br><span class="line">  ws.apex_session_id,</span><br><span class="line">  ws.session_max_idle_sec</span><br><span class="line"><span class="keyword">from</span> apex_workspace_sessions ws</span><br><span class="line">;</span><br><span class="line"></span><br><span class="line">   APEX_SESSION_ID    SESSION_MAX_IDLE_SEC</span><br><span class="line">__________________ _______________________</span><br><span class="line">    10974491127217                    3600</span><br></pre></td></tr></table></figure>

<p>The <code>Maximum Session Idle Time in Seconds</code> setting is is changed to <code>200</code> seconds and then a new user logs in (i.e. a new session is created):</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- App setting</span></span><br><span class="line"><span class="keyword">select</span> aa.maximum_session_idle_seconds</span><br><span class="line"><span class="keyword">from</span> apex_applications aa</span><br><span class="line"><span class="keyword">where</span> aa.application_id = <span class="number">101</span></span><br><span class="line">;</span><br><span class="line"></span><br><span class="line">   MAXIMUM_SESSION_IDLE_SECONDS</span><br><span class="line">_______________________________</span><br><span class="line">                            200</span><br><span class="line"></span><br><span class="line"><span class="comment">-- Active sessions</span></span><br><span class="line"><span class="keyword">select</span></span><br><span class="line">  ws.apex_session_id,</span><br><span class="line">  ws.session_max_idle_sec</span><br><span class="line"><span class="keyword">from</span> apex_workspace_sessions ws</span><br><span class="line">;</span><br><span class="line"></span><br><span class="line">   APEX_SESSION_ID    SESSION_MAX_IDLE_SEC</span><br><span class="line">__________________ _______________________</span><br><span class="line">     3565745405186                     200</span><br><span class="line">    10974491127217                    3600</span><br></pre></td></tr></table></figure>

<p>You can see that the older session (<code>10974491127217</code>) still retains the old max idle time (<code>3600</code> seconds) whereas the new session (<code>3565745405186</code>) uses the new value (<code>200</code> seconds).</p>
<p>When testing these settings it’s important that you create a new session each time a change is made.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.talkapex.com/2020/02/changing-the-maximum-session-idle-time-in-apex/" data-id="ck6opmp7t00hl01lsde7024u3" class="article-share-link">Share</a>
      
        <a href="http://www.talkapex.com/2020/02/changing-the-maximum-session-idle-time-in-apex/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/apex/" rel="tag">apex</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-apex-ir-saved-report-aliases" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/02/apex-ir-saved-report-aliases/" class="article-date">
  <time datetime="2020-02-15T21:36:15.000Z" itemprop="datePublished">2020-02-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/02/apex-ir-saved-report-aliases/">APEX IR Saved Report Aliases</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>In APEX you can save Interactive Reports (IR) default reports as both Primary and Alternate. Both of these types of default reports are available to all users. To save an alternate report, click the <code>Actions</code> button then <code>Report &gt; Save Report</code> (<em>Note you must be logged into the APEX developer to save default reports</em>). Select the option to save <code>As Default Report Settings</code> and the save screen will look like below:</p>
<img src="/2020/02/apex-ir-saved-report-aliases/ir-save-report.png" class="">

<p>In the APEX developer you can now see the saved report (<code>Managers</code> in this case) and modify its alias. By default a random number will be assign as the alias.</p>
<img src="/2020/02/apex-ir-saved-report-aliases/ir-report-attributes.png" class="">

<p>You can then use the alias to link to a saved report anywhere in your application.</p>
<p>The following query will get a list of all the default reports, their aliases, and a report link for a given page:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> </span><br><span class="line">  pr.region_name, </span><br><span class="line">  nvl(pir.report_name, <span class="string">'Primary'</span>) report_name, </span><br><span class="line">  pir.report_alias, </span><br><span class="line">  pir.report_link_example</span><br><span class="line"><span class="keyword">from</span> dual</span><br><span class="line">  <span class="keyword">join</span> apex_application_page_ir_rpt pir <span class="keyword">on</span> <span class="number">1</span>=<span class="number">1</span></span><br><span class="line">  <span class="keyword">join</span> apex_application_page_regions pr <span class="keyword">on</span> <span class="number">1</span>=<span class="number">1</span></span><br><span class="line">    <span class="keyword">and</span> pr.application_id = pir.application_id</span><br><span class="line">    <span class="keyword">and</span> pr.page_id = pir.page_id</span><br><span class="line">    <span class="keyword">and</span> pr.region_id = pir.region_id</span><br><span class="line"><span class="keyword">where</span> <span class="number">1</span>=<span class="number">1</span></span><br><span class="line">  <span class="keyword">and</span> pir.application_id = :app_id</span><br><span class="line">  <span class="keyword">and</span> pir.page_id = :app_page_id</span><br><span class="line">  <span class="keyword">and</span> pir.status = <span class="string">'PUBLIC'</span></span><br><span class="line">;</span><br><span class="line"></span><br><span class="line">REGION_NAME REPORT_NAME    REPORT_ALIAS  REPORT_LINK_EXAMPLE</span><br><span class="line">___________ ______________ _____________ __________________________________________</span><br><span class="line">Report 1    Primary        167050        f?p=&amp;APP_ID.:3:&amp;APP_SESSION.:IR_167050</span><br><span class="line">Report 1    Sal GTE 2000   180055        f?p=&amp;APP_ID.:3:&amp;APP_SESSION.:IR_180055</span><br><span class="line">Report 1    Managers       MANAGERS      f?p=&amp;APP_ID.:3:&amp;APP_SESSION.:IR_MANAGERS</span><br></pre></td></tr></table></figure>



      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.talkapex.com/2020/02/apex-ir-saved-report-aliases/" data-id="ck6opmp8a00ht01ls14add69o" class="article-share-link">Share</a>
      
        <a href="http://www.talkapex.com/2020/02/apex-ir-saved-report-aliases/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/apex/" rel="tag">apex</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/interactive-report/" rel="tag">interactive-report</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-upgrading-to-nice-switch-in-apex-19" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/02/upgrading-to-nice-switch-in-apex-19/" class="article-date">
  <time datetime="2020-02-15T14:35:07.000Z" itemprop="datePublished">2020-02-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/02/upgrading-to-nice-switch-in-apex-19/">Upgrading to Nice Switch in APEX 19</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>When upgrading an application to APEX 19.x, if you have a Switch page item it probably still looks like the old “Yes/No” boxes:</p>
<img src="/2020/02/upgrading-to-nice-switch-in-apex-19/old-swtich.png" class="">

<p>To change to the new, more modern, Switch item you need to change this for the entire application. Do to so go to <code>Shared Components &gt; Component Settings &gt; Switch</code>. From there set the <code>Display Style</code> to <code>Switch</code>. All the Switch items will now look like:</p>
<img src="/2020/02/upgrading-to-nice-switch-in-apex-19/new-switch.png" class="">

<p>For all new applications created in 19.x the Display Style is already Switch so there is nothing to do in order to have this type of Switch.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.talkapex.com/2020/02/upgrading-to-nice-switch-in-apex-19/" data-id="ck6opmp8f00hx01ls84efc4zs" class="article-share-link">Share</a>
      
        <a href="http://www.talkapex.com/2020/02/upgrading-to-nice-switch-in-apex-19/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/apex/" rel="tag">apex</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/apex-19/" rel="tag">apex-19</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-how-to-reduce-width-of-ir-link-column-in-apex" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/02/how-to-reduce-width-of-ir-link-column-in-apex/" class="article-date">
  <time datetime="2020-02-15T02:13:47.000Z" itemprop="datePublished">2020-02-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/02/how-to-reduce-width-of-ir-link-column-in-apex/">How to Reduce Width of IR Link Column in APEX</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Interactive Reports (IR) in APEX have a attribute to include a link column:</p>
<img src="/2020/02/how-to-reduce-width-of-ir-link-column-in-apex/ir-attribute.png" class="">

<p>When you run the page the link column takes up more space than necessary:</p>
<img src="/2020/02/how-to-reduce-width-of-ir-link-column-in-apex/ir-link-column-default.png" class="">

<p>You can reduce the width by adding the following CSS to your application: <em>Note width may vary depending on circumstances)</em> </p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">th</span><span class="selector-id">#LINK</span>,</span><br><span class="line"><span class="selector-tag">td</span><span class="selector-attr">[headers=LINK]</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attribute">width</span>:<span class="number">40px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Column links will now look like:</p>
<img src="/2020/02/how-to-reduce-width-of-ir-link-column-in-apex/ir-link-column-reduce.png" class="">
      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.talkapex.com/2020/02/how-to-reduce-width-of-ir-link-column-in-apex/" data-id="ck6opmp8400hq01lsghp085zr" class="article-share-link">Share</a>
      
        <a href="http://www.talkapex.com/2020/02/how-to-reduce-width-of-ir-link-column-in-apex/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/apex/" rel="tag">apex</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/interactive-report/" rel="tag">interactive-report</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-docker-for-oracle-sql-plus" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/02/docker-for-oracle-sql-plus/" class="article-date">
  <time datetime="2020-02-15T01:19:32.000Z" itemprop="datePublished">2020-02-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/02/docker-for-oracle-sql-plus/">Docker for Oracle SQL*Plus</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><em>This article is part of a series on using Docker for CLI tools. You can read the original article <a href="/2020/01/using-docker-for-cli-applications/" title="here">here</a>.</em></p>
<p>Oracle SQL*Plus is the Command Line (CLI) tool to connect to Oracle. It is part of the <a href="https://www.oracle.com/ca-en/database/technologies/instant-client.html" target="_blank" rel="noopener">Oracle Instant Client</a> set of tools. I’ve always found the installation process to be cumbersome as it requires a few steps (not a straight install or base executable like <a href="https://www.oracle.com/ca-en/database/technologies/appdev/sqlcl.html" target="_blank" rel="noopener">SQLcl</a>).</p>
<p>Oracle has made the Instant Client files now available on a pre-built Docker image. This article covers how to download the Docker image and use it to run SQl*Plus in a container rather than a local install.</p>
<h2 id="Accept-License-Agreements"><a href="#Accept-License-Agreements" class="headerlink" title="Accept License Agreements"></a>Accept License Agreements</h2><p>Oracle has its own <a href="https://container-registry.oracle.com" target="_blank" rel="noopener">container registry</a>. Before using any of their pre-built images you must accept the license agreements (this only has to be done once).</p>
<ul>
<li>Go to <a href="https://container-registry.oracle.com" target="_blank" rel="noopener">container registry</a></li>
<li>Search for <code>instantclient</code> (all one word)<ul>
<li>Select the <code>instantclient</code> link</li>
</ul>
</li>
<li>Sign In (image below) and accept the license agreements</li>
</ul>
<img src="/2020/02/docker-for-oracle-sql-plus/oracle-container-registry.png" class="">


<h2 id="Docker-Login-to-Oracle’s-Container-Registry"><a href="#Docker-Login-to-Oracle’s-Container-Registry" class="headerlink" title="Docker Login to Oracle’s Container Registry"></a>Docker Login to Oracle’s Container Registry</h2><p>In your terminal run: </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker login container-registry.oracle.com</span><br></pre></td></tr></table></figure>

<p>You will be required to enter in your Oracle SSO login credentials (only need to do this once).</p>
<h2 id="Setup-sqlplus-alias"><a href="#Setup-sqlplus-alias" class="headerlink" title="Setup sqlplus alias"></a>Setup <code>sqlplus</code> alias</h2><p>In <code>~/.bash_profile</code> or <code>~/.zshrc</code> add the following alias</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">alias</span> sqlplus=<span class="string">'docker run -it --rm \</span></span><br><span class="line"><span class="string">  -e ORACLE_PATH=/oracle/ \</span></span><br><span class="line"><span class="string">  -e TNS_ADMIN=\$TNS_ADMIN \</span></span><br><span class="line"><span class="string">  -w /myhost \</span></span><br><span class="line"><span class="string">  --network="host" \</span></span><br><span class="line"><span class="string">  -v ~/Documents/Oracle/:/oracle/ \</span></span><br><span class="line"><span class="string">  -v `pwd`:/myhost \</span></span><br><span class="line"><span class="string">  container-registry.oracle.com/database/instantclient:latest \</span></span><br><span class="line"><span class="string">  sqlplus '</span></span><br></pre></td></tr></table></figure>

<h2 id="Run-SQL-Plus"><a href="#Run-SQL-Plus" class="headerlink" title="Run SQL*Plus"></a>Run SQL*Plus</h2><p>Start a new terminal (so the alias is registered) and just run <code>sqlplus</code> as you normally would. </p>
<h2 id="Considerations"><a href="#Considerations" class="headerlink" title="Considerations"></a>Considerations</h2><p>The current image from Oracle is using Instant Client <code>12.2.0.1.0</code> where as at the time of writing the most current version is <code>19.3.0.0.0</code>. If you want to build your own image so you can run the latest version, you can use Oracle’s <a href="https://github.com/oracle/docker-images/tree/master/OracleInstantClient" target="_blank" rel="noopener">Docker Image files</a> (just search for the version you want). </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.talkapex.com/2020/02/docker-for-oracle-sql-plus/" data-id="ck6opmp8000ho01lsgiov3kee" class="article-share-link">Share</a>
      
        <a href="http://www.talkapex.com/2020/02/docker-for-oracle-sql-plus/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/docker/" rel="tag">docker</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/sqlplus/" rel="tag">sqlplus</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-docker-image-for-oracle-sqlcl" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/02/docker-image-for-oracle-sqlcl/" class="article-date">
  <time datetime="2020-02-01T12:11:00.000Z" itemprop="datePublished">2020-02-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/02/docker-image-for-oracle-sqlcl/">Docker Image for Oracle SQLcl</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><em>This article is part of a series on using Docker for CLI tools. You can read the original article <a href="/2020/01/using-docker-for-cli-applications/" title="here">here</a>.</em></p>
<p>Oracle <a href="https://www.oracle.com/ca-en/database/technologies/appdev/sqlcl.html" target="_blank" rel="noopener">SQLcl</a> is the new command line (CLI) tool for connecting to the database. I prefer to use it instead of SQL*Plus as it has a lot of new features and is constantly upgraded.</p>
<p>SQLcl is fairly easy to install. Just download and unzip the file then you can run it. The caveat is that it requires Java Runtime Engine (JRE) 8. For most people the JRE dependency isn’t an issue but for some it may cause problems. </p>
<p>I built a Docker image for SQLcl and it is available on <a href="https://github.com/martindsouza/docker-oracle-sqlcl" target="_blank" rel="noopener">Github</a>. The catch is that you need to clone the repo and build the image yourself (due to Oracle licensing restrictions). If this changes in the future I’ll update the repo so a Docker image is available on <a href="https://hub.docker.com/" target="_blank" rel="noopener">Docker Hub</a>.</p>
<p>The Github page covers how to clone and setup the <code>alias</code> to run SQLcl via a Docker container. A demo of it in action is included below. A few notes about the demo:</p>
<ul>
<li>The initial command <code>docker ps |grep sql</code> shows all the active docker containers</li>
<li>SQLcl is run via a bash alias (<em>see <a href="https://github.com/martindsouza/docker-oracle-sqlcl" target="_blank" rel="noopener">Github</a> instructions for how to do this</em>).<ul>
<li>It kicks off my local <code>login.sql</code> script that is on my laptop (not on the docker container).</li>
</ul>
</li>
<li><code>docker ps |grep sql</code> is run again (in different terminal) to show that SQLcl is actually being run as a Docker container</li>
</ul>
<img src="/2020/02/docker-image-for-oracle-sqlcl/docker-sqlcl.gif" class="">
      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.talkapex.com/2020/02/docker-image-for-oracle-sqlcl/" data-id="ck6opmp7q00hj01ls47ple9op" class="article-share-link">Share</a>
      
        <a href="http://www.talkapex.com/2020/02/docker-image-for-oracle-sqlcl/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/docker/" rel="tag">docker</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/sqlcl/" rel="tag">sqlcl</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-using-docker-for-cli-applications" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/01/using-docker-for-cli-applications/" class="article-date">
  <time datetime="2020-01-27T12:12:53.000Z" itemprop="datePublished">2020-01-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/01/using-docker-for-cli-applications/">Using Docker for CLI Applications</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>A while ago I wrote an article called <a href="/2018/04/docker-as-a-micro-service/" title="Docker as a Micro Service">Docker as a Micro Service</a> which covered how I used <a href="https://www.docker.com/" target="_blank" rel="noopener">Docker</a> to run the Alexa CLI tool. This was my first time using Docker for a CLI application.</p>
<p>Since then, I’ve started to Dockerize other CLI tools and have found it very useful. Before I continue, I’ll admit there’s been some additional overhead both running a container for each command and also getting the Docker images correct. It has solved a few issues for me:</p>
<ul>
<li>I no longer worry about OS upgrade/changes on my laptop as my CLI commands all “reside” in the Docker image</li>
<li>I avoid cluttering my system with a bunch of tools that can be a pain to remove if I don’t like them</li>
<li>Avoid all the installation, dependency issues, etc</li>
<li>When I change laptops I don’t need to reinstall all my tools. Docker will fetch them automatically the first time I call them.<ul>
<li>This is also true for working with multiple machines</li>
</ul>
</li>
</ul>
<p>Going down the path of Dockerizing my CLI applications I’ve learned a few things that others may find  helpful looking to take the same approach:</p>
<ul>
<li>Use <code>`pwd`</code> to evaluate your current directory as a mount volume to the container (<em>demo in next point</em>)</li>
<li>Use single quotes around the <code>alias</code> definition so that expressions aren’t evaluated until run time. Ex:</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Double Quote issue</span></span><br><span class="line"><span class="built_in">alias</span> dummycommand=<span class="string">"docker run -it --rm \</span></span><br><span class="line"><span class="string">  -v `pwd`:/opt/node_app \</span></span><br><span class="line"><span class="string">  somedockerimage:latest"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># This will always (no matter where I call dummycommand from) </span></span><br><span class="line"><span class="comment"># map "~/" on my laptop to "/opt/node_app" on the container</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Single Quote (Solution)</span></span><br><span class="line"><span class="built_in">alias</span> dummycommand=<span class="string">'docker run -it --rm \</span></span><br><span class="line"><span class="string">  -v `pwd`:/opt/node_app/app \</span></span><br><span class="line"><span class="string">  somedockerimage:latest'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># This will always map the current directory I'm in on my </span></span><br><span class="line"><span class="comment"># laptop to "/opt/node_app/app" on the container</span></span><br></pre></td></tr></table></figure>

<p>In the next few articles I’ll write about some of the CLI tools I use and how I’ve moved them to Docker.</p>
<ul>
<li><a href="/2020/02/docker-image-for-oracle-sqlcl/" title="Docker Image for Oracle SQLcl">Docker Image for Oracle SQLcl</a></li>
<li><a href="/2020/02/docker-for-oracle-sql-plus/" title="Docker for Oracle SQL*Plus">Docker for Oracle SQL*Plus</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.talkapex.com/2020/01/using-docker-for-cli-applications/" data-id="ck6opmp8c00hv01ls75h1heuc" class="article-share-link">Share</a>
      
        <a href="http://www.talkapex.com/2020/01/using-docker-for-cli-applications/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/docker/" rel="tag">Docker</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-how-to-stage-part-of-a-file-in-git" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/01/how-to-stage-part-of-a-file-in-git/" class="article-date">
  <time datetime="2020-01-25T20:53:25.000Z" itemprop="datePublished">2020-01-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/01/how-to-stage-part-of-a-file-in-git/">How to Stage Part of a File in Git</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>When working with <a href="https://git-scm.com/" target="_blank" rel="noopener">Git</a> (or any version control system) most developers tend to commit all the changes in a given file. What if you wanted to only commit part of the file? This situation can occur in a few situations, such as:</p>
<ul>
<li>Code not ready to be committed</li>
<li>Working on two tickets at once and want separate commits for each set of work</li>
<li>Some <code>TODO</code> comments that you don’t want in the codebase</li>
</ul>
<p>Git has a feature called <a href="https://git-scm.com/book/en/v2/Git-Tools-Interactive-Staging" target="_blank" rel="noopener">interactive staging</a> which lets you select specific lines of code you want staged (and then committed). The demo below highlights this using <a href="https://code.visualstudio.com/" target="_blank" rel="noopener">Visual Studio Code</a>‘s (VSCode) Git tools.</p>
<p>In my current file I have the following:</p>
<img src="/2020/01/how-to-stage-part-of-a-file-in-git/demo-1.png" class="">

<p>We can divide up the “new code” into two sections. The first <code>select</code> statement should be committed but the second statement (staring with <code>-- TODO mdsouza</code>) should not be committed. </p>
<p>If the file needs to be committed without interactive staging a few options exist:</p>
<ul>
<li>Commit everything</li>
<li>Cut out the sections I don’t want in and paste them back in after commit</li>
<li>Copy file (as a backup), remove sections I don’t want, commit, restore backup</li>
</ul>
<p>Neither of these options will lead to good results and take additional time. Using VSCode you can do interactive staging in multiple ways. The following shows how to stage specific lines.</p>
<img src="/2020/01/how-to-stage-part-of-a-file-in-git/git-demo.gif" class="">

<p>A few things to note from the demo:</p>
<ul>
<li>Once staged, <code>test.sql</code> was still marked as having both changes and staged changes</li>
<li>Only selected lines were staged (then committed)</li>
</ul>
<p><em>Note: In <a href="https://www.sourcetreeapp.com/" target="_blank" rel="noopener">Source Tree</a> (a free Git UI from <a href="https://www.atlassian.com/" target="_blank" rel="noopener">Atlassian</a>) this feature is called <code>hunk</code>s.</em></p>
<p>Since finding out about interactive staging I’ve been using it to restrict what goes into each commit. It’s allowed me to keep my commits more concise along with not having to commit work that isn’t ready for others (ex: personal <code>TODO</code> comments).</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.talkapex.com/2020/01/how-to-stage-part-of-a-file-in-git/" data-id="ck6opmp7m00hh01ls13qrbiog" class="article-share-link">Share</a>
      
        <a href="http://www.talkapex.com/2020/01/how-to-stage-part-of-a-file-in-git/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/git/" rel="tag">git</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-how-to-select-an-optional-value" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/01/how-to-select-an-optional-value/" class="article-date">
  <time datetime="2020-01-22T20:21:52.000Z" itemprop="datePublished">2020-01-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/01/how-to-select-an-optional-value/">How to Select an Optional Value</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Sometimes in your PL/SQL code you need to query a table which may or may not contain what you’re looking for. This post will cover some different ways of doing it.</p>
<h2 id="The-problem"><a href="#The-problem" class="headerlink" title="The problem"></a>The problem</h2><p>Suppose you need to find an employee’s ID named <code>SAM</code>. If he doesn’t exist in the table then insert a new employee record.</p>
<p><em>Side note: Technically you can use a <code>merge</code> statement for this functionality but want to highlight that a row may not be found.</em></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span></span><br><span class="line">  l_empno emp.empno%<span class="keyword">type</span>;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">select</span> e.empno</span><br><span class="line">  <span class="keyword">into</span> l_empno</span><br><span class="line">  <span class="keyword">from</span> emp e</span><br><span class="line">  <span class="keyword">where</span> e.ename = <span class="string">'SAM'</span>;</span><br><span class="line"></span><br><span class="line">  if l_empno is null then</span><br><span class="line">    <span class="comment">-- ... insert new emp</span></span><br><span class="line">  <span class="keyword">end</span> <span class="keyword">if</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">-- ...</span></span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line">/</span><br><span class="line"></span><br><span class="line"><span class="comment">-- Errors</span></span><br><span class="line">ORA-01403: no data found</span><br><span class="line">ORA-06512: at line 4</span><br><span class="line">1.     00000 -  "no data found"</span><br></pre></td></tr></table></figure>

<p>An error is raised if the employee (<code>SAM</code> in this case) isn’t found. Here are some options to get around this.</p>
<h2 id="Explicit-exception-block"><a href="#Explicit-exception-block" class="headerlink" title="Explicit exception block"></a>Explicit exception block</h2><p>This is the most correct way to know if the value exists or not. Some don’t like to use this approach as it can clutter code (due to additional lines of code), on the positive side it is very explicit.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span></span><br><span class="line">  l_empno emp.empno%<span class="keyword">type</span>;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">select</span> e.empno</span><br><span class="line">    <span class="keyword">into</span> l_empno</span><br><span class="line">    <span class="keyword">from</span> emp e</span><br><span class="line">    <span class="keyword">where</span> e.ename = <span class="string">'SAM'</span>;</span><br><span class="line">  exception</span><br><span class="line">    when no_data_found then </span><br><span class="line">      l_empno := null;</span><br><span class="line">  <span class="keyword">end</span>;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line">/</span><br></pre></td></tr></table></figure>

<h2 id="Using-max"><a href="#Using-max" class="headerlink" title="Using max"></a>Using <code>max</code></h2><p>Using an aggregate function will always return a value even if no rows are returned. For example:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> nvl(<span class="keyword">max</span>(dummy), <span class="string">'still returns value'</span>) val</span><br><span class="line"><span class="keyword">from</span> dual</span><br><span class="line"><span class="keyword">where</span> <span class="number">1</span>=<span class="number">2</span> <span class="comment">-- Always false</span></span><br><span class="line">;</span><br><span class="line"></span><br><span class="line">VAL          </span><br><span class="line"><span class="comment">-------------</span></span><br><span class="line">still returns value</span><br></pre></td></tr></table></figure>

<p>Using this logic with the base example we can do:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span></span><br><span class="line">  l_empno emp.empno%<span class="keyword">type</span>;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">select</span> <span class="keyword">max</span>(e.empno)</span><br><span class="line">  <span class="keyword">into</span> l_empno</span><br><span class="line">  <span class="keyword">from</span> emp e</span><br><span class="line">  <span class="keyword">where</span> e.ename = <span class="string">'SAM'</span>;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line">/</span><br></pre></td></tr></table></figure>

<p>I’ve used this in the past, however it comes with a caveat. If used on a column that isn’t unique it will still return one value. If multiple values are present (ex: all <code>emp</code>s who’s <code>job</code> is <code>MANAGER</code>) it can lead to false positives.</p>
<h2 id="Using-left-join"><a href="#Using-left-join" class="headerlink" title="Using left join"></a>Using <code>left join</code></h2><p>Similar to the previous option, selecting from <code>dual</code> (always returns a row) we can <code>left join</code> to optionally find the value.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span></span><br><span class="line">  l_empno emp.empno%<span class="keyword">type</span>;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">select</span> e.empno</span><br><span class="line">  <span class="keyword">into</span> l_empno</span><br><span class="line">  <span class="keyword">from</span> dual</span><br><span class="line">    <span class="keyword">left</span> <span class="keyword">join</span> emp e <span class="keyword">on</span> <span class="number">1</span>=<span class="number">1</span></span><br><span class="line">      <span class="keyword">and</span> e.ename = <span class="string">'SAM'</span>;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line">/</span><br></pre></td></tr></table></figure>

<p>I prefer this approach compared to the <code>max</code> approach since if multiple values are possible an error is returned (which in most cases we want):</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span></span><br><span class="line">  l_empno emp.empno%<span class="keyword">type</span>;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">select</span> e.empno</span><br><span class="line">  <span class="keyword">into</span> l_empno</span><br><span class="line">  <span class="keyword">from</span> dual</span><br><span class="line">    <span class="keyword">left</span> <span class="keyword">join</span> emp e <span class="keyword">on</span> <span class="number">1</span>=<span class="number">1</span></span><br><span class="line">     <span class="keyword">and</span> e.job = <span class="string">'MANAGER'</span> <span class="comment">-- Will return multiple values</span></span><br><span class="line">  ;   </span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line">/</span><br><span class="line"></span><br><span class="line"><span class="comment">-- Error</span></span><br><span class="line">ORA-01422: exact fetch returns more than requested number of rows</span><br><span class="line">ORA-06512: at line 5</span><br></pre></td></tr></table></figure>





      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.talkapex.com/2020/01/how-to-select-an-optional-value/" data-id="ck6opmp7g00he01lsg7oma1f6" class="article-share-link">Share</a>
      
        <a href="http://www.talkapex.com/2020/01/how-to-select-an-optional-value/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/plsql/" rel="tag">plsql</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-how-to-find-matching-sets-of-data-using-sql" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/11/how-to-find-matching-sets-of-data-using-sql/" class="article-date">
  <time datetime="2019-11-24T05:20:59.000Z" itemprop="datePublished">2019-11-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/11/how-to-find-matching-sets-of-data-using-sql/">How to Find Matching Sets of Data Using SQL</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Suppose you have a set of data in Oracle, how can you find any other matching sets of data? This is different then most queries in SQL which just have “standard” predicates. For example most queries answer the question “<em>find me all cars that are red</em>“ (<code>where color = &#39;red&#39;</code>) whereas set comparison is answering the question “<em>find me all cars that are the same as a given set of cars</em>“.</p>
<p>A good example of this problem is if you need to find orders that are <strong>exactly</strong> the same as a given order. An order can have multiple products in it. It’s not as easy as comparing one row to another, rather sets of rows to other sets of rows. </p>
<h2 id="Set-Theory"><a href="#Set-Theory" class="headerlink" title="Set Theory"></a>Set Theory</h2><p>Before continuing it’s important to go over some basic set theory. One way to think of sets are as arrays of data. When comparing for equivalence of sets we need to ask two questions:</p>
<ul>
<li>Is everything in <code>A</code> in <code>B</code>? (i.e. <code>A - B = 0</code>)</li>
<li>Is everything in <code>B</code> in <code>A</code>? (i.e. <code>B - A = 0</code>)</li>
</ul>
<p>At first glance, the second point may seem unnecessary but it isn’t as <code>A</code> may be a subset of <code>B</code>.</p>
<p>Take for example the following arrays:</p>
<ul>
<li><code>A = 1,2,3</code></li>
<li><code>B = 1,2,3,4</code></li>
</ul>
<p>In the above case, everything in <code>A</code> is in <code>B</code>, however everything in <code>B</code> (i.e. <code>4</code>) is not in <code>A</code>.</p>
<h2 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h2><p>Suppose we have a table (<code>tab_a</code>) and we want to find any other tables with the exact same column definition.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- Base table to be compared against</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tab_a (</span><br><span class="line">  <span class="keyword">id</span> <span class="built_in">number</span>,</span><br><span class="line">  first_name <span class="built_in">varchar2</span>(<span class="number">255</span>),</span><br><span class="line">  birth_date <span class="built_in">date</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- Close to tab_a but has an additional column (last_name)</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tab_b (</span><br><span class="line">  <span class="keyword">id</span> <span class="built_in">number</span>,</span><br><span class="line">  first_name <span class="built_in">varchar2</span>(<span class="number">255</span>),</span><br><span class="line">  last_name <span class="built_in">varchar2</span>(<span class="number">255</span>),</span><br><span class="line">  birth_date <span class="built_in">date</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- Same as tab_a</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tab_c (</span><br><span class="line">  <span class="keyword">id</span> <span class="built_in">number</span>,</span><br><span class="line">  first_name <span class="built_in">varchar2</span>(<span class="number">255</span>),</span><br><span class="line">  birth_date <span class="built_in">date</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>The above script will create three tables. If we start with <code>tab_a</code> only <code>tab_c</code> is the exact same. Using the set theory logic above, and the <a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/sqlrf/Set-Operators.html#GUID-5CB549AF-5A4F-453E-B164-49CAC8F94CBF" target="_blank" rel="noopener"><code>minus</code></a> set operator clause in Oracle you can find matching tables using the following query:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> at_match.table_name</span><br><span class="line"><span class="keyword">from</span> dual</span><br><span class="line">  <span class="comment">-- Using the all_tables view so we have a large data set to compare against</span></span><br><span class="line">  <span class="keyword">join</span> all_tables at_src <span class="keyword">on</span> <span class="number">1</span>=<span class="number">1</span></span><br><span class="line">  <span class="keyword">join</span> all_tables at_match <span class="keyword">on</span> <span class="number">1</span>=<span class="number">1</span></span><br><span class="line">    <span class="comment">-- Exclude the same table</span></span><br><span class="line">    <span class="keyword">and</span> at_match.table_name != at_src.table_name</span><br><span class="line"><span class="keyword">where</span> <span class="number">1</span>=<span class="number">1</span></span><br><span class="line">  <span class="keyword">and</span> at_src.table_name = <span class="string">'TAB_A'</span></span><br><span class="line">  <span class="comment">-- A - B = 0</span></span><br><span class="line">  <span class="keyword">and</span> <span class="keyword">not</span> <span class="keyword">exists</span> (</span><br><span class="line">    <span class="keyword">select</span> atc.column_name, atc.data_type</span><br><span class="line">    <span class="keyword">from</span> all_tab_columns atc</span><br><span class="line">    <span class="keyword">where</span> atc.table_name = at_src.table_name</span><br><span class="line">    <span class="keyword">minus</span></span><br><span class="line">    <span class="keyword">select</span> atc.column_name, atc.data_type</span><br><span class="line">    <span class="keyword">from</span> all_tab_columns atc</span><br><span class="line">    <span class="keyword">where</span> atc.table_name = at_match.table_name</span><br><span class="line">  )</span><br><span class="line">  <span class="comment">-- B - A = 0</span></span><br><span class="line">  <span class="keyword">and</span> <span class="keyword">not</span> <span class="keyword">exists</span> (</span><br><span class="line">    <span class="keyword">select</span> atc.column_name, atc.data_type</span><br><span class="line">    <span class="keyword">from</span> all_tab_columns atc</span><br><span class="line">    <span class="keyword">where</span> atc.table_name = at_match.table_name</span><br><span class="line">    <span class="keyword">minus</span></span><br><span class="line">    <span class="keyword">select</span> atc.column_name, atc.data_type</span><br><span class="line">    <span class="keyword">from</span> all_tab_columns atc</span><br><span class="line">    <span class="keyword">where</span> atc.table_name = at_src.table_name</span><br><span class="line">  )</span><br><span class="line">;</span><br><span class="line"></span><br><span class="line">TABLE_NAME</span><br><span class="line"><span class="comment">----------</span></span><br><span class="line">TAB_C</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.talkapex.com/2019/11/how-to-find-matching-sets-of-data-using-sql/" data-id="ck6opmp4j00ga01ls3j2qbeft" class="article-share-link">Share</a>
      
        <a href="http://www.talkapex.com/2019/11/how-to-find-matching-sets-of-data-using-sql/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/sql/" rel="tag">sql</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/30/">30</a><a class="extend next" rel="next" href="/page/2/">Next &amp;raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    <div class="widget-wrap">
  <h3 class="widget-title">Martin Giffy D'Souza</h3>
  <div class="widget aced">
    <img src="/images/profile-martin.jpg" alt="">&nbsp;&nbsp;<a href="http://goo.gl/IOHra" target="_blank" rel="noopener"><img src="/images/aced-logo.gif" alt="" /></a>
  </div>
</div>

  
    <div class="widget-wrap">
  <h3 class="widget-title">Links</h3>
  <div class="widget">
    <ul>
      <li><a id="sidebar-link-oos" href="https://github.com/oraopensource/" target="_blank">OraOpenSource</a></li>
      <li><a id="sidebar-link-podcast" href="http://apex.press/talkshow" target="_blank">Oracle APEX Podcast</a></li>
      <li><a id="sidebar-link-rss" href="/atom.xml">RSS Feed</a></li>
      <li><a id="sidebar-link-email" href="mailto:martin@talkapex.com">Email me</a></li>
      <li><a id="sidebar-link-twitter" href="https://twitter.com/martindsouza" target="_blank">Twitter</a></li>
      <li><a id="sidebar-link-linkedin" href="http://www.linkedin.com/in/martingiffydsouza" target="_blank">LinkedIn</a></li>
    </ul>
  </div>
</div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/" rel="tag">Docker</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/apex/" rel="tag">apex</a><span class="tag-list-count">153</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/apex-19/" rel="tag">apex-19</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/apex-5/" rel="tag">apex-5</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/apex-5-1/" rel="tag">apex-5.1</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/apex-plugin/" rel="tag">apex-plugin</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/best-practice/" rel="tag">best-practice</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/checkbox/" rel="tag">checkbox</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/chrome/" rel="tag">chrome</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/" rel="tag">css</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/design/" rel="tag">design</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/" rel="tag">docker</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dynamic-actions/" rel="tag">dynamic-actions</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/" rel="tag">git</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/interactive-report/" rel="tag">interactive-report</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iot/" rel="tag">iot</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/" rel="tag">javascript</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jquery/" rel="tag">jquery</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kscope/" rel="tag">kscope</a><span class="tag-list-count">21</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/logger/" rel="tag">logger</a><span class="tag-list-count">20</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/macos/" rel="tag">macos</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/meta/" rel="tag">meta</a><span class="tag-list-count">19</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/odtug/" rel="tag">odtug</a><span class="tag-list-count">25</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/oos-utils/" rel="tag">oos-utils</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/oow/" rel="tag">oow</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/open-source/" rel="tag">open-source</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/oracle/" rel="tag">oracle</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/oracle-12c/" rel="tag">oracle-12c</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/oracle-18c/" rel="tag">oracle-18c</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ords/" rel="tag">ords</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/plsql/" rel="tag">plsql</a><span class="tag-list-count">25</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/security/" rel="tag">security</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sql/" rel="tag">sql</a><span class="tag-list-count">16</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sql-data-modeler/" rel="tag">sql-data-modeler</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sql-developer/" rel="tag">sql-developer</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sqlcl/" rel="tag">sqlcl</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sqlplus/" rel="tag">sqlplus</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tabular-form/" rel="tag">tabular-form</a><span class="tag-list-count">3</span></li></ul>
    </div>
  </div>


  
    <div class="widget-wrap">
  <h3 class="widget-title">Books</h3>
  <div class="widget">
    <table class="books">
      <tbody>
        <tr>
          <td><img src="/images/book-apex-plugins.jpeg" alt=""></td>
          <td><img src="/images/book-expert-apex-5.jpeg" alt=""></td>
        </tr>
        <tr>
          <td><a href="http://goo.gl/089zi" target="_blank" rel="noopener">APEX Plugins</a></td>
          <td><a href="http://bit.ly/talkapex-book-expert-2nd-ed" target="_blank" rel="noopener">Expert APEX 5</a></td>
        </tr>
        <tr>
          <td><img src="/images/book-begin-apex-4.jpeg" alt=""></td>
          <td><img src="/images/book-expert-apex-4.jpeg" alt=""></td>
        </tr>
        <tr>
          <td><a href="http://goo.gl/NxHoF" target="_blank" rel="noopener">Beginning APEX 4</a></td>
          <td><a href="http://goo.gl/tXm3P" target="_blank" rel="noopener">Expert APEX 4</a></td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/">2020</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/">2019</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/">2018</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/">2017</a><span class="archive-list-count">22</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/">2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/">2015</a><span class="archive-list-count">35</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/">2014</a><span class="archive-list-count">17</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/">2013</a><span class="archive-list-count">35</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/">2012</a><span class="archive-list-count">25</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/">2011</a><span class="archive-list-count">27</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/">2010</a><span class="archive-list-count">40</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/">2009</a><span class="archive-list-count">51</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/">2008</a><span class="archive-list-count">5</span></li></ul>
    </div>
  </div>


  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 Martin Giffy D&#39;Souza<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    
<script>
  var disqus_shortname = 'talkapex';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>


<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-8016477-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->




  </div>
</body>
</html>